(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"/uPD":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CalculatorComponent}));class CalculatorComponent{constructor(){this.expression=""}ngAfterViewInit(){document.addEventListener("keydown",t=>{this.getInput(t.key)})}getInput(t){switch(t){case"AC":this.expression="";break;case"DEL":case"Backspace":this.expression=this.expression.substring(0,this.expression.length-1);break;case"=":case"Enter":this.expression=this.evaluateExpression(this.expression);break;case"%":{let t=this.evaluateExpression(this.expression);"Error"!==t&&(t=this.evaluateExpression(t+"* 100")),this.expression=t;break}case"!":{let t=this.evaluateExpression(this.expression);if("Error"!==t||t.includes("."))for(var e=Number(t)-1;e>1;e--)t*=e;else t="Error";this.expression=t+"";break}case"1/":{let t=this.evaluateExpression(this.expression);"Error"!==t&&(t=this.evaluateExpression("1/"+t)),this.expression=t+"";break}case"sqrt":{let t=this.evaluateExpression(this.expression);"Error"!==t&&(t=this.evaluateExpression("Math.sqrt("+t+")")),this.expression=t+"";break}case"pow":{let t=this.evaluateExpression(this.expression);"Error"!==t&&(t=this.evaluateExpression("Math.pow("+t+", 2)")),this.expression=t+"";break}case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case"+":case"-":case"*":case"/":case".":case"(":case")":this.expression+=t}}evaluateExpression(exp){try{if("Error"!==exp){const result=eval(exp);return result?result+"":""}return"Error"}catch(error){return"Error"}}}},"24jU":function(t,e,n){"use strict";e.errorObject={e:{}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"7RJT":function(t,e,n){var i=n("mrSG").__extends,s=n("ds6q"),l=n("Mxlh");e.BehaviorSubject=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new l.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(s.Subject)},"9AGB":function(t,e,n){"use strict";var i=n("w5QO");function s(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:i.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(t)},e.pipeFromArray=s},FWf1:function(t,e,n){var i=n("mrSG").__extends,s=n("pshJ"),l=n("GiSu"),a=n("zB/H"),r=n("p//D"),o=n("n3uD"),u=n("MkmW"),c=function(t){function e(n,i,s){var a=t.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,a._parentSubscription=null,arguments.length){case 0:a.destination=l.empty;break;case 1:if(!n){a.destination=l.empty;break}if("object"==typeof n){n instanceof e?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new d(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new d(a,n,i,s)}return a}return i(e,t),e.prototype[r.rxSubscriber]=function(){return this},e.create=function(t,n,i){var s=new e(t,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(a.Subscription);e.Subscriber=c;var d=function(t){function e(e,n,i,a){var r,o=t.call(this)||this;o._parentSubscriber=e;var u=o;return s.isFunction(n)?r=n:n&&(r=n.next,i=n.error,a=n.complete,n!==l.empty&&(u=Object.create(n),s.isFunction(u.unsubscribe)&&o.add(u.unsubscribe.bind(u)),u.unsubscribe=o.unsubscribe.bind(o))),o._context=u,o._next=r,o._error=i,o._complete=a,o}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;o.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=o.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):u.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;u.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};o.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.config.useDeprecatedSynchronousErrorHandling)throw n;u.hostReportError(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!o.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return o.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(u.hostReportError(i),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c);e.SafeSubscriber=d},FiyT:function(t,e,n){var i=n("mrSG").__extends;e.SubjectSubscription=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n("zB/H").Subscription)},GMZp:function(t,e,n){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},GiSu:function(t,e,n){"use strict";var i=n("n3uD"),s=n("MkmW");e.empty={closed:!0,next:function(t){},error:function(t){if(i.config.useDeprecatedSynchronousErrorHandling)throw t;s.hostReportError(t)},complete:function(){}}},LBXl:function(t,e,n){"use strict";function i(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}i.prototype=Object.create(Error.prototype),e.UnsubscriptionError=i},MC6w:function(t,e,n){"use strict";var i,s=n("24jU");function l(){try{return i.apply(this,arguments)}catch(t){return s.errorObject.e=t,s.errorObject}}e.tryCatch=function(t){return i=t,l}},MkmW:function(t,e,n){"use strict";e.hostReportError=function(t){setTimeout((function(){throw t}))}},Mxlh:function(t,e,n){"use strict";function i(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}i.prototype=Object.create(Error.prototype),e.ObjectUnsubscribedError=i},"NG2+":function(t,e,n){"use strict";var i=n("8Y7J"),s=n("SVse"),l=n("7lOW"),a=n("HMdK");n("R2oh"),n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c}));var r=i.nb({encapsulation:0,styles:[[".tt-instruction-cont[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.tt-instruction-header[_ngcontent-%COMP%]{display:flex;padding:6px 14px;box-shadow:0 4px 6px 0 #00000038;z-index:10}.header-title[_ngcontent-%COMP%]{padding:4px;font-weight:500}.tt-instruction-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:auto;height:100%;padding:0 0 20px}.inst-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.inst-header[_ngcontent-%COMP%]{display:flex;padding:6px 10%}.inst-header-title[_ngcontent-%COMP%]{padding:4px;font-weight:500}.inst-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:6px 10%}.inst[_ngcontent-%COMP%]{padding:4px}.inst-highlight[_ngcontent-%COMP%]{font-weight:500}.action-cont[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:6px 14px;border-top:1px solid var(--greycardborder)}.action[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function o(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),i.pb(1,0,null,null,0,"li",[["class","inst"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(t,e){t(e,1,0,e.context.$implicit)}))}function u(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,7,null,null,null,null,null,null,null)),(t()(),i.pb(1,0,null,null,6,"div",[["class","inst-card"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,2,"div",[["class","inst-header"]],null,null,null,null,null)),(t()(),i.pb(3,0,null,null,1,"div",[["class","inst-header-title"]],null,null,null,null,null)),(t()(),i.Hb(4,null,["",":"])),(t()(),i.pb(5,0,null,null,2,"div",[["class","inst-content"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,o)),i.ob(7,278528,null,0,s.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,7,0,e.context.$implicit.list)}),(function(t,e){t(e,4,0,e.context.$implicit.title)}))}function c(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,10,"div",[["class","tt-instruction-cont"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,2,"div",[["class","tt-instruction-header"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,1,"div",[["class","header-title font18"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Platform Instructions:"])),(t()(),i.pb(4,0,null,null,2,"div",[["class","tt-instruction-content"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,u)),i.ob(6,278528,null,0,s.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null),(t()(),i.pb(7,0,null,null,3,"div",[["class","action-cont"]],null,null,null,null,null)),(t()(),i.pb(8,0,null,null,2,"div",[["class","action"]],null,null,null,null,null)),(t()(),i.pb(9,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),l.b,l.a)),i.ob(10,573440,null,0,a.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,6,0,n.instructions),t(e,10,0,n.closeButton,n.closeButton.padding,n.closeButton.fontSize,n.closeButton.id)}),null)}},Q1FS:function(t,e,n){"use strict";var i=n("yx2s"),s=n("Xwq/"),l=n("zfKp"),a=n("9AGB"),r=n("n3uD");function o(t){if(t||(t=r.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,l=s.toSubscriber(t,e,n);if(i?i.call(l,this.source):l.add(this.source||r.config.useDeprecatedSynchronousErrorHandling&&!l.syncErrorThrowable?this._subscribe(l):this._trySubscribe(l)),r.config.useDeprecatedSynchronousErrorHandling&&l.syncErrorThrowable&&(l.syncErrorThrowable=!1,l.syncErrorThrown))throw l.syncErrorValue;return l},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){r.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),i.canReportError(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=o(e))((function(e,i){var s;s=n.subscribe((function(e){try{t(e)}catch(n){i(n),s&&s.unsubscribe()}}),i,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[l.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:a.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=o(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}()},R2oh:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("8Y7J");class s{constructor(){this.action=new i.m,this.closeButton={btnName:"Close Instructions",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px",fontSize:"14px",id:"tt-instruction-close"},this.instructions=[{title:"Navigating Your Test",list:['You can see the "<u>Time available to complete</u>" in the "<u>Countdown timer</u>" at the top right of the test screen at all times',"If Sectional lock is enabled you will see another timer at section tab which is a countdown timer for that section",'You can "<u>Bookmark</u>" your answer for later review by clicking on the flag icon ( <i class="icon-bookmark-o"></i> ) in the test screen','All answers will be "<u>Saved automatically</u>"']},{title:"Instructions for Coding Section",list:['Click the\xa0"<u>Submit Code</u>"\xa0button to submit your code for evaluation. Else the code will not be submitted',"You will lose the code you have typed if you change the coding language"]},{title:"Instructions for Video Questions",list:["Please record your responses as videos for this section",'Click\xa0"<u>Start Recording</u>"\xa0to record your response. Click\xa0"<u>Submit Recording</u>"\xa0to submit your response','In case you would like to change your response, you can click "<u>Delete Recording</u>" and then re-record before clicking on "Submit". Once response is submitted, you cannot re-record the response again']},{title:"Important instructions for Proctored test",list:["The proctoring test requires you to be connected to a reliable network connection. Ensure that you are connected to an uninterrupted internet connection.","Ensure that you clear your browser\u2019s cache, history and cookies.","Do not cover your web camera while taking up the test.","Students using mobile phone for taking up the test, should place it a proper and undisturbed position.","In need of calculator, use the calculator available in the platform. Do not use your own to carry out calculations.","Make sure you have blocked all notifications in the mobile/laptop/desktop before starting the test.","Ensure that you have a clear background and your face has proper lighting while witnessing web camera.","Ensure that you have a clear background and your face has proper lighting when in front of the web camera.","Both ears should be visible in the web camera feed during the test.","Do not turn away from the monitor during test.","Keep your phone connected to your system via USB cable (Not via Bluetooth or via Wi-fi) before the test starts.","Our AI powered proctoring test will detect for suspicious activities like using mobile phone, getting help from friend etc... As per the instructions, do not involve in any activities which are classified under suspicious activity."]},{title:"Submitting Your Exam",list:['To end the test, click the\xa0"End Test"\xa0button and confirm by typing\xa0"<u>END</u>"\xa0in the prompt box',"Test will be submitted automatically if the allotted time expires"]},{title:"Caution",list:['"<u>Do not refresh the page or click the browser back button</u>"\xa0when test is in progress. You may lose all data',"In case you have an Internet or power outage, you would need to log in again to access your exam. Test will resume from the last save point."]}]}buttonFunction(t){switch(t.type){case"Close Instructions":this.action.emit({type:"Close Dialog"})}}}},"Xwq/":function(t,e,n){"use strict";var i=n("FWf1"),s=n("p//D"),l=n("GiSu");e.toSubscriber=function(t,e,n){if(t){if(t instanceof i.Subscriber)return t;if(t[s.rxSubscriber])return t[s.rxSubscriber]()}return t||e||n?new i.Subscriber(t,e,n):new i.Subscriber(l.empty)}},ds6q:function(t,e,n){var i=n("mrSG").__extends,s=n("Q1FS"),l=n("FWf1"),a=n("zB/H"),r=n("Mxlh"),o=n("FiyT"),u=n("p//D"),c=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i(e,t),e}(l.Subscriber);e.SubjectSubscriber=c;var d=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[u.rxSubscriber]=function(){return new c(this)},e.prototype.lift=function(t){var e=new h(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new r.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new r.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new r.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new r.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new r.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(t.complete(),a.Subscription.EMPTY):(this.observers.push(t),new o.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new s.Observable;return t.source=this,t},e.create=function(t,e){return new h(t,e)},e}(s.Observable);e.Subject=d;var h=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.Subscription.EMPTY},e}(d);e.AnonymousSubject=h},for5:function(t,e,n){"use strict";n.r(e);var i=n("8Y7J");class s{}var l=n("pMnS"),a=n("vZro"),r=n("gMYz"),o=n("iInd"),u=n("4WDQ"),c=n("EPgW"),d=n("B2uL"),h=n("2tQG"),p=n("WsEI"),_=n("UZGc"),m=n("4IUv"),g=n("WeYl"),b=n("OAyc"),v=n("mP7f"),f=n("SVse"),S=n("+hvV"),w=n("SWqD"),y=n("AytR");class x{constructor(t){this.testService=t,this.success=new i.m(!1),this.instructionTime=y.a.instructionTime,this.t_name="",this.details_list=[{icon:"icon-ios-locked",icon_style:"lock-section-icon",label:"Lock Section",value:"Enabled"},{icon:"icon-document",icon_style:"attempt-icon",label:"Attempts",value:"1"},{icon:"icon-proctoring",icon_style:"proctoring-icon",label:"Proctoring",value:"Yes"}],this.section_table={header:["Sections","Questions","Duration","Marks"],data:[],style:{eachRow:{"margin-top":"0px"}}},this.circleData={type:"multiText",value:0,label:0,circleColor:"#51c5cf",circleClass:"antiClock",mainClass:"font40",mainDy:"0em",mainY:"35%",mainFont:{color:"#51c5cf",weight:"bold"},textType:"sec",typeClass:"font20",textDy:"0em",textY:"65%",textFont:{color:"#51c5cf"}},this.test_detail_overview=[{title:"Sections",value:0},{title:"Questions",value:0},{title:"Duration",value:0},{title:"Marks",value:0}],this.circleData.value=this.instructionTime,this.circleData.label=this.instructionTime;const e=setInterval(()=>{this.circleData=Object.assign({},this.circleData,{label:this.circleData.label-1,value:this.circleData.value-1}),this.circleData.label||(clearInterval(e),this.success.emit(!0))},1e3);this.lockTestParams=this.testService.lockTestParams,this.currentModData=this.testService.testData,this.populateInstruction()}populateInstruction(){const t=JSON.parse(localStorage.getItem("school_details"));t&&t.enable_features&&t.enable_features.allow_promo_video&&(this.allowPromoVideo=!0),this.t_name=this.testService.testData.t_name,this.details_list[0].value=this.testService.testData.c_modules.lock_sections?"Yes":"No",this.details_list[1].value=this.testService.testData.attempt_no+"",this.details_list[2].value=this.testService.testData.c_modules.remote_proctoring_type?"Yes":"No",this.testService.testData.template_data&&this.testService.testData.template_data.sections&&(this.section_table.data=[],this.testService.testData.template_data.sections.forEach(t=>{const e={Sections:t.name,Questions:t.Questions,Duration:t.Durations,Marks:Math.round(100*t.Marks)/100};(this.testService.testData.c_modules.practise_test||this.testService.testData.c_modules.disable_timer)&&(e.Duration="Unlimited"),t.Max_Attemptable&&(e.Questions=t.Max_Attemptable+" out of "+t.Questions),this.test_detail_overview[0].value+=1,this.test_detail_overview[1].value+=t.Max_Attemptable?t.Max_Attemptable:e.Questions,"Unlimited"!==e.Duration?this.test_detail_overview[2].value+="string"==typeof e.Duration&&"Unlimited"!==e.Duration?Number(e.Duration.substring(0,e.Duration.length-2)):e.Duration:this.test_detail_overview[2].value="Unlimited",this.test_detail_overview[3].value+=e.Marks,"number"==typeof e.Duration&&(e.Duration=e.Duration+" m"),this.section_table.data.push(e)}),this.test_detail_overview[3].value=Math.round(100*this.test_detail_overview[3].value)/100,"Unlimited"!==this.test_detail_overview[2].value&&(this.test_detail_overview[2].value+=" m"))}}var k=i.nb({encapsulation:0,styles:[["@media screen and (max-device-width:480px){.test-details-overview[_ngcontent-%COMP%], .test-metrics[_ngcontent-%COMP%]{flex-direction:column}.registerLink[_ngcontent-%COMP%]{justify-content:center}}@media screen and (min-device-width:481px) and (max-device-width:768px){.test-details-overview[_ngcontent-%COMP%], .test-metrics[_ngcontent-%COMP%]{flex-direction:column}.registerLink[_ngcontent-%COMP%]{justify-content:center}}@media screen and (min-device-width:769px) and (max-device-width:1024px){.test-details-overview[_ngcontent-%COMP%], .test-metrics[_ngcontent-%COMP%]{flex-direction:row}}@media screen and (min-device-width:1025px) and (max-device-width:1200px){.test-details-overview[_ngcontent-%COMP%], .test-metrics[_ngcontent-%COMP%]{flex-direction:row}}@media screen and (min-device-width:1200px){.test-details-overview[_ngcontent-%COMP%], .test-metrics[_ngcontent-%COMP%]{flex-direction:row}}.test-instruction[_ngcontent-%COMP%]{display:flex;flex-direction:column}.test-title-card[_ngcontent-%COMP%]{background-color:#0078d7;text-align:center;color:var(--white);box-shadow:0 3px 6px 0 #00000038;font-size:22px;padding:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.instruction-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:32px 16%}.test-metrics[_ngcontent-%COMP%]{display:flex;padding:10px 0}.timer[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:column}.timer-container[_ngcontent-%COMP%]{width:43%;margin:auto}.test-meta[_ngcontent-%COMP%]{width:100%;display:flex}.test-meta-container[_ngcontent-%COMP%]{margin:auto}.test-meta-list[_ngcontent-%COMP%]{display:flex;padding:8px 0;align-items:center}.lock-section-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;background-color:#ff9fa7;border-radius:50%;font-size:16px}.attempt-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;background-color:#ffd78a;border-radius:50%;font-size:16px}.proctoring-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;background-color:#84eaff;border-radius:50%;font-size:16px}.list-label[_ngcontent-%COMP%]{padding:0 6px;color:var(--iconGrey)}.list-value[_ngcontent-%COMP%]{font-weight:500}.test-details[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.test-details-overview[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;padding:10px 0}.icon-document[_ngcontent-%COMP%]::before, .icon-ios-locked[_ngcontent-%COMP%]::before, .icon-proctoring[_ngcontent-%COMP%]::before{margin:unset;color:var(--white)}.register-text[_ngcontent-%COMP%]{color:var(--sixtyOne)}.registerLink[_ngcontent-%COMP%]{display:flex}"]],data:{}});function D(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","timer-container"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-circle-progress",[],null,null,null,p.b,p.a)),i.ob(2,573440,null,0,_.a,[],{data:[0,"data"],max_limit:[1,"max_limit"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.circleData,n.instructionTime)}),null)}function C(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,8,"div",[["class","promo-video"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,2,"video",[["autoplay",""],["class","minwidth vbodyvideo"],["loop",""]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,0,"source",[["src","https://images.examly.io/promo-video/virtusa.mp4"],["type","video/mp4"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,[" Your browser does not support HTML5 video. "])),(t()(),i.pb(4,0,null,null,4,"div",[["class","registerLink"]],null,null,null,null,null)),(t()(),i.pb(5,0,null,null,1,"div",[["class","register-header w_500"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,[" Register Now:\xa0 "])),(t()(),i.pb(7,0,null,null,1,"a",[["class","register-text"],["href","https://neohire.io/virtusa-neuralhack-season5/"],["target","_blank"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Click Here."]))],null,null)}function q(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,5,"div",[["class","test-meta-list"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,0,"i",[],[[8,"className",0]],null,null,null,null)),(t()(),i.pb(2,0,null,null,1,"div",[["class","list-label"]],null,null,null,null,null)),(t()(),i.Hb(3,null,[""," :"])),(t()(),i.pb(4,0,null,null,1,"div",[["class","list-value"]],null,null,null,null,null)),(t()(),i.Hb(5,null,[" "," "]))],null,(function(t,e){t(e,1,0,i.rb(2,"",e.context.$implicit.icon," ",e.context.$implicit.icon_style,"")),t(e,3,0,e.context.$implicit.label),t(e,5,0,e.context.$implicit.value)}))}function I(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","registerLink"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,[" Please wait while we are generating the questions for you. "]))],null,null)}function P(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"app-icon-header-count",[["type","type2"]],null,null,null,m.b,m.a)),i.ob(1,114688,null,0,g.a,[],{data:[0,"data"],type:[1,"type"]},null)],(function(t,e){t(e,1,0,e.context.$implicit,"type2")}),null)}function M(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-lock-rule-invalidation",[],null,null,null,b.b,b.a)),i.ob(2,114688,null,0,v.a,[],{rulesPreviewData:[0,"rulesPreviewData"],currentModData:[1,"currentModData"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.lockTestParams,n.currentModData)}),null)}function T(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,24,"div",[["class","test-instruction"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","test-title-card"]],null,null,null,null,null)),(t()(),i.Hb(2,null,[" "," "])),(t()(),i.pb(3,0,null,null,21,"div",[["class","instruction-content"]],null,null,null,null,null)),(t()(),i.pb(4,0,null,null,9,"div",[["class","test-metrics"]],null,null,null,null,null)),(t()(),i.pb(5,0,null,null,4,"div",[["class","timer"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,D)),i.ob(7,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,C)),i.ob(9,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(10,0,null,null,3,"div",[["class","test-meta"]],null,null,null,null,null)),(t()(),i.pb(11,0,null,null,2,"div",[["class","test-meta-container"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,q)),i.ob(13,278528,null,0,f.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null),(t()(),i.pb(14,0,null,null,8,"div",[["class","test-details"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,I)),i.ob(16,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(17,0,null,null,2,"div",[["class","test-details-overview"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,P)),i.ob(19,278528,null,0,f.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null),(t()(),i.pb(20,0,null,null,2,"div",[["class","test-details-container"]],null,null,null,null,null)),(t()(),i.pb(21,0,null,null,1,"web-flextable",[],null,null,null,S.b,S.a)),i.ob(22,49152,null,0,w.a,[],{data:[0,"data"],headerData:[1,"headerData"],style:[2,"style"]},null),(t()(),i.gb(16777216,null,null,1,null,M)),i.ob(24,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,7,0,!n.allowPromoVideo),t(e,9,0,n.allowPromoVideo),t(e,13,0,n.details_list),t(e,16,0,n.allowPromoVideo),t(e,19,0,n.test_detail_overview),t(e,22,0,n.section_table.data,n.section_table.header,n.section_table.style),t(e,24,0,n.lockTestParams&&n.currentModData)}),(function(t,e){t(e,2,0,e.component.t_name)}))}var E=n("u/w2"),O=n("7lOW"),A=n("HMdK");class H{constructor(t){this.testService=t,this.showQuestionator=!0,this.showSummary=!0,this.showActions=!0,this.sectionSummaryAction=new i.m,this.questionList=[],this.sectionSummary=[],this.instructionButton={btnName:"Instructions",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px",fontSize:"14px",id:"tt-section-summary-instruction"},this.showAttemptSummary=!0,this.attemptSummaryButton={btnName:"Attempt Summary",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px",fontSize:"14px",id:"tt-section-summary-attempt"},this.showSubmit=!0,this.submitButton={btnName:"Submit Section",disable:"false",border:"1px solid var(--orange)",fontColor:"var(--seven)",background:"var(--orange)",padding:"6px",fontSize:"14px",id:"tt-section-summary-submit"}}ngOnInit(){this.showInstruction=!!(this.testService&&this.testService.schoolData&&["wileynxt679","wileynxt355"].includes(this.testService.schoolData.school_code))}ngOnChanges(t){for(let e in t)"question"===e&&(this.question&&this.testService.testData.current_q&&(this.question=this.testService.testData.current_q),this.markQuestionViewed(),this.sectionChangeHandle()),"disableSubmit"===e&&this.disableSubmitHandle();this.populateSummary()}sectionChangeHandle(){this.submitButton.btnName=this.testService.testData.c_modules.lock_sections&&this.secIndex<this.testService.testData.frozen_data.frozen_test_data.length-1?"Submit Section":"Submit Test"}disableSubmitHandle(){this.submitButton.disable=this.disableSubmit||this.testService.testData.c_modules.disable_manual_submit?"true":"false"}populateSummary(){if(this.testService.testData.frozen_data&&this.testService.testData.frozen_data.frozen_test_data){if(this.title=this.testService.testData.frozen_data.frozen_test_data[this.secIndex].name,this.summaryTitle=this.showQuestionator?"Summary":this.title,this.questionList=this.testService.testData.frozen_data.frozen_test_data[this.secIndex].questions,this.testService.testData.c_modules&&this.testService.testData.c_modules.answer_edit_restrict&&!this.testService.testData.curr_submit_count){const t=[];let e=0,n=0;this.testService.testData.frozen_data.frozen_test_data.forEach(e=>{e.questions.forEach(e=>{e.program_submitted_count>1&&(n+=e.program_submitted_count,t.push(e.program_submitted_count))})}),e=n-t.length,this.testService.testData.curr_submit_count=e>1?e:0,this.testService.updateEditCount(!1)}let t=0,e=0,n=0,i=0,s=0;this.questionList.forEach(l=>{l.attempted&&(t+=1),l.attempted||3!==l.state||(e+=1),5===l.state&&(n+=1),l.attempted&&l.online&&(i+=1),l.program_submitted_count>0&&(s+=1)}),this.testService.testData.editAfterSectionComplete=!(!(this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.edit_after_section_complete)||s===this.questionList.length||this.testService.testData.frozen_data&&this.testService.testData.frozen_data.frozen_test_data&&this.testService.testData.frozen_data.frozen_test_data.length>0&&this.testService.testData.frozen_data.frozen_test_data[this.secIndex].max_questions<=s),this.sectionSummary=[],this.sectionSummary.push({label:"# of questions",value:this.questionList.length}),this.sectionSummary.push({label:"Answered",value:t}),this.sectionSummary.push({label:"Saved in Server",value:i}),this.sectionSummary.push({label:"Skipped",value:e}),this.sectionSummary.push({label:"Not Viewed",value:n}),this.questionatorDisable=this.testService.testData.c_modules.disable_previous||this.testService.testData.c_modules.answer_mandatory&&s!==this.questionList.length,this.cutoff_Percentage=this.testService.testData.frozen_data.frozen_test_data[this.secIndex].cutoff_percentage,this.cutoff_Based=this.testService.testData.frozen_data.frozen_test_data[this.secIndex].cutoff_based,this.cutLastSection=this.testService.testData.frozen_data.frozen_test_data.length-1}}buttonFunction(t){switch(t.type){case"Question Move":if(this.testService.testData.c_modules.disable_previous||this.testService.testData.c_modules.answer_mandatory&&!this.question.attempted)return;break;case"Submit Test":if(this.testService.testData.c_modules.disable_manual_submit)return}this.sectionSummaryAction.emit(t)}markQuestionViewed(){this.question&&5===this.question.state&&(this.question.state=3)}}var z=i.nb({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:226px;height:100%;background-color:var(--white);overflow:auto}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}.questionator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:50%}.content[_ngcontent-%COMP%]::-webkit-scrollbar, .questionator-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.questionator-header[_ngcontent-%COMP%]{background-color:#5d83d8;text-align:center;color:var(--black);padding:6px 14px}.questionator-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:6px 14px;overflow:auto}.questionator-disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.each-question[_ngcontent-%COMP%]{padding:4px}.attempted[_ngcontent-%COMP%], .bookmarked[_ngcontent-%COMP%], .bookmarked-attempted[_ngcontent-%COMP%], .not-attempted[_ngcontent-%COMP%], .skipped[_ngcontent-%COMP%]{display:flex;border-radius:50%;width:22px;height:22px;text-align:center;align-items:center;justify-content:center;padding:3px;cursor:pointer}.attempted[_ngcontent-%COMP%]:focus-visible, .bookmarked-attempted[_ngcontent-%COMP%]:focus-visible, .bookmarked[_ngcontent-%COMP%]:focus-visible, .not-attempted[_ngcontent-%COMP%]:focus-visible, .skipped[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--seven)}.not-attempted[_ngcontent-%COMP%]{border:1px solid var(--greycardborder);background-color:var(--greycardbg)}.attempted[_ngcontent-%COMP%]{border:1px solid #00cfa8;background-color:#00cfa8;color:var(--black)}.skipped[_ngcontent-%COMP%]{border-radius:50% solid orange;background-color:orange;color:var(--black)}.bookmarked[_ngcontent-%COMP%]{border:1px solid #f64266;background-color:#f64266;color:var(--white)}.bookmarked-attempted[_ngcontent-%COMP%]{border:2px solid #f64266;background-color:#00cfa8;color:var(--white)}.section-summary-header[_ngcontent-%COMP%]{background-color:#5d83d8;text-align:center;color:var(--black);padding:6px 14px}.section-summary-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.each-section-summary[_ngcontent-%COMP%]{padding:6px 14px;border-bottom:1px solid var(--greycardborder)}.each-section-summary-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:4px}.each-section-summary-label[_ngcontent-%COMP%]{color:var(--black)}.each-section-summary-value[_ngcontent-%COMP%]{font-weight:500}.section-actions-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:6px 14px}.section-action[_ngcontent-%COMP%]{padding:4px}@media screen and (max-width:992px){.container[_ngcontent-%COMP%]{width:310px}}.cutoff-container[_ngcontent-%COMP%]{background-color:#f4f6fa;text-align:center;color:var(--black);padding:1px 15px;font-size:16px}"]],data:{}});function R(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","not-attempted"],["role","menuitemradio"],["tabindex","0"]],null,[[null,"click"],[null,"keyup.enter"]],(function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),"keyup.enter"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),i}),null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.parent.context.$implicit.quesIndex+1)}))}function N(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","attempted"],["role","menuitemradio"],["tabindex","0"]],null,[[null,"click"],[null,"keyup.enter"]],(function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),"keyup.enter"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),i}),null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.parent.context.$implicit.quesIndex+1)}))}function B(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","skipped"],["role","menuitemradio"],["tabindex","0"]],null,[[null,"click"],[null,"keyup.enter"]],(function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),"keyup.enter"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),i}),null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.parent.context.$implicit.quesIndex+1)}))}function L(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","bookmarked"],["role","menuitemradio"],["tabindex","0"]],null,[[null,"click"],[null,"keyup.enter"]],(function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),"keyup.enter"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),i}),null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.parent.context.$implicit.quesIndex+1)}))}function j(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","bookmarked-attempted"],["role","menuitemradio"],["tabindex","0"]],null,[[null,"click"],[null,"keyup.enter"]],(function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),"keyup.enter"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),i}),null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.parent.context.$implicit.quesIndex+1)}))}function F(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","not-attempted"],["role","menuitemradio"],["tabindex","0"]],null,[[null,"click"],[null,"keyup.enter"]],(function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),"keyup.enter"===e&&(i=!1!==s.buttonFunction({type:"Question Move",quesIndex:t.parent.context.$implicit.quesIndex,secIndex:t.parent.context.$implicit.secIndex})&&i),i}),null,null)),(t()(),i.pb(1,0,null,null,0,"i",[["class","icon-ios-locked"]],null,null,null,null,null))],null,null)}function J(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,12,"div",[["class","each-question"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,R)),i.ob(2,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,N)),i.ob(4,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,B)),i.ob(6,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,L)),i.ob(8,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,j)),i.ob(10,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,F)),i.ob(12,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,!(e.context.$implicit.attempted&&e.context.$implicit.online||3===e.context.$implicit.state||e.context.$implicit.bookmarked||e.context.$implicit.program_submitted_count>0&&(n.testService.testData.max_edit_allowed<=0&&n.testService.testData.c_modules.answer_edit_restrict||n.testService.testData.editAfterSectionComplete))),t(e,4,0,e.context.$implicit.attempted&&e.context.$implicit.online&&!e.context.$implicit.bookmarked&&!(e.context.$implicit.program_submitted_count>0&&(n.testService.testData.max_edit_allowed<=0&&n.testService.testData.c_modules.answer_edit_restrict||n.testService.testData.editAfterSectionComplete))),t(e,6,0,e.context.$implicit.state&&3===e.context.$implicit.state&&!e.context.$implicit.bookmarked&&!(e.context.$implicit.program_submitted_count>0&&(n.testService.testData.max_edit_allowed<=0&&n.testService.testData.c_modules.answer_edit_restrict||n.testService.testData.editAfterSectionComplete))),t(e,8,0,!(e.context.$implicit.attempted&&e.context.$implicit.online)&&e.context.$implicit.bookmarked&&!(e.context.$implicit.program_submitted_count>0&&(n.testService.testData.max_edit_allowed<=0&&n.testService.testData.c_modules.answer_edit_restrict||n.testService.testData.editAfterSectionComplete))),t(e,10,0,e.context.$implicit.attempted&&e.context.$implicit.online&&e.context.$implicit.bookmarked&&!(e.context.$implicit.program_submitted_count>0&&(n.testService.testData.max_edit_allowed<=0&&n.testService.testData.c_modules.answer_edit_restrict||n.testService.testData.editAfterSectionComplete))),t(e,12,0,e.context.$implicit.program_submitted_count>0&&(n.testService.testData.max_edit_allowed<=0&&n.testService.testData.c_modules.answer_edit_restrict||n.testService.testData.editAfterSectionComplete))}),null)}function U(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,7,"div",[["class","questionator-container"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","questionator-header"]],null,null,null,null,null)),(t()(),i.Hb(2,null,[" "," "])),(t()(),i.pb(3,0,null,null,4,"div",[["class","questionator-content"],["role","menu"]],null,null,null,null,null)),i.ob(4,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(5,{"questionator-disabled":0}),(t()(),i.gb(16777216,null,null,1,null,J)),i.ob(7,278528,null,0,f.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component,i=t(e,5,0,n.questionatorDisable);t(e,4,0,"questionator-content",i),t(e,7,0,n.questionList)}),(function(t,e){t(e,2,0,e.component.title)}))}function K(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","cutoff-container"]],null,null,null,null,null)),(t()(),i.Hb(1,null,[" You should score ","% to move to the next section. "]))],null,(function(t,e){t(e,1,0,e.component.cutoff_Percentage)}))}function Q(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,5,"div",[["class","each-section-summary"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,4,"div",[["class","each-section-summary-container font14"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,1,"div",[["class","each-section-summary-label"]],null,null,null,null,null)),(t()(),i.Hb(3,null,[" "," "])),(t()(),i.pb(4,0,null,null,1,"div",[["class","each-section-summary-value"]],null,null,null,null,null)),(t()(),i.Hb(5,null,[" "," "]))],null,(function(t,e){t(e,3,0,e.context.$implicit.label),t(e,5,0,e.context.$implicit.value)}))}function W(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,5,"div",[["class","section-summary-container"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","section-summary-header"]],null,null,null,null,null)),(t()(),i.Hb(2,null,[" "," "])),(t()(),i.pb(3,0,null,null,2,"div",[["class","section-summary-content"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Q)),i.ob(5,278528,null,0,f.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,5,0,e.component.sectionSummary)}),(function(t,e){t(e,2,0,e.component.summaryTitle)}))}function $(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","section-action"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.instructionButton,n.instructionButton.padding,n.instructionButton.fontSize,n.instructionButton.id)}),null)}function V(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","section-action"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.attemptSummaryButton,n.attemptSummaryButton.padding,n.attemptSummaryButton.fontSize,n.attemptSummaryButton.id)}),null)}function Y(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","section-action"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.submitButton,n.submitButton.padding,n.submitButton.fontSize,n.submitButton.id)}),null)}function G(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,6,"div",[["class","section-actions-container"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,$)),i.ob(2,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,V)),i.ob(4,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Y)),i.ob(6,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.showInstruction),t(e,4,0,n.showAttemptSummary),t(e,6,0,n.showSubmit)}),null)}function X(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,10,"div",[["class","container"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,6,"div",[["class","content"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,U)),i.ob(3,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,K)),i.ob(5,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,W)),i.ob(7,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(8,0,null,null,2,"div",[["class","footer"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,G)),i.ob(10,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,3,0,n.showQuestionator),t(e,5,0,n.cutoff_Based&&n.secIndex<n.cutLastSection),t(e,7,0,n.showSummary),t(e,10,0,n.showActions)}),null)}var Z=n("PXTO");class tt{constructor(t,e){this.testService=t,this.globalService=e,this.sectionsAction=new i.m,this.sectionUnlock=new i.m,this.testSections=[]}ngOnChanges(t){for(let e in t)"selectedSection"===e&&this.populateSections(),"updateInstruction"===e&&this.displayInstruction()}displayInstruction(){if(this.testService&&this.testService.testData&&this.testService.testData.c_modules){const t=this.testService.testData.c_modules,e=this.testService.testData.c_modules.selectedtimezone?this.testService.testData.c_modules.selectedtimezone:"+05:30",n=t=>{let e=new Date(t);if(e){const t=e.toLocaleTimeString();let n=""+(e.getMonth()+1),i=""+e.getDate(),s=e.getFullYear();return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),[i,n,s].join("-")+" "+t}return""};if(t.practise_test||t.disable_timer)if(this.testService.testData.c_modules.auto_submit_cutoff_time){const t=n(this.globalService.timezone(this.testService.testData.c_modules.auto_submit_cutoff_time,e));this.durationText+="Test will be auto submitted in "+t}else this.showDuration=!1;else if(this.showDuration=!0,this.durationText="",this.durationText=this.testService.testData.t_total_duration?`Test will be auto submitted in ${this.testService.testData.t_total_duration}\n                         minutes from the test start time`:"",this.testService.testData.c_modules.auto_submit_cutoff_time){const t=n(this.globalService.timezone(this.testService.testData.c_modules.auto_submit_cutoff_time,e));this.durationText+=` or at ${t} whichever is earlier`}}}populateSections(){this.lock_sections=this.testService.testData.c_modules.lock_sections,this.lock_sections&&(this.lock_section_type=this.testService.testData.c_modules.sectimer?this.testService.testData.c_modules.sectimer:"withsectimer"),this.testService.testData.frozen_data&&this.testService.testData.frozen_data.frozen_test_data&&(this.testSections=[],this.testService.testData.frozen_data.frozen_test_data.forEach((t,e)=>{const n={title:t.name,value:t.questions.length,index:e,active:!1,styles:this.getDefaultSecStyle()};if(this.selectedSection===e&&(n.active=!0,n.styles=this.getActiveSecStyle()),this.testService.testData.c_modules.lock_sections&&(this.selectedSection>e?n.styles=this.getCompletedSecStyle():this.selectedSection<e&&(n.styles=this.getDisabledSecStyle())),this.testService.testData.c_modules.cutoff_based&&e){let t=this.testService.testData.frozen_data.frozen_test_data[e-1];n.isSectionLocked=this.testService.testData.frozen_data.frozen_test_data[e].isSectionLocked;let i=0;t.questions.forEach(t=>{i+=t.obtained_mark}),(i&&e===this.selectedSection||this.disableLock&&e===this.selectedSection)&&(this.testService.testData.frozen_data.frozen_test_data[this.selectedSection].isSectionLocked=!1,n.isSectionLocked=!1)}this.testSections.push(n)}))}getDefaultSecStyle(){return{container:{},title:{},value:{}}}getActiveSecStyle(){return{container:{"background-color":"#5d83d8","font-weight":"500"},title:{color:"var(--black)"},value:{"background-color":"var(--white)",color:"var(--seven)"}}}getCompletedSecStyle(){return{container:{"pointer-events":"none","background-color":"var(--twentysix)","font-weight":"500"},title:{},value:{"background-color":"var(--orange)"}}}getDisabledSecStyle(){return{container:{"pointer-events":"none","background-color":"var(--greycardbg)","font-weight":"500"},title:{},value:{"background-color":"var(--greycardborder)",color:"var(--white)"}}}sectionClick(t){if(this.testService.testData.c_modules.cutoff_based){let t=this.testService.testData.frozen_data.frozen_test_data[this.selectedSection],e=0;t.questions.forEach(t=>{("descriptive_answer_writing"!==t.question_type&&"descriptive_answer_writing_text"!==t.question_type&&"cloud_questions"!==t.question_type&&"project_questions"!==t.question_type||!1!==t.auto_evaluation)&&"html_css_js"!==t.question_type&&"diagram"!==t.question_type&&"frontend_technology"!==t.question_type&&"block_programming"!==t.question_type&&"file_upload_questions"!==t.question_type&&"video_answer_speaking"!==t.question_type&&"question_paper_upload"!==t.question_type||(e+=1)}),e===t.questions.length&&this.sectionUnlock.emit(!0)}this.testService.testData.c_modules.lock_sections||this.testService.testData.c_modules.disable_previous||this.testService.testData.c_modules.answer_mandatory||(t.type="Section Move",this.sectionsAction.emit(t))}}var et=i.nb({encapsulation:0,styles:[[".section-container[_ngcontent-%COMP%]{display:flex;padding:4px}.sections[_ngcontent-%COMP%]{display:flex;overflow:auto;margin:auto}.sections[_ngcontent-%COMP%]:hover::-webkit-scrollbar{display:block}.sections[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:4px;height:4px}.each-section[_ngcontent-%COMP%]{padding:6px}.section-timer[_ngcontent-%COMP%]{position:relative}.timer-container[_ngcontent-%COMP%]{padding:6px;width:130px;display:flex;text-align:center;background-color:#5d83d8}.timer[_ngcontent-%COMP%]{font-family:examly-digital;width:100%;color:var(--white)}.lock-section-overlay[_ngcontent-%COMP%]{position:fixed;padding-top:4px;z-index:100;box-shadow:0 3px 6px 0 #00000038}.durationText[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:15px;font-size:14px}"]],data:{}});function nt(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","durationText"]],null,null,null,null,null)),(t()(),i.Hb(1,null,[" ","\n"]))],null,(function(t,e){t(e,1,0,e.component.durationText)}))}function it(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,3,"div",[["class","section-name"],["position","top"]],null,null,null,null,null)),i.ob(1,147456,null,0,E.a,[i.k,i.C],{data:[0,"data"],position:[1,"position"]},null),(t()(),i.pb(2,0,null,null,1,"app-icon-header-count",[["role","tab"],["type","type3"]],null,[[null,"onClick"],[null,"keyup.enter"]],(function(t,e,n){var i=!0,s=t.component;return"onClick"===e&&(i=!1!==s.sectionClick(n)&&i),"keyup.enter"===e&&(i=!1!==s.sectionClick(t.parent.context.$implicit)&&i),i}),m.b,m.a)),i.ob(3,114688,null,0,g.a,[],{id:[0,"id"],data:[1,"data"],styles:[2,"styles"],type:[3,"type"]},{onClick:"onClick"})],(function(t,e){t(e,1,0,e.parent.context.$implicit.title,"top"),t(e,3,0,i.rb(1,"","tt-section- "+e.parent.context.index,""),e.parent.context.$implicit,e.parent.context.$implicit.styles,"type3")}),null)}function st(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","lock-section-overlay"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"testtaking-section-summary",[],null,null,null,X,z)),i.ob(2,638976,null,0,H,[c.a],{showQuestionator:[0,"showQuestionator"],showActions:[1,"showActions"],secIndex:[2,"secIndex"]},null)],(function(t,e){t(e,2,0,!1,!1,e.parent.parent.context.index)}),null)}function lt(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,6,"div",[["class","section-timer"]],null,[[null,"mouseover"],[null,"mouseout"]],(function(t,e,n){var i=!0,s=t.component;return"mouseover"===e&&(i=0!=(s.showSummary=!0)&&i),"mouseout"===e&&(i=0!=(s.showSummary=!1)&&i),i}),null,null)),(t()(),i.pb(1,0,null,null,3,"div",[["class","timer-container"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,2,"div",[["class","timer font26"]],null,null,null,null,null)),(t()(),i.Hb(3,null,[" "," "])),i.Db(4,1),(t()(),i.gb(16777216,null,null,1,null,st)),i.ob(6,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,6,0,e.component.showSummary)}),(function(t,e){var n=e.component,s=i.Ib(e,3,0,t(e,4,0,i.zb(e.parent.parent,0),n.s_counter));t(e,3,0,s)}))}function at(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,5,"div",[["class","each-section"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,4,"div",[["class","each-section-inner"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,it)),i.ob(3,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,lt)),i.ob(5,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,3,0,!n.lock_sections||"withoutsectimer"===n.lock_section_type||!e.context.$implicit.active),t(e,5,0,n.lock_sections&&"withsectimer"===n.lock_section_type&&e.context.$implicit.active)}),null)}function rt(t){return i.Jb(0,[i.Bb(0,Z.a,[]),(t()(),i.gb(16777216,null,null,1,null,nt)),i.ob(2,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(3,0,null,null,3,"div",[["class","section-container"]],null,null,null,null,null)),(t()(),i.pb(4,0,null,null,2,"div",[["class","sections"],["role","tablist"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,at)),i.ob(6,278528,null,0,f.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.showDuration),t(e,6,0,n.testSections)}),null)}var ot=n("Pj5t"),ut=n("/uwM"),ct=n("IAFK"),dt=n("eVqc"),ht=n("j7Wj"),pt=n("ujlm"),_t=n("oRJp"),mt=n("mUF5"),gt=n("I+MR"),bt=n("JEgo"),vt=n("xhqA"),ft=n("5s6w"),St=n("eEC3"),wt=n("VsEu"),yt=n("uCIz"),xt=n("DB1X"),kt=n("y8KD"),Dt=n("yy12"),Ct=n("YnyL"),qt=n("P7HU"),It=n("7alj"),Pt=n("3cT9"),Mt=n("XAnK"),Tt=n("hPgS"),Et=n("vB4P"),Ot=n("tUba"),At=n("XirD"),Ht=n("QPan"),zt=n("lmLT"),Rt=n("xhv7"),Nt=n("q2Gn"),Bt=n("6OA0"),Lt=n("PaPM"),jt=n("t7Fn"),Ft=n("q56M"),Jt=n("j/6n"),Ut=n("8IgF"),Kt=n("FQH9"),Qt=n("s2fH"),Wt=n("Ibei");class $t{constructor(t){this.testService=t,this.output=new i.m,this.hintButton={btnName:"Show Hint",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--ten)",padding:"6px 10px",fontSize:"14px",id:"tt-answer-hint"},this.reportButton={btnName:"Report Error",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--ten)",padding:"6px 10px",fontSize:"14px",id:"tt-answer-report"},this.testType=this.testService.testData.t_type,this.showReport=!0,this.hideQuestionMark()}ngOnChanges(t){for(const e in t)e&&"question"===e&&(this.question=this.testService.testData.current_q,this.showHint=this.testService.testData.c_modules.show_hints&&this.question.hint&&this.question.hint.length,this.scrollPage())}scrollPage(){this.questionContainer.nativeElement.scrollTop?this.questionContainer.nativeElement.scrollTop=0:window.scrollY&&window.scrollTo(0,0)}bookmarkQuestion(){this.question.bookmarked=!this.question.bookmarked,this.output.emit(this.question.bookmarked?{type:"event",data:{event_type:"book-marked"}}:{type:"event",data:{event_type:"unbook-marked"}})}hideQuestionMark(){this.showMarks=!(this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.hide_question_mark)}buttonFunction(t){this.output.emit(t)}}var Vt=i.nb({encapsulation:0,styles:[[".question[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.question[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.question-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 14px;white-space:nowrap}.header-left[_ngcontent-%COMP%]{display:flex;width:100%}.question-type[_ngcontent-%COMP%]{padding:4px}.header-right[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}.mark-cont[_ngcontent-%COMP%]{display:flex;padding:4px}.header-left[_ngcontent-%COMP%] > .icon-bookmark[_ngcontent-%COMP%], .header-left[_ngcontent-%COMP%] > .icon-bookmark-o[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer}.header-left[_ngcontent-%COMP%] > .icon-bookmark-o[_ngcontent-%COMP%]::before, .header-left[_ngcontent-%COMP%] > .icon-bookmark[_ngcontent-%COMP%]::before{font-size:21px;margin:0}.header-left[_ngcontent-%COMP%] > .icon-bookmark[_ngcontent-%COMP%]::before{color:var(--nine)}.action[_ngcontent-%COMP%]{padding:4px}.question-no[_ngcontent-%COMP%]{padding-left:4px}.question-container[_ngcontent-%COMP%]{display:flex;width:100%;padding:0 0 70px;height:100%}.each-type-question[_ngcontent-%COMP%]{width:100%;line-height:1.6}@media screen and (max-width:992px){.question-container[_ngcontent-%COMP%]{padding:0 0 10px}.mobile-wrap[_ngcontent-%COMP%]{flex-direction:column}.mobile-wrap[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%], .mobile-wrap[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{justify-content:center}}"]],data:{}});function Yt(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","action"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.hintButton,n.hintButton.padding,n.hintButton.fontSize,n.hintButton.id)}),null)}function Gt(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","action"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.reportButton,n.reportButton.padding,n.reportButton.fontSize,n.reportButton.id)}),null)}function Xt(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","mark-cont font16"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"b",[["class","mark"]],null,null,null,null,null)),(t()(),i.Hb(2,null,[" Marks : "," "]))],null,(function(t,e){var n=e.component;t(e,2,0,"Psychometric Test"===n.testType?"NA":n.question.marks)}))}function Zt(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","mark-cont font16"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"b",[["class","negative-mark"]],null,null,null,null,null)),(t()(),i.Hb(2,null,[" Negative Marks : "," "]))],null,(function(t,e){var n=e.component;t(e,2,0,"Psychometric Test"===n.testType?"NA":n.question.negative_marks)}))}function te(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"mcqsinglecorrect-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),_t.b,_t.a)),i.ob(1,573440,null,0,mt.a,[c.a],{question:[0,"question"],id:[1,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function ee(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"mcqmultiplecorrect-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),gt.b,gt.a)),i.ob(1,573440,null,0,bt.a,[c.a],{question:[0,"question"],showNotes:[1,"showNotes"],id:[2,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,!0,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function ne(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"fillupsinglecorrect-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),vt.b,vt.a)),i.ob(1,573440,null,0,ft.a,[c.a],{question:[0,"question"],id:[1,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function ie(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"essayemailwriting-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),St.b,St.a)),i.ob(1,573440,null,0,wt.a,[c.a],{question:[0,"question"],showNotes:[1,"showNotes"],id:[2,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,!0,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function se(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"descriptiveanswerwriting-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),yt.b,yt.a)),i.ob(1,573440,null,0,xt.a,[c.a],{question:[0,"question"],id:[1,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function le(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"programming-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),kt.b,kt.a)),i.ob(1,573440,null,0,Dt.a,[c.a],{question:[0,"question"],showNotes:[1,"showNotes"],id:[2,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,!0,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function ae(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"programmingfilebased-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Ct.b,Ct.a)),i.ob(1,573440,null,0,qt.a,[c.a],{question:[0,"question"],showNotes:[1,"showNotes"],id:[2,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,!0,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function re(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"htmlcssjs-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),It.b,It.a)),i.ob(1,573440,null,0,Pt.a,[c.a],{question:[0,"question"],id:[1,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function oe(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"frontendtechnology-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Mt.b,Mt.a)),i.ob(1,573440,null,0,Tt.a,[c.a],{question:[0,"question"],id:[1,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function ue(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"videoanswerspeaking-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Et.b,Et.a)),i.ob(1,573440,null,0,Ot.a,[c.a],{question:[0,"question"],id:[1,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function ce(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"classification-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),At.b,At.a)),i.ob(1,638976,null,0,Ht.a,[c.a],{question:[0,"question"],id:[1,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function de(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"blockprogramming-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),zt.b,zt.a)),i.ob(1,573440,null,0,Rt.a,[c.a],{question:[0,"question"],showNotes:[1,"showNotes"],id:[2,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,!0,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function he(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"diagram-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Nt.b,Nt.a)),i.ob(1,573440,null,0,Bt.a,[c.a],{question:[0,"question"],showNotes:[1,"showNotes"],id:[2,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,!0,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function pe(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"fileuploadquestions-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Lt.b,Lt.a)),i.ob(1,573440,null,0,jt.a,[c.a],{question:[0,"question"],id:[1,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function _e(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"projectquestion-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Ft.b,Ft.a)),i.ob(1,573440,null,0,Jt.a,[c.a],{question:[0,"question"],showNotes:[1,"showNotes"],id:[2,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,!0,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function me(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"cloudquestion-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Ut.b,Ut.a)),i.ob(1,573440,null,0,Kt.a,[c.a],{question:[0,"question"],showNotes:[1,"showNotes"],id:[2,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,!0,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function ge(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"questionpaperupload-question",[],null,[[null,"previewPdf"]],(function(t,e,n){var i=!0;return"previewPdf"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Qt.b,Qt.a)),i.ob(1,573440,null,0,Wt.a,[c.a],{question:[0,"question"],id:[1,"id"]},{previewPdf:"previewPdf"})],(function(t,e){var n=e.component;t(e,1,0,n.question,i.rb(1,"","tt-question-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function be(t){return i.Jb(0,[i.Fb(402653184,1,{questionContainer:0}),(t()(),i.pb(1,0,null,null,57,"div",[["class","question"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,11,"div",[["class","question-header"]],null,null,null,null,null)),(t()(),i.pb(3,0,null,null,5,"div",[["class","header-left"]],null,null,null,null,null)),(t()(),i.pb(4,0,null,null,2,"i",[],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.bookmarkQuestion()&&i),i}),null,null)),i.ob(5,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{ngClass:[0,"ngClass"]},null),i.Cb(6,{"icon-bookmark-o":0,"icon-bookmark":1}),(t()(),i.pb(7,0,null,null,1,"b",[["class","question-no font20"]],null,null,null,null,null)),(t()(),i.Hb(8,null,[" Q - "," "])),(t()(),i.pb(9,0,null,null,4,"div",[["class","header-right"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Yt)),i.ob(11,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Gt)),i.ob(13,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(14,0,null,null,8,"div",[["class","question-header mobile-wrap"]],null,null,null,null,null)),(t()(),i.pb(15,0,null,null,2,"div",[["class","header-left font16"]],null,null,null,null,null)),(t()(),i.pb(16,0,null,null,1,"b",[["class","question-type"]],null,null,null,null,null)),(t()(),i.Hb(17,null,["",""])),(t()(),i.pb(18,0,null,null,4,"div",[["class","header-right"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Xt)),i.ob(20,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Zt)),i.ob(22,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(23,0,[[1,0],["questionContainer",1]],null,35,"div",[["class","question-container"]],null,null,null,null,null)),(t()(),i.pb(24,0,null,null,34,"div",[["class","each-type-question"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,te)),i.ob(26,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ee)),i.ob(28,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ne)),i.ob(30,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ie)),i.ob(32,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,se)),i.ob(34,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,le)),i.ob(36,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ae)),i.ob(38,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,re)),i.ob(40,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,oe)),i.ob(42,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ue)),i.ob(44,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ce)),i.ob(46,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,de)),i.ob(48,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,he)),i.ob(50,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,pe)),i.ob(52,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,_e)),i.ob(54,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,me)),i.ob(56,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ge)),i.ob(58,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component,i=t(e,6,0,!n.question.bookmarked,n.question.bookmarked);t(e,5,0,i),t(e,11,0,n.showHint),t(e,13,0,n.showReport),t(e,20,0,n.showMarks),t(e,22,0,n.showMarks),t(e,26,0,"mcq_single_correct"===n.question.question_type),t(e,28,0,"mcq_multiple_correct"===n.question.question_type),t(e,30,0,"fillup_single_correct"===n.question.question_type),t(e,32,0,"essay_email_writing"===n.question.question_type),t(e,34,0,"descriptive_answer_writing"===n.question.question_type||"descriptive_answer_writing_text"===n.question.question_type),t(e,36,0,"programming"===n.question.question_type),t(e,38,0,"programming_file_based"===n.question.question_type),t(e,40,0,"html_css_js"===n.question.question_type),t(e,42,0,"frontend_technology"===n.question.question_type),t(e,44,0,"video_answer_speaking"===n.question.question_type),t(e,46,0,"classification"===n.question.question_type),t(e,48,0,"block_programming"===n.question.question_type),t(e,50,0,"diagram"===n.question.question_type),t(e,52,0,"file_upload_questions"===n.question.question_type),t(e,54,0,"project_question"===n.question.question_type),t(e,56,0,"cloud_question"===n.question.question_type),t(e,58,0,"question_paper_upload"===n.question.question_type)}),(function(t,e){var n=e.component;t(e,8,0,n.question.quesIndex?n.question.quesIndex+1:1),t(e,17,0,n.question.formatted_type)}))}var ve=n("porA"),fe=n("+8mH"),Se=n("+8ZX"),we=n("XDrs"),ye=n("UoKt"),xe=n("VDPO"),ke=n("nXYR"),De=n("4gvf"),Ce=n("oP9f"),qe=n("uocp"),Ie=n("5U9e"),Pe=n("d12M"),Me=n("gXZA"),Te=n("oXY7"),Ee=n("dRFt"),Oe=n("XJQZ"),Ae=n("75oA"),He=n("cUpR"),ze=n("qnKy"),Re=n("NhFF"),Ne=n("SpBQ"),Be=n("+oAG"),Le=n("EStn"),je=n("twhL"),Fe=n("KC7C"),Je=n("hsFq"),Ue=n("J7Re"),Ke=n("de+v"),Qe=n("LAsC"),We=n("GdIW"),$e=n("tMG9"),Ve=n("mO1N"),Ye=n("A5KX"),Ge=n("smCQ"),Xe=n("an5g"),Ze=n("WyoB"),tn=n("HJej"),en=n("8rXc");class nn{constructor(t){this.testService=t,this.answerAction=new i.m}ngOnChanges(t){for(const e in t)e&&("question"===e&&(this.question=this.testService.testData.current_q,this.checkIfChoiceBasedLimitReached(this.question.secIndex),this.enableCopyPasteHandler(),this.scrollPage()),"doAction"===e&&setTimeout(()=>{this.question.doAction=void 0},100))}buttonFunction(t){this.question.disableAnswering?this.question.attempted=!1:this.answerAction.emit(t)}scrollPage(){this.answerContainer.nativeElement.scrollTop&&(this.answerContainer.nativeElement.scrollTop=0)}enableCopyPasteHandler(){"html_css_js"!==this.question.question_type&&"programming_file_based"!==this.question.question_type&&"programming"!==this.question.question_type?this.testService&&this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.enable_copy_paste&&this.testService.copyPasteHandler():this.testService&&this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.enable_copy_paste&&this.testService.removePasteHandler()}checkIfChoiceBasedLimitReached(t){if(this.testService.testData.frozen_data.frozen_test_data[t]&&this.testService.testData.frozen_data.frozen_test_data[t].choice_based&&!this.question.attempted&&this.testService.testData.frozen_data.frozen_test_data[t].restrictOnMaxQuestions){const e=this.testService.testData.frozen_data.frozen_test_data[t].questions.filter(t=>t.attempted).length;this.question.disableAnswering=e>=this.testService.testData.frozen_data.frozen_test_data[t].max_questions}else this.question.disableAnswering=!1}}var sn=i.nb({encapsulation:0,styles:[[".answer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.answer-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.answer-content[_ngcontent-%COMP%]{display:flex;height:100%;padding:0 0 10px}.each-type-question[_ngcontent-%COMP%]{width:100%}@media screen and (max-width:992px){.answer-content[_ngcontent-%COMP%]{padding:0 0 60px}}.disableAnswerContainer[_ngcontent-%COMP%]{pointer-events:none;opacity:.9;background:var(--fiftysix);z-index:10;display:flex;position:absolute;top:0;left:0;width:100%;height:100%;opacity:.9;background:var(--fiftysix)}.lock-analysis-cont[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:auto;flex-direction:column;background-color:var(--blackgrey);padding:5px;border-radius:3px;color:var(--white);max-width:80%}.relativePosition[_ngcontent-%COMP%]{position:relative;height:unset!important;pointer-events:none}.analysis-restrict[_ngcontent-%COMP%]{display:flex;position:absolute;top:0;left:0;width:100%;height:100%}"]],data:{}});function ln(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"mcqsinglecorrect-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Se.b,Se.a)),i.ob(1,573440,null,0,we.a,[c.a],{question:[0,"question"],id:[1,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function an(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"mcqmultiplecorrect-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),ye.b,ye.a)),i.ob(1,573440,null,0,xe.a,[c.a],{question:[0,"question"],id:[1,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function rn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"fillupsinglecorrect-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),ke.b,ke.a)),i.ob(1,573440,null,0,De.a,[c.a],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function on(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"programming-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Ce.b,Ce.a)),i.ob(1,704512,null,0,qe.a,[i.C,c.a,Ie.a],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function un(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"programmingfilebased-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Pe.b,Pe.a)),i.ob(1,704512,null,0,Me.a,[i.C,c.a,Ie.a],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function cn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"essayemailwriting-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Te.b,Te.a)),i.ob(1,704512,null,0,Ee.a,[Ie.a,c.a],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function dn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"descriptiveanswerwriting-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Oe.b,Oe.a)),i.ob(1,704512,null,0,Ae.a,[i.C,u.a,c.a,He.c],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function hn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"htmlcssjs-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),ze.b,ze.a)),i.ob(1,704512,null,0,Re.a,[i.C,c.a],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function pn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"frontendtechnology-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Ne.b,Ne.a)),i.ob(1,704512,null,0,Be.a,[i.C,c.a],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function _n(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"videoanswerspeaking-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Le.b,Le.a)),i.ob(1,704512,null,0,je.a,[i.C,u.a,c.a],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function mn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"diagram-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Fe.b,Fe.a)),i.ob(1,704512,null,0,Je.a,[c.a,He.c,u.a],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function gn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"blockprogramming-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Ue.b,Ue.a)),i.ob(1,704512,null,0,Ke.a,[c.a,Ie.a],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function bn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"fileuploadquestions-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Qe.b,Qe.a)),i.ob(1,573440,null,0,We.a,[c.a,u.a,He.c],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function vn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"classification-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),$e.b,$e.a)),i.ob(1,9093120,null,0,Ve.a,[c.a],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function fn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"projectquestion-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Ye.b,Ye.a)),i.ob(1,704512,null,0,Ge.a,[c.a,He.c],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function Sn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"questionpaperuploadquestions-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),Xe.b,Xe.a)),i.ob(1,573440,null,0,Ze.a,[c.a,u.a,He.c],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function wn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"cloudquestion-answer",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),tn.b,tn.a)),i.ob(1,770048,null,0,en.a,[c.a,Ie.a],{question:[0,"question"],doAction:[1,"doAction"],id:[2,"id"]},{action:"action"})],(function(t,e){var n=e.component;t(e,1,0,n.question,n.doAction,i.rb(1,"","tt-answer-"+n.question.secIndex+n.question.quesIndex,""))}),null)}function yn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,[" You have reached the maximum answer submissions allowed for this section. If you wish to unlock and submit answer for this question, clear answer submission for some other question of this section. "]))],null,null)}function xn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,[" You have reached the maximum answer submissions allowed for this question. "]))],null,null)}function kn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,[" This answer is locked until all questions are answered within the section. "]))],null,null)}function Dn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,11,"div",[["class","disableAnswerContainer analysis-restrict"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,10,"div",[["class","lock-analysis-cont"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,0,"i",[["class","icon-ios-locked"]],null,null,null,null,null)),(t()(),i.pb(3,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Answer Locked"])),(t()(),i.pb(5,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,yn)),i.ob(7,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,xn)),i.ob(9,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,kn)),i.ob(11,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,7,0,n.question.disableAnswering),t(e,9,0,n.question.program_submitted_count>0&&n.testService.testData.max_edit_allowed<=0&&n.testService.testData.c_modules.answer_edit_restrict&&!n.testService.testData.editAfterSectionComplete),t(e,11,0,n.testService.testData.editAfterSectionComplete)}),null)}function Cn(t){return i.Jb(0,[i.Fb(402653184,1,{answerContainer:0}),(t()(),i.pb(1,0,[[1,0],["answerContainer",1]],null,40,"div",[["class","answer-container"]],null,null,null,null,null)),i.ob(2,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(3,{relativePosition:0}),(t()(),i.pb(4,0,null,null,35,"div",[["class","answer-content"]],null,null,null,null,null)),(t()(),i.pb(5,0,null,null,34,"div",[["class","each-type-question"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,ln)),i.ob(7,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,an)),i.ob(9,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,rn)),i.ob(11,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,on)),i.ob(13,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,un)),i.ob(15,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,cn)),i.ob(17,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,dn)),i.ob(19,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,hn)),i.ob(21,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,pn)),i.ob(23,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,_n)),i.ob(25,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,mn)),i.ob(27,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,gn)),i.ob(29,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,bn)),i.ob(31,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,vn)),i.ob(33,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,fn)),i.ob(35,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Sn)),i.ob(37,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,wn)),i.ob(39,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Dn)),i.ob(41,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component,i=t(e,3,0,n.question.disableAnswering||n.question.program_submitted_count>0&&(n.testService.testData.max_edit_allowed<=0&&n.testService.testData.c_modules.answer_edit_restrict||n.testService.testData.editAfterSectionComplete));t(e,2,0,"answer-container",i),t(e,7,0,"mcq_single_correct"===n.question.question_type),t(e,9,0,"mcq_multiple_correct"===n.question.question_type),t(e,11,0,"fillup_single_correct"===n.question.question_type),t(e,13,0,"programming"===n.question.question_type),t(e,15,0,"programming_file_based"===n.question.question_type),t(e,17,0,"essay_email_writing"===n.question.question_type),t(e,19,0,"descriptive_answer_writing"===n.question.question_type||"descriptive_answer_writing_text"===n.question.question_type),t(e,21,0,"html_css_js"===n.question.question_type),t(e,23,0,"frontend_technology"===n.question.question_type),t(e,25,0,"video_answer_speaking"===n.question.question_type),t(e,27,0,"diagram"===n.question.question_type),t(e,29,0,"block_programming"===n.question.question_type),t(e,31,0,"file_upload_questions"===n.question.question_type),t(e,33,0,"classification"===n.question.question_type),t(e,35,0,"project_question"===n.question.question_type),t(e,37,0,"question_paper_upload"===n.question.question_type),t(e,39,0,"cloud_question"===n.question.question_type),t(e,41,0,n.question.disableAnswering||n.question.program_submitted_count>0&&(n.testService.testData.max_edit_allowed<=0&&n.testService.testData.c_modules.answer_edit_restrict||n.testService.testData.editAfterSectionComplete))}),null)}class qn{constructor(t){this.testService=t,this.footerAction=new i.m,this.backButton={btnName:"Back",disable:"false",border:"1px solid #103ca5",fontColor:"var(--white)",background:"#103ca5",padding:"6px 31px",fontSize:"14px",id:"tt-footer-back"},this.nextButton={btnName:"Next",disable:"false",border:"1px solid #103ca5",fontColor:"var(--white)",background:"#103ca5",padding:"6px 31px",fontSize:"14px",id:"tt-footer-next"},this.submitButton={btnName:"Submit Section",disable:"false",border:"1px solid var(--orange)",background:"var(--orange)",fontColor:"var(--black)",padding:"6px",fontSize:"14px",id:"tt-footer-submit"},this.showBack=!this.testService.testData.c_modules.disable_previous,this.showNext=!0,this.showCalc=!!this.testService.testData.c_modules.enable_calcii,this.showCalc&&this.testService.testData.c_modules&&this.testService.testData.c_modules.calc_type&&(this.calcType=this.testService.testData.c_modules.calc_type)}ngOnChanges(t){for(let e in t)"question"===e&&(this.question=this.testService.testData.current_q,this.checkFirstLastQuestion()),"selectedSection"===e&&this.sectionChangeHandle(),"disableSubmit"===e&&this.disableSubmitHandle()}sectionChangeHandle(){this.submitButton.btnName=this.testService.testData.c_modules.lock_sections&&this.selectedSection<this.testService.testData.frozen_data.frozen_test_data.length-1?"Submit Section":"Submit Test"}disableSubmitHandle(){this.submitButton.disable=this.disableSubmit||this.testService.testData.c_modules.disable_manual_submit?"true":"false"}checkFirstLastQuestion(){this.showNext=this.question.quesIndex!==this.testService.testData.frozen_data.frozen_test_data[this.question.secIndex].questions.length-1||!this.testService.testData.c_modules.lock_sections&&this.question.secIndex!==this.testService.testData.frozen_data.frozen_test_data.length-1,this.showBack=0!==this.question.quesIndex||!this.testService.testData.c_modules.lock_sections&&0!==this.question.secIndex,this.testService.testData.c_modules.disable_previous&&(this.showBack=!1)}buttonFunction(t){switch(t.type){case"Back":if(this.testService.testData.c_modules.disable_previous)return;break;case"Submit Test":case"Submit Section":if(this.testService.testData.c_modules.disable_manual_submit)return;break;case"Next":this.testService.testData.c_modules.answer_mandatory&&this.question&&!this.question.attempted&&(t.growlMsg={time:5e3,severity:"warn",summary:"Attention!",detail:"All questions are compulsory to attend. In order to move to the next question, you have to answer the current question."},t.answer_mandatory=!0)}this.footerAction.emit(t)}showCalculator(){this.showCalc&&this.calcType&&"scientific"===this.calcType?this.footerAction.emit({type:"Scientific Calculator"}):this.showCalc&&this.footerAction.emit({type:"Calculator"})}}var In=i.nb({encapsulation:0,styles:[[".footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:6px;border-top:1px solid var(--fourty);z-index:10;height:60px}.footer-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.calculator[_ngcontent-%COMP%]{cursor:pointer}.calculator[_ngcontent-%COMP%] > .icon-calculator-1[_ngcontent-%COMP%]::before{font-size:22px}.footer-right[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;justify-content:center;width:100%}.back[_ngcontent-%COMP%], .next[_ngcontent-%COMP%]{padding:4px 25px}.submission[_ngcontent-%COMP%]{display:none;padding:4px}@media screen and (max-width:992px){.footer[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;left:0;background-color:var(--white)}.footer-left[_ngcontent-%COMP%]{width:100%;align-items:flex-start}.back[_ngcontent-%COMP%], .next[_ngcontent-%COMP%]{padding:4px 8px}.calculator[_ngcontent-%COMP%]{display:none}.submission[_ngcontent-%COMP%]{display:flex}}"]],data:{}});function Pn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","calculator"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,0,"i",[["class","icon-calculator-1"],["id","tt-footer-calculator"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.showCalculator()&&i),i}),null,null))],null,null)}function Mn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","back"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.backButton,n.backButton.padding,n.backButton.fontSize,n.backButton.id)}),null)}function Tn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","next"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.nextButton,n.nextButton.padding,n.nextButton.fontSize,n.nextButton.id)}),null)}function En(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,11,"div",[["class","footer"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,5,"div",[["class","footer-left"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Pn)),i.ob(3,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(4,0,null,null,2,"div",[["class","submission"]],null,null,null,null,null)),(t()(),i.pb(5,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(6,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"}),(t()(),i.pb(7,0,null,null,4,"div",[["class","footer-right"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Mn)),i.ob(9,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Tn)),i.ob(11,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,3,0,n.showCalc),t(e,6,0,n.submitButton,n.submitButton.padding,n.submitButton.fontSize,n.submitButton.id),t(e,9,0,n.showBack),t(e,11,0,n.showNext)}),null)}class On{constructor(t){this.renderer=t,this.defaultState="close",this.togglePullerDegVal=[0,180],this.togglePullerDegInd=1,this.toggleWidth="0px",this.toggleHeight="0px"}ngAfterViewInit(){switch(this.position){case"top":this.topPosition();break;case"right":this.rightPosition();break;case"bottom":this.bottomPosition();break;case"left":this.leftPosition();break;default:this.leftPosition()}this.width&&this.renderer.setStyle(this.sideMenuContent.nativeElement,"transition","width 0.5s"),this.height&&this.renderer.setStyle(this.sideMenuContent.nativeElement,"transition","height 0.5s"),this.toggleSideMenu(),"open"===this.defaultState&&this.toggleSideMenu()}toggleSideMenu(){this.width&&(this.renderer.setStyle(this.sideMenuContent.nativeElement,"width",this.toggleWidth),this.toggleWidth="0px"===this.toggleWidth?this.width:"0px"),this.height&&(this.renderer.setStyle(this.sideMenuContent.nativeElement,"height",this.toggleHeight),this.toggleHeight="0px"===this.toggleHeight?this.height:"0px"),this.togglePullerDegInd=0===this.togglePullerDegInd?1:0,this.renderer.setStyle(this.sideMenuPullerIcon.nativeElement,"transform",`rotate(${this.togglePullerDegVal[this.togglePullerDegInd]+"deg"})`)}blurHandle(){let t;this.renderer.listen(document,"click",()=>{t||(this.width&&(this.renderer.setStyle(this.sideMenuContent.nativeElement,"width","0px"),this.toggleWidth=this.width),this.height&&(this.renderer.setStyle(this.sideMenuContent.nativeElement,"height","0px"),this.toggleHeight=this.height),this.togglePullerDegInd=0,this.renderer.setStyle(this.sideMenuPullerIcon.nativeElement,"transform",`rotate(${this.togglePullerDegVal[this.togglePullerDegInd]+"deg"})`)),t=!1}),this.renderer.listen(this.sideMenuContainer.nativeElement,"click",()=>{t=!0})}topPosition(){this.renderer.addClass(this.sideMenuContainer.nativeElement,"side-menu-container-top"),this.renderer.addClass(this.sideMenuPuller.nativeElement,"side-menu-puller-top"),this.renderer.setStyle(this.sideMenuPullerIcon.nativeElement,"transform","rotate(270deg)"),this.togglePullerDegVal=[270,90],this.renderer.setStyle(this.sideMenuContent.nativeElement,"order",0)}rightPosition(){this.renderer.addClass(this.sideMenuContainer.nativeElement,"side-menu-container-right"),this.renderer.addClass(this.sideMenuPuller.nativeElement,"side-menu-puller-right"),this.togglePullerDegVal=[0,180]}bottomPosition(){this.renderer.addClass(this.sideMenuContainer.nativeElement,"side-menu-container-bottom"),this.renderer.addClass(this.sideMenuPuller.nativeElement,"side-menu-puller-bottom"),this.renderer.setStyle(this.sideMenuPullerIcon.nativeElement,"transform","rotate(90deg)"),this.togglePullerDegVal=[90,270]}leftPosition(){this.renderer.addClass(this.sideMenuContainer.nativeElement,"side-menu-container-left"),this.renderer.addClass(this.sideMenuPuller.nativeElement,"side-menu-puller-left"),this.renderer.setStyle(this.sideMenuPullerIcon.nativeElement,"transform","rotate(180deg)"),this.togglePullerDegVal=[180,0]}}var An=i.nb({encapsulation:0,styles:[[".side-menu-container[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:10}.side-menu-container-top[_ngcontent-%COMP%]{top:0;right:0;left:0;flex-direction:column}.side-menu-container-right[_ngcontent-%COMP%]{top:0;right:0;bottom:0}.side-menu-container-bottom[_ngcontent-%COMP%]{left:0;right:0;bottom:0;flex-direction:column}.side-menu-container-left[_ngcontent-%COMP%]{top:0;left:0;bottom:0}.side-menu-puller[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;background-color:var(--thirtyfive);cursor:pointer}.side-menu-puller-top[_ngcontent-%COMP%]{order:1;width:26px;height:12px;left:47.5%;bottom:-12px}.side-menu-puller-right[_ngcontent-%COMP%]{width:12px;height:26px;top:47.5%;left:-12px}.side-menu-puller-bottom[_ngcontent-%COMP%]{width:26px;height:12px;left:47.5%;top:-12px}.side-menu-puller-left[_ngcontent-%COMP%]{order:1;width:12px;height:26px;top:47.5%;right:-12px}.side-menu-puller[_ngcontent-%COMP%] > .icon-angle-left[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;transition:all .5s}.side-menu-puller[_ngcontent-%COMP%] > .icon-angle-left[_ngcontent-%COMP%]:before{font-size:10px;color:var(--white)}.side-menu-content[_ngcontent-%COMP%]{box-shadow:0 3px 6px 0 #00000029;background-color:var(--greycardbg);overflow:hidden}"]],data:{}});function Hn(t){return i.Jb(0,[i.Fb(402653184,1,{sideMenuContainer:0}),i.Fb(402653184,2,{sideMenuPuller:0}),i.Fb(402653184,3,{sideMenuPullerIcon:0}),i.Fb(402653184,4,{sideMenuContent:0}),(t()(),i.pb(4,0,[[1,0],["sideMenuContainer",1]],null,4,"div",[["class","side-menu-container"],["id","side-menu-container"]],null,null,null,null,null)),(t()(),i.pb(5,0,[[2,0],["sideMenuPuller",1]],null,1,"div",[["class","side-menu-puller"],["id","side-menu-puller"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.toggleSideMenu()&&i),i}),null,null)),(t()(),i.pb(6,0,[[3,0],["sideMenuPullerIcon",1]],null,0,"i",[["class","icon-angle-left"]],null,null,null,null,null)),(t()(),i.pb(7,0,[[4,0],["sideMenuContent",1]],null,1,"div",[["class","side-menu-content"],["id","side-menu-content"]],null,null,null,null,null)),i.yb(null,0)],null,null)}var zn=n("s7LF"),Rn=n("mrSG"),Nn=n("sjK5");class Bn{constructor(t,e,n){this.chatService=t,this.testService=e,this.renderer=n,this.chatMessageAction=new i.m,this.messageHistory=[],this.serviceSubscribers=[],this.userId="",this.isEngagementAllowed=this.chatService.checkIfEngagementAllowed()}ngOnInit(){return Rn.__awaiter(this,void 0,void 0,(function*(){this.userData=JSON.parse(localStorage.getItem("token")),this.userData&&(this.userId=this.userData.user_id),this.pubNub=yield this.chatService.getPubNub(),this.quillEditorIns||(yield this.richTextEditorSetup()),this.addButtonListener(),this.currentChannelData&&this.handleOpenChannel(),this.addNewMessageListener()}))}ngOnChanges(t){for(const e in t)e&&"currentChannelData"===e&&this.handleOpenChannel()}addButtonListener(){document.getElementById("chatArea").onkeydown=t=>{if(13===t.keyCode&&!t.shiftKey)return this.sendMessage(),!1}}ngOnDestroy(){this.slowModeTimer&&clearInterval(this.slowModeTimer),this.serviceSubscribers.forEach(t=>{t&&t.unsubscribe()}),this.quillEditorIns&&(this.quillEditorIns.off("text-change"),this.quillEditorIns=void 0),this.chatService.newMessage.next(null)}handleOpenChannel(){if(this.quillEditorIns&&(this.quillEditorIns.root.innerHTML=""),this.nextHistoryTimeToken=0,this.historyLoading=!1,this.currentChannelData.isUnreadMsg=!1,this.currentChannelData.unreadMsgCount=0,this.messageHistory=[],this.loading=!0,this.getMessageHistory(),this.currentChannelData.slowMode&&this.currentChannelData.lastSentTimeToken){let t=new Date(this.currentChannelData.lastSentTimeToken/1e4);const e=new Date;let n=Math.abs((e-t)/1e3);(!n||this.currentChannelData.slowMode>n)&&(n=Math.floor(this.currentChannelData.slowMode-n),this.slowModeTimer&&clearInterval(this.slowModeTimer),this.startSlowModeTimer(n))}}sendMessage(){if(this.chatMessage&&this.currentChannelData&&this.checkPermission()&&this.isEngagementAllowed){if(this.currentChannelData.slowMode&&this.isSlowModeRestricted)return void this.showGrowl("error","Slow Mode Enabled","Wait for sometime");this.userData.name=this.userData.name?this.userData.name:this.userData.email;const t={channel:this.currentChannelData.channel_id,message:{sender:this.userData.name.replace("$"," "),user_id:this.userData.user_id,message:this.chatMessage,channel_name:this.currentChannelData.name,profile_pic:this.userData.profile_pic}};this.pubNub.publish(t,(t,e)=>{this.quillEditorIns&&(this.quillEditorIns.root.innerHTML=""),this.chatMessage="",this.currentChannelData.slowMode&&this.startSlowModeTimer(this.currentChannelData.slowMode)})}else this.isEngagementAllowed?this.checkPermission()||this.showGrowl("error","Not Allowed","Only Admins Can Post Messages!"):this.showGrowl("error","Engagement Not subscribed","Failed!")}getMessageHistory(t){if(this.pubNub&&this.isEngagementAllowed){const e={channel:this.currentChannelData.channel_id,reverse:!1,count:30};t&&(this.historyLoading=!0,e.start=t),this.pubNub.history(e).then(e=>Rn.__awaiter(this,void 0,void 0,(function*(){if(this.historyLoading=!1,this.loading=!1,t&&e&&t===e.startTimeToken)this.nextHistoryTimeToken=0;else if(e&&e.messages&&e.messages){this.nextHistoryTimeToken=e.startTimeToken;const n=[];for(let t of e.messages){if(this.messageHistory.findIndex(e=>Number(e.timeToken)===Number(t.timetoken))>-1)continue;let e={};const i=this.formatMessageTime(t.timetoken);e=t.entry.file?{name:t.entry.message?t.entry.message.sender:"",user_id:t.entry.message?t.entry.message.user_id:"",fileName:t.entry.file.name,fileId:t.entry.file.id,url:this.pubNub.getFileUrl({channel:this.currentChannelData.channel_id,id:t.entry.file.id,name:t.entry.file.name}),channel_name:t.entry.message?t.entry.message.channel_name:"",profile_pic:t.entry.message?t.entry.message.profile_pic:null,timeToken:t.timetoken,msgDate:i&&i.date?i.date:"",msgTime:i&&i.time?i.time:""}:{name:t.entry.sender,user_id:t.entry.user_id,message:t.entry.message,channel_name:t.entry.channel_name,profile_pic:t.entry.profile_pic,timeToken:t.timetoken,msgDate:i&&i.date?i.date:"",msgTime:i&&i.time?i.time:""},n.push(e)}this.messageHistory=[...n,...this.messageHistory],t||(this.scrollToLatestMessage(),this.setLastMessageReadStatus(e.endTimeToken,this.currentChannelData.lastSentTimeToken))}})))}else this.loading=!1,this.isEngagementAllowed||this.showGrowl("error","Engagement Not subscribed","Failed!")}formatMessageTime(t){let e=new Date(t/1e4);const n=new Date;let i,s;return i=e.getMonth()==n.getMonth()&&e.getFullYear()==n.getFullYear()?e.getDate()===n.getDate()?"Today":e.getDate()===n.getDate()-1?"Yesterday":e.toLocaleDateString():e.toLocaleDateString(),s=e.toLocaleString("en",{timeStyle:"short"}),{date:i,time:s}}scrollToLatestMessage(){setTimeout(()=>{this.isNewMsgArrived=!1,this.msgContainer&&(this.msgContainer.nativeElement.scrollTop=this.msgContainer.nativeElement.scrollHeight)},100)}setLastMessageReadStatus(t,e){this.currentChannelData&&this.pubNub&&("string"!=typeof t&&(t=JSON.stringify(t)),this.pubNub.objects.setMemberships({channels:[{id:this.currentChannelData.channel_id,custom:{lastReadTimetoken:t,lastSentTimeToken:e}}]}).then(t=>{}))}downloadFile(t){return Rn.__awaiter(this,void 0,void 0,(function*(){if(this.pubNub&&this.isEngagementAllowed){const e=yield this.pubNub.downloadFile({channel:this.currentChannelData.channel_id,id:t.fileId?t.fileId:t.id,name:t.fileName?t.fileName:t.name}),n=document.createElement("a");n.href=URL.createObjectURL(yield e.toFile()),n.download=t.fileName,n.click()}else this.isEngagementAllowed||this.showGrowl("error","Engagement Not subscribed","Failed!")}))}startSlowModeTimer(t){this.slowModeInterval=t,this.isSlowModeRestricted=!0,this.slowModeTimer=setInterval(()=>{!this.slowModeInterval||this.slowModeInterval<=0?(this.isSlowModeRestricted=!1,clearTimeout(this.slowModeTimer)):this.slowModeInterval&&(this.slowModeInterval=this.slowModeInterval-1)},1e3)}addNewMessageListener(){const t=this.chatService.newMessage.subscribe(t=>{t&&"message"===t.action?this.handleNewMessageAction(t.event):t&&"file"===t.action&&this.handleFileMessage(t.event)});this.serviceSubscribers.push(t)}handleNewMessageAction(t){const e=this.formatMessageTime(t.timetoken);this.messageHistory.push({name:t.message.sender,user_id:t.message.user_id,message:t.message.message,channel_name:t.message.channel_name,profile_pic:t.message.profile_pic,timeToken:t.timetoken,msgDate:e&&e.date?e.date:"",msgTime:e&&e.time?e.time:""}),t.message.user_id===this.userData.user_id?(this.currentChannelData.lastSentTimeToken=t.timetoken,this.scrollToLatestMessage(),this.setLastMessageReadStatus(t.timetoken,this.currentChannelData.lastSentTimeToken)):this.msgContainer&&this.msgContainer.nativeElement.scrollTop<this.msgContainer.nativeElement.scrollHeight-100&&(this.isNewMsgArrived=!0),t.message.user_id!==this.userData.user_id&&this.msgContainer&&this.msgContainer.nativeElement.scrollTop>this.msgContainer.nativeElement.scrollHeight-100&&this.setLastMessageReadStatus(t.timetoken,this.currentChannelData.lastSentTimeToken)}handleFileMessage(t){if(this.userData.user_id!==t.message.user_id){const e=this.formatMessageTime(t.timetoken);this.messageHistory.push({name:t.message.sender,user_id:t.message.user_id,fileName:t.file.name,fileId:t.file.id,url:t.file.url,channel_name:t.message.channel_name,profile_pic:t.message.profile_pic,timeToken:t.timetoken,msgDate:e&&e.date?e.date:"",msgTime:e&&e.time?e.time:""})}else this.currentChannelData.lastSentTimeToken=t.timetoken;this.setLastMessageReadStatus(t.timetoken,this.currentChannelData.lastSentTimeToken)}sendMediaMessage(t){return Rn.__awaiter(this,void 0,void 0,(function*(){if(t&&t.target&&t.target.files&&t.target.files.length){if(this.currentChannelData.slowMode&&this.isSlowModeRestricted)return void this.showGrowl("error","Slow Mode Enabled","Wait for sometime");this.userData.name=this.userData.name?this.userData.name:this.userData.email;const e={name:this.userData.name.replace("$"," "),user_id:this.userData.user_id,fileName:"Uploading",fileId:"ID",channel_name:this.currentChannelData.name,profile_pic:this.userData.profile_pic,loading:!0,msgDate:"",msgTime:""};if(Number((t.target.files[0].size/1024).toFixed(2))>=5e3)return void this.showGrowl("error","File size exceeding 5Mb","");this.messageHistory.push(e),yield this.pubNub.sendFile({channel:this.currentChannelData.channel_id,file:t.target.files[0],message:{sender:this.userData.name.replace("$"," "),user_id:this.userData.user_id,message:this.chatMessage,channel_name:this.currentChannelData.name,profile_pic:this.userData.profile_pic}}).then(t=>{const n=this.formatMessageTime(t.timetoken);e.fileName=t.name,e.fileId=t.id,e.url=this.pubNub.getFileUrl({channel:this.currentChannelData.channel_id,id:t.id,name:t.name}),e.msgDate=n&&n.date?n.date:"",e.msgTime=n&&n.time?n.time:"",e.loading=!1})}}))}onScroll(t){t.target.scrollTop<1?this.nextHistoryTimeToken&&this.getMessageHistory(this.nextHistoryTimeToken):this.isNewMsgArrived&&t.target.scrollTop>=t.target.scrollHeight-500&&(this.isNewMsgArrived=!1)}showGrowl(t,e,n){this.chatMessageAction.emit({type:"showGrowlMsg",data:{time:3e3,severity:t,summary:e,detail:n}})}checkPermission(){return!(!this.currentChannelData||this.currentChannelData.restrictMessaging&&"all"!==this.currentChannelData.restrictMessaging)}richTextEditorSetup(){return Rn.__awaiter(this,void 0,void 0,(function*(){if(this.richTextEditor&&this.richTextEditor.nativeElement){const t=yield this.testService.getQuill();this.quillEditorIns=new t(this.richTextEditor.nativeElement,{modules:{toolbar:!0},placeholder:"Enter your message here",theme:"snow"}),this.quillEditorIns.on("text-change",t=>{this.chatMessage=this.quillEditorIns.root.innerHTML})}}))}}var Ln=i.nb({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:var(--greycardbg)}.old-messages[_ngcontent-%COMP%]{display:flex;overflow:auto;flex-direction:column;height:100%}.msg-group-cont[_ngcontent-%COMP%]{padding:6px}.divider[_ngcontent-%COMP%]{z-index:1;height:0;border-top:thin solid #06060714;display:flex;align-items:center;justify-content:center;flex:0 0 auto;box-sizing:border-box;position:relative;left:auto;right:auto;margin:1.5rem .875rem 1.5rem 1rem}.marginTop[_ngcontent-%COMP%]{margin-top:-15px}.timeline[_ngcontent-%COMP%]{display:block;flex:0 0 auto;padding:2px 4px;color:#747f8d;background:var(--greycardbg);line-height:13px;margin-top:-1px;font-weight:600;border-radius:8px}.msg-container[_ngcontent-%COMP%]{display:flex;margin-bottom:20px;justify-content:flex-start}.msgImgDiv[_ngcontent-%COMP%]{display:flex;width:50px;padding:6px;justify-content:center}.messageImageIcon[_ngcontent-%COMP%]{display:flex;height:35px;width:35px;border-radius:50px;border:1px solid var(--fiftyNine);box-shadow:1px 1px 10px var(--fifty)}.msg-div[_ngcontent-%COMP%]{width:100%;padding:6px;border:1px solid var(--greycardborder);border-radius:5px;background-color:var(--three);overflow:hidden;box-shadow:1px 1px 10px var(--five)}.msg-div-me[_ngcontent-%COMP%]{background-color:var(--fiftythree)}.senderName[_ngcontent-%COMP%]{font-weight:500;padding-right:10px;line-height:1.375rem;color:var(--seven)}.msgTime[_ngcontent-%COMP%]{color:var(--fourteen)}.fileMsg[_ngcontent-%COMP%]{background-color:#f2f3f5;box-sizing:border-box;border-radius:3px;letter-spacing:0;max-width:520px;width:100%;padding:10px;border:1px solid transparent;justify-content:space-between;display:flex;align-items:center;min-height:55px}.newMsgBtn[_ngcontent-%COMP%]{position:absolute;right:0;top:-31px;background-color:var(--btnBlue);border:1px solid var(--greycardborder);border-right:none;border-bottom:none;border-radius:3px 0 0;box-shadow:1px -3px 10px var(--fiftysix);padding:6px 10px;color:var(--three);cursor:pointer}.mesg-box[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;height:3.6em;justify-content:center;border-top:1px solid var(--greycardborder)}.flexDisplay[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:4px}.answer-container[_ngcontent-%COMP%]{display:flex;width:90%;padding:4px}.simple-editor[_ngcontent-%COMP%]{display:flex;width:100%;resize:none;font-family:Roboto;min-height:1.6em;overflow:auto;max-height:6em;padding:4px;background-color:var(--three);border:1px solid var(--greycardborder);border-radius:3px}.attachment[_ngcontent-%COMP%], .send-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:1em;width:5%;padding:4px;cursor:pointer}.send-btn[_ngcontent-%COMP%] > .icon-send[_ngcontent-%COMP%]::before{transform:rotate(46deg);margin-left:-6px}.input[_ngcontent-%COMP%]{background-color:var(--three);border:1px solid var(--seventeen);border-radius:6px;width:100%;height:100%;display:flex;padding-left:35px}.file-title[_ngcontent-%COMP%]{color:var(--btnBlue);padding-left:15px}.pad-top[_ngcontent-%COMP%]{padding-top:2px}.message-title[_ngcontent-%COMP%]{color:var(--fiftyfour);font-weight:200;line-height:1.375rem;white-space:break-spaces;word-wrap:break-word}.slow-mode-div[_ngcontent-%COMP%]{color:#7d798e;padding-left:45px}.restrict-messaging[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.rich-text-editor[_ngcontent-%COMP%]{flex-direction:column;width:100%;min-height:40px;max-height:40px;border:1px solid var(--greycardborder)}.width5[_ngcontent-%COMP%]{width:5%}.empty-msg-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-self:center;align-items:center;width:100%;height:100%;justify-content:center}@media screen and (min-device-width:0px) and (max-device-width:480px){.attachment[_ngcontent-%COMP%]{width:10%}.answer-container[_ngcontent-%COMP%]{width:80%}.send-btn[_ngcontent-%COMP%]{width:10%}}"]],data:{}});function jn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","divider"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"span",[["class","timeline font12"]],null,null,null,null,null)),(t()(),i.Hb(2,null,["",""]))],null,(function(t,e){t(e,2,0,e.component.historyLoading?"Loading...":e.parent.context.$implicit.msgDate)}))}function Fn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,0,"img",[["alt",""],["class","messageImageIcon"],["onerror","if (this.src != 'https://dev-users-asset.s3.amazonaws.com/images/profile-default.jpg') this.src = 'https://dev-users-asset.s3.amazonaws.com/images/profile-default.jpg';"]],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,0,0,i.rb(1,"",e.parent.context.$implicit.profile_pic,""))}))}function Jn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"span",[["class","msgTime font12"]],null,null,null,null,null)),(t()(),i.Hb(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.parent.parent.context.$implicit.msgDate+" "+e.parent.parent.context.$implicit.msgTime)}))}function Un(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"span",[["class","senderName font14"]],null,null,null,null,null)),(t()(),i.Hb(2,null,["",""])),(t()(),i.gb(16777216,null,null,1,null,Jn)),i.ob(4,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,4,0,e.parent.context.$implicit.msgDate||e.parent.context.$implicit.msgTime)}),(function(t,e){t(e,2,0,e.parent.context.$implicit.name)}))}function Kn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"app-loader",[["type","type3"]],null,null,null,ot.b,ot.a)),i.ob(1,114688,null,0,ut.a,[],{type:[0,"type"]},null)],(function(t,e){t(e,1,0,"type3")}),null)}function Qn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,9,"div",[["class","fileMsg font22"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,3,"span",[],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.downloadFile(t.parent.context.$implicit)&&i),i}),null,null)),(t()(),i.pb(2,0,null,null,0,"i",[["class","icon-download"]],null,null,null,null,null)),(t()(),i.pb(3,0,null,null,1,"span",[["class","file-title font18"]],null,null,null,null,null)),(t()(),i.Hb(4,null,["",""])),(t()(),i.pb(5,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.pb(6,0,null,null,0,"i",[["class","pad-top"]],null,null,null,null,null)),(t()(),i.pb(7,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Kn)),i.ob(9,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,9,0,e.parent.context.$implicit.loading)}),(function(t,e){t(e,4,0,e.parent.context.$implicit.fileName)}))}function Wn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,0,"div",[["class","message-title font16"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.parent.context.$implicit.message)}))}function $n(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,17,"div",[["class","msg-group-cont"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,jn)),i.ob(2,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(3,0,null,null,14,"div",[["class","msg-container"]],null,null,null,null,null)),i.ob(4,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(5,{marginTop:0}),(t()(),i.pb(6,0,null,null,2,"div",[["class","msgImgDiv"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Fn)),i.ob(8,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(9,0,null,null,8,"div",[["class","msg-div"]],null,null,null,null,null)),i.ob(10,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(11,{"msg-div-me":0}),(t()(),i.gb(16777216,null,null,1,null,Un)),i.ob(13,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Qn)),i.ob(15,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Wn)),i.ob(17,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,0===e.context.index||n.historyLoading||e.context.index&&e.context.$implicit&&e.context.$implicit.msgDate!==n.messageHistory[e.context.index-1].msgDate);var i=t(e,5,0,e.context.index&&e.context.$implicit.user_id===n.messageHistory[e.context.index-1].user_id);t(e,4,0,"msg-container",i),t(e,8,0,0===e.context.index||e.context.index&&e.context.$implicit&&(e.context.$implicit.msgDate!==n.messageHistory[e.context.index-1].msgDate||e.context.$implicit.msgTime!==n.messageHistory[e.context.index-1].msgTime||e.context.$implicit.user_id!==n.messageHistory[e.context.index-1].user_id));var s=t(e,11,0,e.context.$implicit.user_id===n.userId);t(e,10,0,"msg-div",s),t(e,13,0,0===e.context.index||e.context.index&&e.context.$implicit&&(e.context.$implicit.msgDate!==n.messageHistory[e.context.index-1].msgDate||e.context.$implicit.msgTime!==n.messageHistory[e.context.index-1].msgTime||e.context.$implicit.user_id!==n.messageHistory[e.context.index-1].user_id)),t(e,15,0,e.context.$implicit.fileId),t(e,17,0,!e.context.$implicit.fileId)}),null)}function Vn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,4,"div",[["class","empty-msg-container"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,["You're starting a new conversation"])),(t()(),i.pb(3,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Type your first message below."]))],null,null)}function Yn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"app-loader",[["type","type1"]],null,null,null,ot.b,ot.a)),i.ob(1,114688,null,0,ut.a,[],{type:[0,"type"]},null)],(function(t,e){t(e,1,0,"type1")}),null)}function Gn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,4,"div",[["class","slow-mode-div font12"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,0,"span",[["class","width5"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,0,"i",[["class","icon icon-clock-outline"]],null,null,null,null,null)),(t()(),i.Hb(3,null,[""," "])),i.Db(4,1)],null,(function(t,e){var n=e.component,s=i.Ib(e,3,0,t(e,4,0,i.zb(e.parent,0),n.slowModeInterval));t(e,3,0,s)}))}function Xn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","newMsgBtn font13"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.scrollToLatestMessage()&&i),i}),null,null)),(t()(),i.Hb(-1,null,["New Message"]))],null,null)}function Zn(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,0,"i",[["class","icon-plus"]],null,[[null,"click"]],(function(t,e,n){var s=!0;return"click"===e&&(s=!1!==i.zb(t.parent,4).click()&&s),s}),null,null))],null,null)}function ti(t){return i.Jb(0,[(t()(),i.pb(0,0,[[3,0],["richTextEditor",1]],null,0,"div",[["class","rich-text-editor"]],null,null,null,null,null))],null,null)}function ei(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,5,"textarea",[["class","simple-editor font16"],["data-gramm","false"],["data-gramm_editor","false"],["placeholder","Enter your message here"],["rows","1"],["spellcheck","false"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var s=!0,l=t.component;return"input"===e&&(s=!1!==i.zb(t,1)._handleInput(n.target.value)&&s),"blur"===e&&(s=!1!==i.zb(t,1).onTouched()&&s),"compositionstart"===e&&(s=!1!==i.zb(t,1)._compositionStart()&&s),"compositionend"===e&&(s=!1!==i.zb(t,1)._compositionEnd(n.target.value)&&s),"ngModelChange"===e&&(s=!1!==(l.chatMessage=n)&&s),s}),null,null)),i.ob(1,16384,null,0,zn.d,[i.C,i.k,[2,zn.a]],null,null),i.Eb(1024,null,zn.o,(function(t){return[t]}),[zn.d]),i.ob(3,671744,null,0,zn.s,[[8,null],[8,null],[8,null],[6,zn.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Eb(2048,null,zn.p,null,[zn.s]),i.ob(5,16384,null,0,zn.q,[[4,zn.p]],null,null)],(function(t,e){t(e,3,0,e.component.chatMessage)}),(function(t,e){t(e,0,0,i.zb(e,5).ngClassUntouched,i.zb(e,5).ngClassTouched,i.zb(e,5).ngClassPristine,i.zb(e,5).ngClassDirty,i.zb(e,5).ngClassValid,i.zb(e,5).ngClassInvalid,i.zb(e,5).ngClassPending)}))}function ni(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,11,"div",[["class","flexDisplay"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,3,"div",[["class","attachment font22"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Zn)),i.ob(3,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(4,0,[["manualInput",1]],null,0,"input",[["class","hide_button"],["id","uploadFile"],["type","file"]],null,[[null,"change"]],(function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.sendMediaMessage(n)&&i),i}),null,null)),(t()(),i.pb(5,0,null,null,4,"div",[["class","answer-container"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,ti)),i.ob(7,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ei)),i.ob(9,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(10,0,null,null,1,"div",[["class","send-btn font22"]],null,null,null,null,null)),(t()(),i.pb(11,0,null,null,0,"i",[["class","icon-send"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.sendMessage()&&i),i}),null,null))],(function(t,e){var n=e.component;t(e,3,0,n.currentChannelData&&!n.currentChannelData.hideAttachment),t(e,7,0,n.currentChannelData&&!n.currentChannelData.disableRichEditor),t(e,9,0,n.currentChannelData&&n.currentChannelData.disableRichEditor)}),null)}function ii(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","restrict-messaging font16"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Only Admins Can Post Message"]))],null,null)}function si(t){return i.Jb(0,[i.Bb(0,Z.a,[]),i.Fb(402653184,1,{msgContainer:0}),i.Fb(402653184,2,{richTextToolBar:0}),i.Fb(671088640,3,{richTextEditor:0}),(t()(),i.pb(4,0,null,null,15,"div",[["class","container"]],null,null,null,null,null)),(t()(),i.pb(5,0,[[1,0],["msgContainer",1]],null,6,"div",[["class","old-messages"]],null,[[null,"scroll"]],(function(t,e,n){var i=!0;return"scroll"===e&&(i=!1!==t.component.onScroll(n)&&i),i}),null,null)),(t()(),i.gb(16777216,null,null,1,null,$n)),i.ob(7,278528,null,0,f.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null),(t()(),i.gb(16777216,null,null,1,null,Vn)),i.ob(9,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Yn)),i.ob(11,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Gn)),i.ob(13,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(14,0,null,null,5,"div",[["class","mesg-box"],["id","chatArea"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Xn)),i.ob(16,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ni)),i.ob(18,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),i.gb(0,[["elseTemplate",2]],null,0,null,ii))],(function(t,e){var n=e.component;t(e,7,0,n.messageHistory),t(e,9,0,!n.messageHistory||!n.messageHistory.length),t(e,11,0,n.loading),t(e,13,0,n.currentChannelData&&n.currentChannelData.slowMode&&n.isSlowModeRestricted),t(e,16,0,n.isNewMsgArrived),t(e,18,0,n.checkPermission(),i.zb(e,19))}),null)}class li{constructor(t,e){this.testService=t,this.chatService=e,this.enableChat=!1,this.showWindow=!1,this.channelData={channel_id:"",name:"",description:"",channel_grp_id:"",slowMode:void 0,slowModeSetTime:void 0,unreadMsgCount:0,isUnreadMsg:!1,restrictMessaging:void 0,disableRichEditor:!0,hideAttachment:!0},this.subRefs=[]}ngOnInit(){this.chatInitialize()}ngOnDestroy(){this.subRefs&&this.subRefs.length&&this.subRefs.forEach(t=>{t&&t.unsubscribe()}),this.destroyHandle()}destroyHandle(){this.channelData&&this.channelData.channel_id&&this.chatService.removePubnubSub(this.channelData.channel_id)}chatInitialize(){this.testService.userData&&this.testService.testData&&this.testService.testData.ct_id&&this.testService.testData.manual_proctoring&&(this.chatService.setUserData(),this.channelData.channel_id=`${this.testService.testData.ct_id}$${this.testService.testData.manual_proctoring.proctor_id}.${this.testService.userData.user_id}`,this.channelData.name="Support",this.channelData.restrictMessaging="",this.chatService.currentChannel=this.channelData,this.channelMetaListener(),this.messageListener(),this.chatService.getPubNub().then(()=>{this.chatService.addPubnubSub(this.channelData.channel_id),this.getUnreadMessageCount()}))}toggleChat(){this.showWindow=!this.showWindow,this.showWindow||this.handleMessageRead()}messageListener(){const t=this.chatService.newMessage.subscribe(t=>{if(t)switch(t.action){case"message":case"file":this.handleNewMessage()}});this.subRefs.push(t)}channelMetaListener(){const t=this.chatService.chatLeftPanelEvents.subscribe(t=>{if(t)switch(t.action){case"message":break;case"channel":this.handleChannelDataUpdate(t.event)}});this.subRefs.push(t)}handleChannelDataUpdate(t){t&&t.message&&"set"===t.message.event&&"channel"===t.message.type&&t.message.data&&this.channelData.channel_id===t.channel&&(t.message.data.name&&(this.channelData.name=t.message.data.name),t.message.data.custom&&(this.channelData.restrictMessaging=t.message.data.custom.restrictMessaging))}chatActionsHandle(t){switch(t.type){case"showGrowlMsg":break;case"new-message":this.handleNewMessage();break;case"message-read":this.handleMessageRead()}}handleNewMessage(){this.showWindow||(this.channelData.unreadMsgCount||(this.channelData.unreadMsgCount=0),this.channelData.unreadMsgCount+=1,this.toggleChat())}handleMessageRead(){this.channelData.unreadMsgCount=0}getUnreadMessageCount(){this.testService.testData&&this.testService.testData.manual_proctoring&&this.chatService.getPubNub().then(()=>{this.enableChat=!0,this.chatService.getMemberShips(`channel.id LIKE ${this.testService.testData.ct_id}$${this.testService.testData.manual_proctoring.proctor_id}*`).then(t=>{if(t.data&&t.data.length){const e=`${this.testService.testData.ct_id}$${this.testService.testData.manual_proctoring.proctor_id}.`+this.testService.userData.user_id,n=t.data.find(t=>t.channel&&t.channel.id===e);n&&(n.channel&&n.channel.custom&&(this.channelData.restrictMessaging=n.channel.custom.restrictMessaging),n.custom&&n.custom.lastReadTimetoken&&this.chatService.getUnreadMessageCount({channels:[e],channelTimetokens:[""+1e4*(Number(n.custom.lastReadTimetoken)/1e4+1)]}).then(t=>{t.channels&&(this.channelData.unreadMsgCount=t.channels[e])}).catch(t=>{}))}}).catch(t=>{})})}}var ai=i.nb({encapsulation:0,styles:[[".ui-flex[_ngcontent-%COMP%]{display:flex}.large-pad[_ngcontent-%COMP%]{padding:10px}.medium-pad[_ngcontent-%COMP%]{padding:4px}.small-pad[_ngcontent-%COMP%]{padding:2px}.chat-cont[_ngcontent-%COMP%]{position:fixed;bottom:1.2em;right:1.2em;z-index:10;transition:all .5s}.chat-btn-cont[_ngcontent-%COMP%]{position:relative;width:32px;height:32px;align-items:center;justify-content:center;background-color:var(--thirtyone);border-radius:50px;padding:10px;box-shadow:1px 1px 10px var(--fourtyone);cursor:pointer}.chat-btn-cont[_ngcontent-%COMP%]:hover{box-shadow:1px 1px 20px var(--fourtyone)}.toggle-icon[_ngcontent-%COMP%]{transition:all .5s}.toggle-icon.icon-disscussion[_ngcontent-%COMP%]{font-size:22px;color:var(--blackgrey)}.toggle-icon.icon-close-1[_ngcontent-%COMP%]{font-size:16px;color:var(--blackgrey)}.noti-badge-cont[_ngcontent-%COMP%]{position:absolute;justify-content:center;align-items:center;top:-6px;right:-6px;border-radius:50px;background-color:var(--progressRed);color:var(--three);height:12px;width:12px}.chat-overlay-cont[_ngcontent-%COMP%]{position:absolute;bottom:3.5em;right:0;box-shadow:1px 1px 10px var(--fourtyone);border-radius:5px}.chat-overlay-hide[_ngcontent-%COMP%]{display:none}.close-cont[_ngcontent-%COMP%]{position:absolute;right:-14px;top:-14px;height:18px;width:18px;justify-content:center;align-items:center;border-radius:50px;border:1px solid var(--fourtyeight);background-color:var(--fiftyfour);font-size:10px;color:var(--white);cursor:pointer}.chat-overlay[_ngcontent-%COMP%]{flex-direction:column;width:21em;height:28em;background-color:var(--three);border-radius:5px;overflow:hidden}.chat-header-cont[_ngcontent-%COMP%]{align-items:center;height:10%;background-color:var(--eight);color:var(--three);border-radius:3px 3px 0 0;border-bottom:1px solid var(--fiftysix);padding:6px}.chat-message-cont[_ngcontent-%COMP%]{height:90%}@media screen and (max-width:992px){.chat-overlay-cont[_ngcontent-%COMP%]{position:fixed;bottom:5em;right:0;left:0;top:3em}.chat-overlay[_ngcontent-%COMP%]{width:auto;height:100%}.close-cont[_ngcontent-%COMP%]{right:4px}}"]],data:{}});function ri(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","ui-flex medium-pad noti-badge-cont font13"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),i.Hb(2,null,["",""]))],null,(function(t,e){t(e,2,0,e.component.channelData.unreadMsgCount)}))}function oi(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","chat-message-cont"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-chat-message",[],null,[[null,"currentChannelDataChange"],[null,"chatMessageAction"]],(function(t,e,n){var i=!0,s=t.component;return"currentChannelDataChange"===e&&(i=!1!==(s.channelData=n)&&i),"chatMessageAction"===e&&(i=!1!==s.chatActionsHandle(n)&&i),i}),si,Ln)),i.ob(2,770048,null,0,Bn,[Nn.a,c.a,i.C],{currentChannelData:[0,"currentChannelData"]},{chatMessageAction:"chatMessageAction"})],(function(t,e){t(e,2,0,e.component.channelData)}),null)}function ui(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,17,"div",[["class","chat-cont"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,5,"div",[["class","ui-flex chat-btn-cont"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.toggleChat()&&i),i}),null,null)),(t()(),i.pb(2,0,null,null,2,"i",[["class","toggle-icon"]],[[8,"title",0]],null,null,null,null)),i.ob(3,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(4,{"icon-disscussion":0,"icon-close-1":1}),(t()(),i.gb(16777216,null,null,1,null,ri)),i.ob(6,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(7,0,null,null,10,"div",[["class","chat-overlay-cont"]],null,null,null,null,null)),i.ob(8,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(9,{"chat-overlay-hide":0}),(t()(),i.pb(10,0,null,null,1,"div",[["class","ui-flex medium-pad close-cont"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.toggleChat()&&i),i}),null,null)),(t()(),i.pb(11,0,null,null,0,"i",[["class","ui-flex icon-close-1"]],null,null,null,null,null)),(t()(),i.pb(12,0,null,null,5,"div",[["class","ui-flex chat-overlay"]],null,null,null,null,null)),(t()(),i.pb(13,0,null,null,2,"div",[["class","ui-flex chat-header-cont"]],null,null,null,null,null)),(t()(),i.pb(14,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Support"])),(t()(),i.gb(16777216,null,null,1,null,oi)),i.ob(17,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component,i=t(e,4,0,!n.showWindow,n.showWindow);t(e,3,0,"toggle-icon",i),t(e,6,0,n.channelData.unreadMsgCount);var s=t(e,9,0,!n.showWindow);t(e,8,0,"chat-overlay-cont",s),t(e,17,0,n.showWindow)}),(function(t,e){t(e,2,0,i.rb(1,"",e.component.showWindow?"Close":"Support",""))}))}function ci(t){return i.Jb(0,[(t()(),i.gb(16777216,null,null,1,null,ui)),i.ob(1,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,1,0,e.component.enableChat)}),null)}var di=n("Hb7S"),hi=n("wu0a"),pi=n("/uPD"),_i=i.nb({encapsulation:0,styles:[[".calculator[_ngcontent-%COMP%]{border:1px solid var(--greycardborder)}.display[_ngcontent-%COMP%]{height:46px;overflow:auto;background-color:var(--greycardbg);display:flex;justify-content:flex-end;align-items:center}.expression[_ngcontent-%COMP%]{font-family:examly-digital}.input-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.input-keys[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20%;height:40px;border:1px solid var(--greycardborder);border-radius:3px;cursor:pointer}.input-clear[_ngcontent-%COMP%]{background-color:var(--warnred);color:var(--white)}.input-equal[_ngcontent-%COMP%]{background-color:var(--eight);color:var(--white)}"]],data:{}});function mi(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,61,"div",[["class","calculator"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,2,"div",[["class","display"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,1,"div",[["class","expression font26"]],null,null,null,null,null)),(t()(),i.Hb(3,null,[" "," "])),(t()(),i.pb(4,0,null,null,13,"div",[["class","input-row row-1"]],null,null,null,null,null)),(t()(),i.pb(5,0,null,null,1,"div",[["class","input-keys input-clear"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("AC")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["AC"])),(t()(),i.pb(7,0,null,null,1,"div",[["class","input-keys input-clear"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("DEL")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["DEL"])),(t()(),i.pb(9,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("(")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["("])),(t()(),i.pb(11,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput(")")&&i),i}),null,null)),(t()(),i.Hb(-1,null,[")"])),(t()(),i.pb(13,0,null,null,4,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("pow")&&i),i}),null,null)),(t()(),i.pb(14,0,null,null,3,"p",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,["x"])),(t()(),i.pb(16,0,null,null,1,"sup",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,["2"])),(t()(),i.pb(18,0,null,null,10,"div",[["class","input-row row-2"]],null,null,null,null,null)),(t()(),i.pb(19,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("7")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["7"])),(t()(),i.pb(21,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("8")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["8"])),(t()(),i.pb(23,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("9")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["9"])),(t()(),i.pb(25,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("/")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["/"])),(t()(),i.pb(27,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("sqrt")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["\u221a"])),(t()(),i.pb(29,0,null,null,10,"div",[["class","input-row row-3"]],null,null,null,null,null)),(t()(),i.pb(30,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("4")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["4"])),(t()(),i.pb(32,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("5")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["5"])),(t()(),i.pb(34,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("6")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["6"])),(t()(),i.pb(36,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("*")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["*"])),(t()(),i.pb(38,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("1/")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["1/x"])),(t()(),i.pb(40,0,null,null,10,"div",[["class","input-row row-4"]],null,null,null,null,null)),(t()(),i.pb(41,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("1")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["1"])),(t()(),i.pb(43,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("2")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["2"])),(t()(),i.pb(45,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("3")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["3"])),(t()(),i.pb(47,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("-")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["-"])),(t()(),i.pb(49,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("%")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["%"])),(t()(),i.pb(51,0,null,null,10,"div",[["class","input-row row-5"]],null,null,null,null,null)),(t()(),i.pb(52,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("0")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["0"])),(t()(),i.pb(54,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput(".")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["."])),(t()(),i.pb(56,0,null,null,1,"div",[["class","input-keys input-equal"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("=")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["="])),(t()(),i.pb(58,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("+")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["+"])),(t()(),i.pb(60,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getInput("!")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["x!"]))],null,(function(t,e){t(e,3,0,e.component.expression)}))}var gi=n("jwN2"),bi=i.nb({encapsulation:0,styles:[[".calculator[_ngcontent-%COMP%]{border:1px solid var(--greycardborder)}.display[_ngcontent-%COMP%]{height:46px;overflow:auto;background-color:var(--greycardbg);display:flex;justify-content:flex-end;align-items:center}.expression[_ngcontent-%COMP%]{font-size:25px;font-family:examly-digital}.input-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.input-keys[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:60px;height:60px;border:1px solid var(--greycardborder);border-radius:3px;cursor:pointer;background:#f1f1f1}.input-clear[_ngcontent-%COMP%]{background-color:var(--warnred);color:var(--white)}.input-equal[_ngcontent-%COMP%]{background-color:var(--eight);color:var(--white)}.number[_ngcontent-%COMP%]{background:#fff!important}.input-ans[_ngcontent-%COMP%]{background-color:var(--one);color:var(--white)}p[_ngcontent-%COMP%]{font-size:0}.res[_ngcontent-%COMP%]{width:96%;height:35px;margin-left:5px}.degRadDisabled[_ngcontent-%COMP%]{color:#c5c5c5}"]],data:{}});function vi(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,100,"div",[["class","calculator"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,0,"p",[["id","myPara"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,1,"p",[["id","myAns"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["0"])),(t()(),i.pb(4,0,null,null,2,"div",[["class","display"]],null,null,null,null,null)),(t()(),i.pb(5,0,null,null,1,"div",[["class","expression font26"],["style","width: 100%"]],null,null,null,null,null)),(t()(),i.pb(6,0,null,null,0,"input",[["class","expression res"],["id","result"],["readonly",""]],null,null,null,null,null)),(t()(),i.pb(7,0,null,null,20,"div",[["class","input-row row-1"]],null,null,null,null,null)),(t()(),i.pb(8,0,null,null,3,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.degRad(0)&&i),i}),null,null)),i.ob(9,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(10,{degRadDisabled:0}),(t()(),i.Hb(-1,null,["rad"])),(t()(),i.pb(12,0,null,null,3,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.degRad(1)&&i),i}),null,null)),i.ob(13,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(14,{degRadDisabled:0}),(t()(),i.Hb(-1,null,["deg"])),(t()(),i.pb(16,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.trigo("sin")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["sin"])),(t()(),i.pb(18,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.trigo("cos")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["cos"])),(t()(),i.pb(20,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.trigo("tan")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["tan"])),(t()(),i.pb(22,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.ans()&&i),i}),null,null)),(t()(),i.Hb(-1,null,["Ans"])),(t()(),i.pb(24,0,null,null,1,"div",[["class","input-keys input-clear"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.del()&&i),i}),null,null)),(t()(),i.Hb(-1,null,["DEL"])),(t()(),i.pb(26,0,null,null,1,"div",[["class","input-keys input-clear"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.ac()&&i),i}),null,null)),(t()(),i.Hb(-1,null,["AC"])),(t()(),i.pb(28,0,null,null,16,"div",[["class","input-row row-2"]],null,null,null,null,null)),(t()(),i.pb(29,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.log(1)&&i),i}),null,null)),(t()(),i.Hb(-1,null,["log"])),(t()(),i.pb(31,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.log(0)&&i),i}),null,null)),(t()(),i.Hb(-1,null,["ln"])),(t()(),i.pb(33,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.piOrE("pi")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["\u03c0"])),(t()(),i.pb(35,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.piOrE("e")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["e"])),(t()(),i.pb(37,0,null,null,1,"div",[["class","input-keys number"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("7")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["7"])),(t()(),i.pb(39,0,null,null,1,"div",[["class","input-keys number"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("8")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["8"])),(t()(),i.pb(41,0,null,null,1,"div",[["class","input-keys number"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("9")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["9"])),(t()(),i.pb(43,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.multOrDiv("div")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["\xf7"])),(t()(),i.pb(45,0,null,null,16,"div",[["class","input-row row-3"]],null,null,null,null,null)),(t()(),i.pb(46,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.leftParen()&&i),i}),null,null)),(t()(),i.Hb(-1,null,["("])),(t()(),i.pb(48,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input(")")&&i),i}),null,null)),(t()(),i.Hb(-1,null,[")"])),(t()(),i.pb(50,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("1/")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["1/x"])),(t()(),i.pb(52,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("^(")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["^"])),(t()(),i.pb(54,0,null,null,1,"div",[["class","input-keys number"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("4")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["4"])),(t()(),i.pb(56,0,null,null,1,"div",[["class","input-keys number"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("5")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["5"])),(t()(),i.pb(58,0,null,null,1,"div",[["class","input-keys number"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("6")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["6"])),(t()(),i.pb(60,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.multOrDiv("mult")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["\xd7"])),(t()(),i.pb(62,0,null,null,16,"div",[["class","input-row row-4"]],null,null,null,null,null)),(t()(),i.pb(63,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.sqrt()&&i),i}),null,null)),(t()(),i.Hb(-1,null,["sqrt"])),(t()(),i.pb(65,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.cbrt()&&i),i}),null,null)),(t()(),i.Hb(-1,null,["cbrt"])),(t()(),i.pb(67,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("!")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["!"])),(t()(),i.pb(69,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input(".")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["."])),(t()(),i.pb(71,0,null,null,1,"div",[["class","input-keys number"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("1")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["1"])),(t()(),i.pb(73,0,null,null,1,"div",[["class","input-keys number"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("2")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["2"])),(t()(),i.pb(75,0,null,null,1,"div",[["class","input-keys number"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("3")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["3"])),(t()(),i.pb(77,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("-")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["-"])),(t()(),i.pb(79,0,null,null,21,"div",[["class","input-row row-5"]],null,null,null,null,null)),(t()(),i.pb(80,0,null,null,3,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.itrigo("asin")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["sin"])),(t()(),i.pb(82,0,null,null,1,"sup",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,["-1"])),(t()(),i.pb(84,0,null,null,3,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.itrigo("acos")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["cos"])),(t()(),i.pb(86,0,null,null,1,"sup",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,["-1"])),(t()(),i.pb(88,0,null,null,3,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.itrigo("atan")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["tan"])),(t()(),i.pb(90,0,null,null,1,"sup",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,["-1"])),(t()(),i.pb(92,0,null,null,0,"div",[["class","input-keys"]],null,null,null,null,null)),(t()(),i.pb(93,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("00")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["00"])),(t()(),i.pb(95,0,null,null,1,"div",[["class","input-keys number"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("0")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["0"])),(t()(),i.pb(97,0,null,null,1,"div",[["class","input-keys input-equal"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.equal()&&i),i}),null,null)),(t()(),i.Hb(-1,null,["="])),(t()(),i.pb(99,0,null,null,1,"div",[["class","input-keys"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.input("+")&&i),i}),null,null)),(t()(),i.Hb(-1,null,["+"]))],(function(t,e){var n=e.component,i=t(e,10,0,!1===n.rad);t(e,9,0,"input-keys",i);var s=t(e,14,0,!1===n.deg);t(e,13,0,"input-keys",s)}),null)}var fi=n("fWv6"),Si=n("ZEiq"),wi=n("1YvG"),yi=n("GQrn"),xi=n("Zmyv"),ki=n("NG2+"),Di=n("R2oh");class Ci{constructor(t){this.testService=t,this.action=new i.m,this.totalQuestions=0,this.totalAnswered=0,this.totalNotAnswered=0,this.totalNotViewed=0,this.sections=[],this.closeButton={btnName:"Continue Test",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px",fontSize:"14px",id:"tt-summary-close"},this.testService.testData&&this.testService.testData.frozen_data&&(this.sections=this.testService.testData.frozen_data.frozen_test_data,this.testService.testData.frozen_data.frozen_test_data.forEach(t=>{t.questions.forEach(t=>{switch(this.totalQuestions+=1,t.state){case 1:case 2:case 4:this.totalAnswered+=1;break;case 3:this.totalNotAnswered+=1;break;case 5:this.totalNotViewed+=1}})}))}buttonFunction(t){switch(t.type){case"Continue Test":this.action.emit({type:"Close Dialog"})}}}var qi=i.nb({encapsulation:0,styles:[[".tt-summary-container[_ngcontent-%COMP%], .tt-summary-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.tt-summary-content-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:6px 14px;box-shadow:0 4px 6px 0 #00000038;z-index:10}.tt-summary-metrics[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;flex-wrap:wrap}.metric-total[_ngcontent-%COMP%]{display:flex}.total-title[_ngcontent-%COMP%]{padding:4px}.total-value[_ngcontent-%COMP%]{padding:4px;font-weight:500}.metric-circle[_ngcontent-%COMP%]{display:flex;align-items:center}.circle-title[_ngcontent-%COMP%], .circle-value[_ngcontent-%COMP%]{padding:4px}.circle[_ngcontent-%COMP%]{border-radius:50%;align-items:center;text-align:center;height:35px;width:35px;display:flex;justify-content:center}.circle-answered[_ngcontent-%COMP%]{background-color:var(--darkgreen);color:var(--white)}.circle-notanswered[_ngcontent-%COMP%]{background-color:var(--nine);color:var(--white)}.circle-notviewed[_ngcontent-%COMP%]{background-color:var(--greycardbg)}.section-summary-cont[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:6px 14px;justify-content:space-evenly;height:100%;overflow:auto}.section-summary-each[_ngcontent-%COMP%]{display:flex;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:4px}.section-summary-card[_ngcontent-%COMP%]{border:1px solid var(--greycardborder)}.action[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:6px 14px;border-top:1px solid var(--greycardborder)}.continue-test[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function Ii(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,3,"div",[["class","section-summary-each"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,2,"div",[["class","section-summary-card"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,1,"testtaking-section-summary",[],null,null,null,X,z)),i.ob(3,638976,null,0,H,[c.a],{showQuestionator:[0,"showQuestionator"],showActions:[1,"showActions"],secIndex:[2,"secIndex"]},null)],(function(t,e){t(e,3,0,!1,!1,e.context.index)}),null)}function Pi(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,33,"div",[["class","tt-summary-container"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,32,"div",[["class","tt-summary-content"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,24,"div",[["class","tt-summary-content-header"]],null,null,null,null,null)),(t()(),i.pb(3,0,null,null,23,"div",[["class","tt-summary-metrics"]],null,null,null,null,null)),(t()(),i.pb(4,0,null,null,4,"div",[["class","metric-total"]],null,null,null,null,null)),(t()(),i.pb(5,0,null,null,1,"div",[["class","total-title"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Total number of questions"])),(t()(),i.pb(7,0,null,null,1,"div",[["class","total-value"]],null,null,null,null,null)),(t()(),i.Hb(8,null,[" "," "])),(t()(),i.pb(9,0,null,null,5,"div",[["class","metric-circle"]],null,null,null,null,null)),(t()(),i.pb(10,0,null,null,2,"div",[["class","circle-value"]],null,null,null,null,null)),(t()(),i.pb(11,0,null,null,1,"div",[["class","circle circle-answered"]],null,null,null,null,null)),(t()(),i.Hb(12,null,[" "," "])),(t()(),i.pb(13,0,null,null,1,"div",[["class","circle-title"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Answered"])),(t()(),i.pb(15,0,null,null,5,"div",[["class","metric-circle"]],null,null,null,null,null)),(t()(),i.pb(16,0,null,null,2,"div",[["class","circle-value"]],null,null,null,null,null)),(t()(),i.pb(17,0,null,null,1,"div",[["class","circle circle-notanswered"]],null,null,null,null,null)),(t()(),i.Hb(18,null,[" "," "])),(t()(),i.pb(19,0,null,null,1,"div",[["class","circle-title"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Skipped"])),(t()(),i.pb(21,0,null,null,5,"div",[["class","metric-circle"]],null,null,null,null,null)),(t()(),i.pb(22,0,null,null,2,"div",[["class","circle-value"]],null,null,null,null,null)),(t()(),i.pb(23,0,null,null,1,"div",[["class","circle circle-notviewed"]],null,null,null,null,null)),(t()(),i.Hb(24,null,[" "," "])),(t()(),i.pb(25,0,null,null,1,"div",[["class","circle-title"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Not Viewed"])),(t()(),i.pb(27,0,null,null,2,"div",[["class","section-summary-cont"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Ii)),i.ob(29,278528,null,0,f.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null),(t()(),i.pb(30,0,null,null,3,"div",[["class","action"]],null,null,null,null,null)),(t()(),i.pb(31,0,null,null,2,"div",[["class","continue-test"]],null,null,null,null,null)),(t()(),i.pb(32,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(33,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,29,0,n.sections),t(e,33,0,n.closeButton,n.closeButton.padding,n.closeButton.fontSize,n.closeButton.id)}),(function(t,e){var n=e.component;t(e,8,0,n.totalQuestions),t(e,12,0,n.totalAnswered),t(e,18,0,n.totalNotAnswered),t(e,24,0,n.totalNotViewed)}))}var Mi=n("jyHg"),Ti=n("3m+6"),Ei=n("EFyh"),Oi=n("c14U");class Ai{constructor(t){this.testService=t,this.headerAction=new i.m,this.title="Demo title",this.pauseAllow=!1,this.pauseButton={btnName:"Pause Test",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px",fontSize:"14px",id:"tt-header-pause"},this.submitButton={btnName:"Submit Section",disable:"false",border:"1px solid var(--orange)",background:"var(--orange)",padding:"6px",fontSize:"14px",fontColor:"var(--black)",id:"tt-header-submit"},this.dialogHeader="",this.title=this.testService.testData.t_name,this.pauseAllow=this.testService.testData.c_modules.enable_pause,this.showCalc=!!this.testService.testData.c_modules.enable_calcii,this.showCalc&&this.testService.testData.c_modules&&this.testService.testData.c_modules.calc_type&&(this.calcType=this.testService.testData.c_modules.calc_type)}ngOnChanges(t){for(let e in t)"selectedSection"===e&&this.sectionChangeHandle(),"disableSubmit"===e&&this.disableSubmitHandle(),"isOffline"===e&&this.showNetworkAlert()}sectionChangeHandle(){this.submitButton.btnName=this.testService.testData.c_modules.lock_sections&&this.selectedSection<this.testService.testData.frozen_data.frozen_test_data.length-1?"Submit Section":"Submit Test"}disableSubmitHandle(){this.submitButton.disable=this.disableSubmit||this.testService.testData.c_modules.disable_manual_submit?"true":"false"}buttonFunction(t){switch(t.type){case"Submit Test":case"Submit Section":if(this.testService.testData.c_modules.disable_manual_submit)return}this.headerAction.emit(t)}showCalculator(){this.showCalc&&this.calcType&&"scientific"===this.calcType?this.headerAction.emit({type:"Scientific Calculator"}):this.showCalc&&this.headerAction.emit({type:"Calculator"})}showSectionSummary(){this.headerAction.emit({type:"Section Summary"})}showNetworkAlert(){this.isOffline?this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!0,dialogHeaderStyle:{"background-color":"",color:""},alertData:{visible:!0,summary:"Network Error!",detail:"Internet connection is lost. Your answers will not get saved!",rejectButton:{btnName:"OK",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--black)",padding:"6px 20px",fontSize:"14px",id:"tt-playground-alert-reject",width:"30%",tabindex:"1"}}}):this.dialogVisible=!1}triggerAlert(t,e){this.dialogHeader=e.dialogHeader,this.dialogHeaderStyle=e.dialogHeaderStyle,this.dialogHeaderRequired=e.dialogHeaderRequired,this.dialogClosable=e.dialogClosable,this.alertData=e.alertData,this.alertData.rejectButton.action=()=>{},this.dialogHeaderStyle.color="var(--warnred)",this.dialogStyle||(this.dialogStyle=document.body.offsetWidth>480?{width:"450px",top:"30%",height:"auto","min-height":"unset"}:{width:"100%",top:"30%",height:"auto","min-height":"unset"}),this.dialogVisible=!0}onDialogClose(){}}var Hi=i.nb({encapsulation:0,styles:[[".tt-header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-between}.header-title-cont[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 14px;width:60%}.header-title[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:500}.header-functions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:6px 14px;overflow:hidden;white-space:nowrap;width:40%}.m-pause-test[_ngcontent-%COMP%], .pause-test[_ngcontent-%COMP%]{padding:4px}.submission[_ngcontent-%COMP%]{padding:4px 15px}.timer-container[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center;width:76px}.timer[_ngcontent-%COMP%]{font-family:examly-digital;width:100%}.no-network-container[_ngcontent-%COMP%]{position:absolute;width:100%;text-align:center;top:3px;display:flex;justify-content:center}.no-network-card[_ngcontent-%COMP%]{background-color:#ff00009c;color:var(--black);padding:0 10px;border-radius:3px;font-size:16px;height:40px;display:flex;align-items:center}.mobile-actions[_ngcontent-%COMP%]{display:none;align-items:center;padding:6px 14px}.mobile-action-left[_ngcontent-%COMP%]{display:flex;width:50%;align-items:center;justify-content:flex-start}.mobile-action-right[_ngcontent-%COMP%]{display:flex;width:50%;align-items:center;justify-content:flex-end}.icon-calculator-1[_ngcontent-%COMP%]::before, .icon-document[_ngcontent-%COMP%]::before{cursor:pointer}@media screen and (max-width:992px){.pause-test[_ngcontent-%COMP%], .submission[_ngcontent-%COMP%]{display:none}.mobile-actions[_ngcontent-%COMP%]{display:flex;padding-top:60px}.tt-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:10;background-color:var(--white);box-shadow:0 3px 6px 0 #00000038}.timer-container[_ngcontent-%COMP%]{text-align:right}}.alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-evenly;padding:6px 14px;color:var(--fiftyfour)}.alert-summary-cont[_ngcontent-%COMP%]{padding:6px 14px;color:var(--warnred)}.alert-detail-cont[_ngcontent-%COMP%]{padding:6px 14px}.alert-reject[_ngcontent-%COMP%]{padding-bottom:15px;text-align:center}"]],data:{}});function zi(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","pause-test"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.pauseButton,n.pauseButton.padding,n.pauseButton.fontSize,n.pauseButton.id)}),null)}function Ri(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","no-network-container"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","no-network-card"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Internet connection is lost. Your answers will not get saved!"]))],null,null)}function Ni(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,0,"div",[["class","alert-summary-cont font18"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.alertData.summary)}))}function Bi(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,0,"div",[["class","alert-detail-cont font14"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.alertData.detail)}))}function Li(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,4,"div",[["class","alert-container"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Ni)),i.ob(2,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Bi)),i.ob(4,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.alertData.summary),t(e,4,0,n.alertData.detail)}),null)}function ji(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","alert-reject"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0,s=t.component;return"but"===e&&(s.dialogVisible=!1,i=!1!==s.alertData.rejectButton.action()&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.alertData.rejectButton,n.alertData.rejectButton.padding,n.alertData.rejectButton.fontSize,n.alertData.rejectButton.id)}),null)}function Fi(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","m-pause-test"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.pauseButton,n.pauseButton.padding,n.pauseButton.fontSize,n.pauseButton.id)}),null)}function Ji(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","calculator-button-cont"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,0,"i",[["class","icon-calculator-1"],["id","tt-header-calculator"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.showCalculator()&&i),i}),null,null))],null,null)}function Ui(t){return i.Jb(0,[i.Bb(0,Z.a,[]),(t()(),i.pb(1,0,null,null,21,"div",[["class","tt-header"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,2,"div",[["class","header-title-cont"]],null,null,null,null,null)),(t()(),i.pb(3,0,null,null,1,"div",[["aria-level","1"],["class","header-title font20"],["role","heading"]],null,null,null,null,null)),(t()(),i.Hb(4,null,[" "," "])),(t()(),i.pb(5,0,null,null,9,"div",[["class","header-functions"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,zi)),i.ob(7,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(8,0,null,null,2,"div",[["class","submission"]],null,null,null,null,null)),(t()(),i.pb(9,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.buttonFunction(n)&&i),i}),O.b,O.a)),i.ob(10,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"}),(t()(),i.pb(11,0,null,null,3,"div",[["class","timer-container"]],null,null,null,null,null)),(t()(),i.pb(12,0,null,null,2,"div",[["class","timer font26"]],null,null,null,null,null)),(t()(),i.Hb(13,null,[" "," "])),i.Db(14,1),(t()(),i.gb(16777216,null,null,1,null,Ri)),i.ob(16,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(17,0,null,null,5,"app-dialog",[],null,[[null,"visibleChange"],["window","resize"]],(function(t,e,n){var s=!0,l=t.component;return"window:resize"===e&&(s=!1!==i.zb(t,18).getScreenSize(n)&&s),"visibleChange"===e&&(s=!1!==(l.dialogVisible=n)&&s),"visibleChange"===e&&(s=!1!==l.onDialogClose()&&s),s}),Mi.b,Mi.a)),i.ob(18,114688,null,0,Ti.a,[Ei.a,Oi.a,o.m,u.a],{closable:[0,"closable"],visible:[1,"visible"],header:[2,"header"],headRequired:[3,"headRequired"],ngStyleClass:[4,"ngStyleClass"],headerStyle:[5,"headerStyle"]},{visibleChange:"visibleChange"}),(t()(),i.gb(16777216,null,0,1,null,Li)),i.ob(20,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,0,1,null,ji)),i.ob(22,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(23,0,null,null,8,"div",[["class","mobile-actions"]],null,null,null,null,null)),(t()(),i.pb(24,0,null,null,4,"div",[["class","mobile-action-left"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Fi)),i.ob(26,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(27,0,null,null,1,"div",[["class","summary-button-cont"]],null,null,null,null,null)),(t()(),i.pb(28,0,null,null,0,"i",[["class","icon-document"],["id","tt-header-sec-summary"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.showSectionSummary()&&i),i}),null,null)),(t()(),i.pb(29,0,null,null,2,"div",[["class","mobile-action-right"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Ji)),i.ob(31,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,7,0,n.pauseAllow),t(e,10,0,n.submitButton,n.submitButton.padding,n.submitButton.fontSize,n.submitButton.id),t(e,16,0,n.isOffline),t(e,18,0,n.dialogClosable,n.dialogVisible,n.dialogHeader,n.dialogHeaderRequired,n.dialogStyle,n.dialogHeaderStyle),t(e,20,0,n.alertData&&n.alertData.visible),t(e,22,0,n.alertData&&n.alertData.rejectButton),t(e,26,0,n.pauseAllow),t(e,31,0,n.showCalc)}),(function(t,e){var n=e.component;t(e,4,0,n.title);var s=i.Ib(e,13,0,t(e,14,0,i.zb(e,0),n.t_counter));t(e,13,0,s)}))}class Ki{constructor(){this.dialogScreenShare=new i.m,this.dialogSubmitTest=new i.m,this.dialogPauseTest=new i.m,this.shareScreenDialogStyle={display:"flex","flex-direction":"column",width:"100%","min-height":"136px",top:"25%"},this.reShareBtn={btnName:"Share Screen",border:"1px solid orange",fontColor:"white",background:"orange",padding:"6px 14px",fontSize:"14px",id:"re-share-btn"},this.submitTestBtn={btnName:"Submit Test",border:"1px solid lightgray",fontColor:"black",background:"white",padding:"6px 14px",fontSize:"14px",id:"submit-test-btn"}}ngOnInit(){this.timer=this.autoSubmitCutOffPeriod}ngOnChanges(t){!0===this.displayShareScreenDialog&&(this.timer=this.autoSubmitCutOffPeriod,this.startTimer())}screenShare(){this.dialogScreenShare.next(!0),clearInterval(this.timeInterval)}submitTest(){this.dialogSubmitTest.next(!0),clearInterval(this.timeInterval)}pauseTest(){this.dialogPauseTest.next(!0),clearInterval(this.timeInterval)}startTimer(){this.timeInterval=setInterval(()=>{this.timer<=0?"Submit"===this.liveScreenSharingFeature?this.submitTest():this.pauseTest():this.timer-=1},1e3)}}var Qi=i.nb({encapsulation:0,styles:[[""]],data:{}});function Wi(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.submitTest()&&i),i}),O.b,O.a)),i.ob(1,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,1,0,n.submitTestBtn,n.submitTestBtn.padding,n.submitTestBtn.fontSize,n.submitTestBtn.id)}),null)}function $i(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.pauseTest()&&i),i}),O.b,O.a)),i.ob(1,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,1,0,n.submitTestBtn,n.submitTestBtn.padding,n.submitTestBtn.fontSize,n.submitTestBtn.id)}),null)}function Vi(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,12,"app-dialog",[],null,[[null,"visibleChange"],["window","resize"]],(function(t,e,n){var s=!0,l=t.component;return"window:resize"===e&&(s=!1!==i.zb(t,1).getScreenSize(n)&&s),"visibleChange"===e&&(s=!1!==(l.displayShareScreenDialog=n)&&s),s}),Mi.b,Mi.a)),i.ob(1,114688,null,0,Ti.a,[Ei.a,Oi.a,o.m,u.a],{closable:[0,"closable"],visible:[1,"visible"],header:[2,"header"],ngStyleClass:[3,"ngStyleClass"]},{visibleChange:"visibleChange"}),(t()(),i.pb(2,0,null,0,1,"p",[["style","text-align: center; padding: 1rem;"]],null,null,null,null,null)),(t()(),i.Hb(3,null,[' Please click "Share Screen" or else the test will auto submit in '," secs. "])),(t()(),i.pb(4,0,null,0,1,"p",[["style","text-align: center; padding: 1rem;"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["To continue the test, please click \u201cShare Screen\u201d and press the \u201cShare\u201d button in the next popup"])),(t()(),i.pb(6,0,null,0,6,"div",[["style","display: flex; justify-content: center; margin-bottom: 1rem;"]],null,null,null,null,null)),(t()(),i.pb(7,0,null,null,1,"app-button",[["style","margin-right: 8px;"]],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.screenShare()&&i),i}),O.b,O.a)),i.ob(8,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"}),(t()(),i.gb(16777216,null,null,1,null,Wi)),i.ob(10,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,$i)),i.ob(12,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,1,0,!1,n.displayShareScreenDialog,i.rb(1,"Screen share: Total reshare available ",n.displayShareScreenDialogCount,""),n.shareScreenDialogStyle),t(e,8,0,n.reShareBtn,n.reShareBtn.padding,n.reShareBtn.fontSize,n.reShareBtn.id),t(e,10,0,"Submit"===n.liveScreenSharingFeature),t(e,12,0,"Pause"===n.liveScreenSharingFeature)}),(function(t,e){t(e,3,0,e.component.timer)}))}var Yi=n("7RJT");class Gi{constructor(){this.transcribedWords=new Yi.BehaviorSubject(!1),this.listening=!1,this.window=window,this.speechRecognition=this.window.SpeechRecognition,this.wordList=[],this.autoEnd=!0,this.onResult=t=>{this.setTransWords(!0)};const t=this.window.SpeechRecognition||this.window.webkitSpeechRecognition;void 0!==t&&(this.speechRecognition=new t,this.speechRecognition.continuous=!0,this.speechRecognition.interimResults=!1,this.speechRecognition.addEventListener("result",this.onResult),this.speechRecognition.onend=()=>{this.autoEnd&&this.speechRecognition.start()})}stop(){this.autoEnd=!1,this.speechRecognition.stop()}start(){this.speechRecognition.start()}setTransWords(t){return this.transcribedWords.next(t)}getTransWords(){return this.transcribedWords}}Gi.ngInjectableDef=i.R({factory:function(){return new Gi},token:Gi,providedIn:"root"});class Xi{constructor(t){this.testService=t,this.URL="https://images.examly.io/scripts/audio/ap-v1/",this.recogResult=new Yi.BehaviorSubject(null)}createModel(){return Rn.__awaiter(this,void 0,void 0,(function*(){const t=this.URL+"model.json",e=this.URL+"metadata.json";this.speechCommandRef=yield this.getSpeechCommands();const n=this.speechCommandRef.create("BROWSER_FFT",void 0,t,e);return yield n.ensureModelLoaded(),n}))}getSpeechCommands(){return new Promise((t,e)=>Rn.__awaiter(this,void 0,void 0,(function*(){this.speechCommandRef||(this.speechCommandRef=yield this.testService.getSpeechCommands()),t(this.speechCommandRef)})))}init(){return Rn.__awaiter(this,void 0,void 0,(function*(){this.recognizer=yield this.createModel(),this.recognizer.listen(t=>(this.setRecogResults(t.scores),Promise.resolve()),{includeSpectrogram:!0,probabilityThreshold:.75,invokeCallbackOnNoiseAndUnknown:!0,overlapFactor:.5})}))}stopListening(){setTimeout(()=>{this.recognizer.stopListening(),this.setRecogResults([0,0])},2e3)}getRecogResults(){return this.recogResult}setRecogResults(t){return this.recogResult.next(t)}}Xi.ngInjectableDef=i.R({factory:function(){return new Xi(i.V(c.a))},token:Xi,providedIn:"root"});class Zi{constructor(t,e){this.testService=t,this.globalService=e,this.isStart=!1,this.blobObservable=new Yi.BehaviorSubject(null)}startScreenRecording(){return new Promise((t,e)=>Rn.__awaiter(this,void 0,void 0,(function*(){const n=yield this.testService.getRecordRTC();navigator.mediaDevices.getDisplayMedia&&navigator.mediaDevices.getDisplayMedia({video:!0}).then(e=>{this.stream=e,this.recorder=n(e,{type:"video",recorderType:MediaStreamRecorder,mimeType:"video/webm",bitsPerSecond:12800,timeSlice:3e5}),this.recorder.screen=screen,this.isStart=!0,this.recorder.startRecording(),t(!0)}).catch(t=>{e(t)})})))}stopRecording(){this.isStart&&(this.recorder.stopRecording(),this.recorder.destroy(),this.stream.getTracks().forEach(t=>{t.stop(),t.enabled=!1}))}}Zi.ngInjectableDef=i.R({factory:function(){return new Zi(i.V(c.a),i.V(u.a))},token:Zi,providedIn:"root"});class ts{constructor(t,e,n,s,l,a,r){this.globalService=t,this.testService=e,this.webSpeechService=n,this.inferAudioService=s,this.faceVerificationService=l,this.renderer=a,this.screenRecord=r,this.output=new i.m,this.videoWidth=190,this.videoHeight=143,this.prevX=0,this.prevY=0,this.currX=0,this.currY=0,this.mobileBreakPoint=992,this.togglerLabel="Hide video",this.hoverMsg="Drag away if it hides!\nAlert pops-up on suspicious activity",this.data={msg:"",severity:"success"},this.alertCount=0,this.maxAlertCount=0,this.alertCountMsg="Suspicious activity count",this.reconnectCount=0,this.faceLandMarks=[],this.noOfWordsSpoken=0,this.scores=[0,0],this.timestamps=0,this.isMobile=!1,this.words=[],this.isListening=!1,this.disableAlert=!1}ngOnInit(){this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.disable_proctor_alerts&&(this.disableAlert=!0),this.isFirefox="undefined"!=typeof InstallTrigger,this.isChrome=window.chrome||navigator.userAgent.indexOf("CriOS")>0;const t=navigator.userAgent;/android|iphone|kindle|ipad/i.test(t)&&(this.isMobile=!0),this.proctoringHandler()}ngOnChanges(t){for(const e in t)if(e)switch(e){case"isOnCall":this.isMobile&&this.isOnCall.value&&"Hide video"===this.togglerLabel?(this.renderer.setStyle(this.procCont.nativeElement,"display","none"),this.toggleDisplay()):this.isMobile&&!this.isOnCall.value&&"Show video"===this.togglerLabel&&(this.renderer.setStyle(this.procCont.nativeElement,"display","flex"),this.toggleDisplay());break;case"liveAction":this.liveAction&&this.proctorActionHandler(this.liveAction);break;case"imageAction":this.imageAction&&this.proctorActionHandler(this.imageAction);break;case"mediaAction":this.mediaAction&&this.proctorActionHandler(this.mediaAction)}}startAudioInfer(){this.isChrome&&this.startWebSpeechRecogn(),this.isListening=!0}stopAudioInfer(){this.isListening&&this.isChrome&&this.stopWebSpeechRecogn(),this.isListening=!1}startWebSpeechRecogn(){this.webSpeechService.start(),this.webSpeechService.getTransWords().subscribe(t=>{t&&this.audioTimestampsHandler()})}stopWebSpeechRecogn(){this.webSpeechService.stop()}startTensorRecogn(){this.inferAudioService.init(),this.inferAudioService.getRecogResults().subscribe(t=>{t&&(this.scores=t,this.scores[1]>.75&&this.audioTimestampsHandler())})}stopTensorRecogn(){this.inferAudioService.stopListening()}audioTimestampsHandler(){let t=0;t=this.testService.testData.t_total_duration?60*this.testService.testData.t_total_duration-this.testService.testData.t_counter:this.testService.testData.t_counter,this.testService.testData.test_tracking_data.audio_proctor_analysis.push({inferredAt:t,actualTime:(new Date).getTime()})}setupLiveVideo(){this.testService.getLiveProctoringData().subscribe(t=>{if(t){var e=t.jwt_token,n=t.roomName;this.testService.getJitsi().then(()=>{const t=new window.JitsiMeetExternalAPI("8x8.vc",{roomName:n,parentNode:document.querySelector("#jaas-container"),height:"0px",width:"0px",configOverwrite:{prejoinPageEnabled:!1,startWithAudioMuted:!0,startWithVideoMuted:!1,hideParticipantsStats:!0,hideConferenceSubject:!0,hideConferenceTimer:!0,disableTileView:!0,toolbarButtons:[]},interfaceConfigOverwrite:{VIDEO_QUALITY_LABEL_DISABLED:!0,FILM_STRIP_MAX_HEIGHT:0},jwt:e});t.on("videoConferenceJoined",(function(e){t.pinParticipant(e.id)}))})}},t=>{this.mediaUploadErrAlert("Live Video Access Error!")})}proctorActionHandler(t){switch(t.type){case"live-check":this.estimatePoseUsingPosenet();break;case"video-upload-nonsubmit":this.uploadProctoredVideo("nonsubmit").catch(t=>{this.mediaUploadErrAlert(t)}),"Video"===this.testService.testData.c_modules.remote_proctoring_type&&this.testService.testData.c_modules.record_screen&&this.uploadScreenRecord("nonsubmit").catch(t=>{this.mediaUploadErrAlert(t)});break;case"video-upload-submit":if(this.recordRTCIns&&"recording"===this.recordRTCIns.getState()||this.recordRTCBlob){const t=[];t.push(this.uploadProctoredVideo("submit")),"Video"===this.testService.testData.c_modules.remote_proctoring_type&&this.testService.testData.c_modules.record_screen&&t.push(this.uploadScreenRecord("submit")),Promise.all(t).then(t=>{this.uploadAllProcImgQueue().then(()=>{this.sentTestSubmit()}).catch(t=>{this.sendTestSubmitRetry()})}).catch(t=>{this.sendTestSubmitRetry()})}else this.uploadAllProcImgQueue().then(()=>{this.sentTestSubmit()}).catch(t=>{this.sendTestSubmitRetry()});break;case"audio-upload-nonsubmit":this.uploadProctoredAudio("nonsubmit").catch(t=>{this.mediaUploadErrAlert(t)});break;case"audio-upload-submit":this.recordRTCIns&&"recording"===this.recordRTCIns.getState()||this.recordRTCBlob?this.uploadProctoredAudio("submit").then(t=>{this.uploadAllProcImgQueue().then(()=>{this.sentTestSubmit()}).catch(t=>{this.sendTestSubmitRetry()})}).catch(t=>{this.sendTestSubmitRetry()}):this.uploadAllProcImgQueue().then(()=>{this.sentTestSubmit()}).catch(t=>{this.sendTestSubmitRetry()});break;case"upload-image":this.uploadProctoredImage("nonsubmit").catch(t=>{this.mediaUploadErrAlert(t)});break;case"upload-image-submit":this.uploadProctoredImage("submit").then(t=>{this.uploadAllProcImgQueue().then(()=>{this.sentTestSubmit()}).catch(t=>{this.sendTestSubmitRetry()})}).catch(t=>{this.sendTestSubmitRetry()});break;case"retry-in-queue":this.uploadProcImgQueue().catch(t=>{});break;case"face-api":"v1"===this.testService.testData.c_modules.face_verification_version||void 0===this.testService.testData.c_modules.face_verification_version||this.compareFaceUsingFaceApiV2()}}ngOnDestroy(){this.stopAudioInfer(),this.stopRecording(),window.onresize=null}stopRecording(){this.stopRecordRTC(),this.screenRecord.stopRecording(),this.stopMediaStream()}stopRecordRTC(){this.recordRTCIns&&(this.recordRTCIns.stopRecording(),this.recordRTCIns.destroy())}stopMediaStream(){this.mediaStream&&this.mediaStream.getTracks().forEach(t=>{t.onended=void 0,t.stop()})}proctoringHandler(){return new Promise((t,e)=>{this.testService.testData.c_modules.remote_proctoring_type&&(this.testService.getProcDB().then(t=>{this.testService.clearProcImgDB(t).catch(()=>{})}).catch(()=>{}),this.testService.testData.client_data&&this.testService.testData.client_data.proctoring_alerts&&(this.alertCount=this.testService.testData.client_data.proctoring_alerts),this.testService.testData.c_modules.enable_max_proctoring_alerts&&this.testService.testData.c_modules.max_proctoring_alerts&&(this.maxAlertCount=this.testService.testData.c_modules.max_proctoring_alerts),this.testService.testData.test_tracking_data&&this.testService.testData.test_tracking_data.audio_proctor_analysis||(this.testService.testData.test_tracking_data={audio_proctor_analysis:[]}),this.renderer.setStyle(this.procCont.nativeElement,"display","flex"),this.setupDragElement(),this.testService.testData.c_modules.isLiveVideoEnable&&this.setupLiveVideo(),this.setStream().then(()=>{"Video"===this.testService.testData.c_modules.remote_proctoring_type?this.testService.testData.c_modules.record_screen?this.screenRecord.startScreenRecording().then(t=>{this.startVideoRecording()}).catch(t=>{this.errorAlert({header:"Alert!",summary:"Couldn't establish screen share!",detail:`\n                                        <p>You will be moved out of the test now.</p>\n                                        <p>Error: ${t}</p>\n                                        `},!0)}):this.startVideoRecording():"Picture-Audio"===this.testService.testData.c_modules.remote_proctoring_type&&("Record-Analysis"===this.testService.testData.c_modules.audio_feature&&this.startAudioInfer(),this.startAudioRecording())}).catch(t=>{this.errorAlert({header:"Error",summary:"Error ocurred!",detail:`\n                            <p>You will be moved out of the test now.</p>\n                            <p>Error: ${t}</p>\n                            `},!0)})),t(!0)})}setStream(){return new Promise((t,e)=>{this.getMediaStream().then(e=>{this.renderer.setProperty(this.procVideo.nativeElement,"srcObject",e),this.renderer.setProperty(this.procVideo.nativeElement,"muted",!0),this.procVideo.nativeElement.setAttribute("playsinline",""),this.procVideo.nativeElement.play(),t(!0)}).catch(t=>{e(t)})})}startVideoRecording(){return Rn.__awaiter(this,void 0,void 0,(function*(){const t=yield this.testService.getRecordRTC(),e=yield this.getMediaStream().catch(t=>{this.errorAlert({header:"Error",summary:"Error ocurred!",detail:`\n                    <p>You will be moved out of the test now.</p>\n                    <p>Error: ${t}</p>\n                    `},!0)});e&&(this.recordRTCIns||(this.recordRTCIns=t(e,{mimeType:"video/webm",disableLogs:!0,audioBitsPerSecond:128e3,videoBitsPerSecond:128e3,bitsPerSecond:128e3})),this.recordRTCIns.startRecording())}))}onErrorProcAVUpload(t,e,n){return new Promise((i,s)=>{if("submit"===n)return s("retry in submit retry");this.isReconnecting||"nonsubmit"!==n?i(!0):this.showReconnectDialog(()=>new Promise((n,i)=>{this.testService.uploadToS3WithRetry(t,e,2,"proctoring").then(()=>{n(!0)}).catch(t=>{i(t)})})).then(()=>{i(!0)}).catch(t=>{s(t)})})}uploadScreenRecord(t){return new Promise((e,n)=>Rn.__awaiter(this,void 0,void 0,(function*(){let i=yield this.testService.getRTCBlob(this.screenRecord.recorder);if(!i&&this.screenRecord.recordRTCBlob&&(i=this.screenRecord.recordRTCBlob),i&&i.type){"submit"!==t&&this.screenRecord.startScreenRecording();const s=this.testService.generateProctorFileName("screen");this.testService.uploadToS3WithRetry(s,i,"submit"===t?1:2,"proctoring").then(t=>{e(!0)}).catch(l=>{"submit"===t&&(this.screenRecord.recordRTCBlob=i),this.onErrorProcAVUpload(s,i,t).then(()=>{e(!1)}).catch(t=>{n(t)})})}else n("Display access error!")})))}uploadProctoredVideo(t){return new Promise((e,n)=>Rn.__awaiter(this,void 0,void 0,(function*(){let i=yield this.testService.getRTCBlob(this.recordRTCIns);if(!i&&this.recordRTCBlob&&(i=this.recordRTCBlob),i&&i.type){"submit"!==t&&this.startVideoRecording();const s=this.globalService.convert_IST_TO_EPOCH(this.testService.testData.instanceTime),l=this.testService.userData.user_id+"/remote-proctoring/"+this.testService.schoolData.school_id+"/"+this.testService.testData.c_id+"/"+this.testService.testData.t_id+"/"+this.testService.userData.user_id+"/"+this.testService.testData.attempt_no+"/"+`videos/video_${s}-curr_time-${this.testService.testData.t_counter}`;this.testService.uploadToS3WithRetry(l,i,"submit"===t?1:2,"proctoring").then(t=>{this.testService.testData.c_modules.audio_analysis&&this.testService.sendFileForAudioAnalysis(l).subscribe(t=>{}),e(!0)}).catch(s=>{"submit"===t&&(this.recordRTCBlob=i),this.onErrorProcAVUpload(l,i,t).then(()=>{e(!1)}).catch(t=>{n(t)})})}else n("Camera access error!")})))}startAudioRecording(){return Rn.__awaiter(this,void 0,void 0,(function*(){const t=yield this.testService.getRecordRTC(),e=yield this.getMediaStream().catch(t=>{this.errorAlert({header:"Error",summary:"Error ocurred!",detail:`\n                    <p>You will be moved out of the test now.</p>\n                    <p>Error: ${t}</p>\n                    `},!0)});e&&(this.recordRTCIns||(this.recordRTCIns=t(e,{mimeType:"audio/webm",disableLogs:!0})),this.recordRTCIns.startRecording())}))}uploadProctoredAudio(t){return new Promise((e,n)=>Rn.__awaiter(this,void 0,void 0,(function*(){let i=yield this.testService.getRTCBlob(this.recordRTCIns);if(!i&&this.recordRTCBlob&&(i=this.recordRTCBlob),i&&i.type){"submit"!==t&&this.startAudioRecording();const s=this.globalService.convert_IST_TO_EPOCH(this.testService.testData.instanceTime),l=this.testService.userData.user_id+"/remote-proctoring/"+this.testService.schoolData.school_id+"/"+this.testService.testData.c_id+"/"+this.testService.testData.t_id+"/"+this.testService.userData.user_id+"/"+this.testService.testData.attempt_no+"/"+`audios/audio_${s}-curr_time-${this.testService.testData.t_counter}`;this.testService.uploadToS3WithRetry(l,i,"submit"===t?1:2,"proctoring").then(t=>{e(!0)}).catch(s=>{"submit"===t&&(this.recordRTCBlob=i),this.onErrorProcAVUpload(l,i,t).then(()=>{e(!1)}).catch(t=>{n(t)})})}else n("Microphone access error!")})))}onErrorProcImgUpload(t,e,n){return new Promise((i,s)=>{this.testService.getProcDB().then(l=>{this.testService.putProcImgInDB(l,t,e).then(()=>{this.testService.getProcImgCountInDB(l).then(t=>{t>=this.testService.PROC_DB_CONFIG.maxImgCount?this.isReconnecting||"nonsubmit"!==n?i(!0):this.showReconnectDialog(()=>new Promise((t,e)=>{this.uploadAllProcImgQueue().then(()=>{t(!0)}).catch(t=>{e(t)})})).then(()=>{i(!0)}).catch(t=>{s(t)}):i(!0)}).catch(t=>{s(t)})}).catch(t=>{s(t)})}).catch(t=>{s(t)})})}uploadProctoredImage(t,e){return new Promise((n,i)=>Rn.__awaiter(this,void 0,void 0,(function*(){if(this.mediaStream){const s=document.createElement("canvas"),l=this.procVideo.nativeElement.videoHeight;s.width=this.procVideo.nativeElement.videoWidth,s.height=l,s.getContext("2d").drawImage(this.procVideo.nativeElement,0,0),s.toBlob(s=>{if(s&&s.type){const l=this.globalService.convert_IST_TO_EPOCH(this.testService.testData.instanceTime),a=this.testService.userData.user_id+"/remote-proctoring/"+this.testService.schoolData.school_id+"/"+this.testService.testData.c_id+"/"+this.testService.testData.t_id+"/"+this.testService.userData.user_id+"/"+this.testService.testData.attempt_no+"/images/"+(e||`image_${l}-curr_time-${this.testService.testData.t_counter}`);this.testService.uploadToS3WithRetry(a,s,"submit"===t?1:2,"proctoring").then(t=>{n(!0)}).catch(e=>{this.onErrorProcImgUpload(a,s,t).then(()=>{n(!1)}).catch(t=>{i(t)})})}else i("Camera access error!")},"image/jpeg")}else i("Camera access error!")})))}mediaUploadErrAlert(t){const e={header:"Warning",summary:"Unstable internet connection!",detail:"\n            <p>You will be moved out of the test now.</p>\n            <p>Looks like you have issue with internet connection or some firewall issues.</p>\n            <p>Please contact your adminstrator.</p>\n            "};if(t&&"string"==typeof t)switch(t){case"reconnect failed":e.summary="Internet connection issue not yet resolved!";break;case"Camera access error!":e.summary="Could not access your camera!",e.detail="\n                    <p>You will be moved out of the test now.</p>\n                    <p>Please check your camera.</p>\n                    ";break;case"Microphone access error!":e.summary="Could not access your Microphone!",e.detail="\n                    <p>You will be moved out of the test now.</p>\n                    <p>Please check your Microphone.</p>\n                    ";break;case"Live Video Access Error!":e.summary="Could not start Live Video!",e.detail="\n                    <p>You will be moved out of the test now.</p>\n                    <p>Please contact your adminstrator.</p>\n                    ";break;case"Live Screen Share Access Error!":e.summary="Could not start Live screen share session!",e.detail="\n                    <p>You will be moved out of the test now.</p>\n                    <p>Please contact your adminstrator.</p>\n                    "}this.errorAlert(e,!0)}errorAlert(t,e=!1,n=10){this.output.emit({type:"show-alert",data:t}),e&&setTimeout(()=>{this.output.emit({type:"pause-test"})},1e3*n)}showReconnectDialog(t){return new Promise((e,n)=>{if(this.isReconnecting=!0,this.reconnectCount+=1,this.reconnectCount>this.testService.PROC_ERR_CONFIG.reconnectMaxCount)n("Max. reconnect tries exceeded");else{this.output.emit({type:"pause-tab-switch"}),this.output.emit({type:"pause-timer"});const i=setTimeout(()=>{this.isReconnecting=!1,this.errorAlert({header:"Warning",summary:"Time limit exceeded!",detail:"\n                                <p>You will be moved out of the test now.</p>\n                                <p>Since, you have exceeded the allowed time to resolve the internet connection issue.</p>\n                                "},!0)},1e3*this.testService.PROC_ERR_CONFIG.reconnectInterval),s=()=>{clearTimeout(i),this.errorAlert({header:"Warning!",summary:"Please wait!",detail:"Saving your test progress. Please wait..."}),this.testService.testNetworkStatus().then(i=>{i?t().then(()=>{this.isReconnecting=!1,this.output.emit({type:"resume-tab-switch"}),this.output.emit({type:"resume-timer"}),this.output.emit({type:"Close Dialog"}),e(!0)}).catch(t=>{this.isReconnecting=!1,n("reconnect failed")}):(this.isReconnecting=!1,n("reconnect failed"))})};this.errorAlert({header:"Warning",summary:"Looks like your internet connection is disconnected. Some data could not be saved.",detail:"\n                            <p>Please check your internet connection and Try reconnecting.</p>\n                            <p>Please don't close the window. You will lose your test progress!</p>\n                            <p>You have 5 minutes to resolve the issue.</p>\n                            ",showCountDown:this.testService.PROC_ERR_CONFIG.reconnectInterval,acceptButton:{btnName:"Try Reconnect",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:()=>{s()},id:"tt-playground-alert-accept"}})}})}toggleDisplay(){const t=this.alertBadge.nativeElement;"Hide video"===this.togglerLabel?(this.renderer.setStyle(t,"top","-1px"),this.renderer.setStyle(t,"right","23px"),this.renderer.setStyle(this.procVideo.nativeElement,"height","0px"),this.renderer.setStyle(this.procVideo.nativeElement,"width","0px"),this.renderer.setStyle(this.procVideo.nativeElement,"border","none"),this.togglerLabel="Show video"):(this.renderer.setStyle(t,"top","-10px"),this.renderer.setStyle(t,"right","-17px"),this.renderer.setStyle(this.procVideo.nativeElement,"height",this.videoHeight+"px"),this.renderer.setStyle(this.procVideo.nativeElement,"width",this.videoWidth+"px"),this.renderer.removeStyle(this.procVideo.nativeElement,"border"),this.togglerLabel="Hide video")}setupDragElement(){const t=this.procCont.nativeElement;t.oncontextmenu=t=>(t.preventDefault(),!1),window.innerWidth<this.mobileBreakPoint?(this.renderer.setStyle(t,"top","0px"),this.renderer.setStyle(t,"left",(window.innerWidth-t.offsetWidth)/2+"px")):(this.renderer.setStyle(t,"top",window.innerHeight-t.offsetHeight+"px"),this.renderer.setStyle(t,"left","0px")),t.onmousedown=this.dragMouseDown.bind(this),window.onresize=this.setupDragElement.bind(this)}dragMouseDown(t){this.renderer.setStyle(this.procCont.nativeElement,"cursor","grabbing"),t.preventDefault(),this.currX=t.clientX,this.currY=t.clientY,document.onmouseup=this.closeDragElement.bind(this),document.onmouseleave=this.closeDragElement.bind(this),document.onmousemove=this.elementDrag.bind(this)}elementDrag(t){t.preventDefault(),this.prevX=this.currX-t.clientX,this.prevY=this.currY-t.clientY,this.currX=t.clientX,this.currY=t.clientY;const e=this.procCont.nativeElement;let n=e.offsetTop-this.prevY;n>=0?n+e.offsetHeight>window.innerHeight&&(n=window.innerHeight-e.offsetHeight):n=0,this.renderer.setStyle(e,"top",n+"px");let i=e.offsetLeft-this.prevX;i>=0?i+e.offsetWidth>window.innerWidth&&(i=window.innerWidth-e.offsetWidth):i=0,this.renderer.setStyle(e,"left",i+"px")}closeDragElement(){document.onmouseup=null,document.onmouseleave=null,document.onmousemove=null,this.renderer.setStyle(this.procCont.nativeElement,"cursor","grab")}estimatePoseUsingPosenet(){return Rn.__awaiter(this,void 0,void 0,(function*(){if(this.mediaStream){const t=this.procCanvas.nativeElement.getContext("2d");t.clearRect(0,0,this.videoWidth,this.videoHeight),this.testService.POSENET_CONFIG.showVideo&&(t.save(),t.scale(-1,1),t.translate(-this.videoWidth,0),t.drawImage(this.procVideo.nativeElement,0,0,this.videoWidth,this.videoHeight),t.restore());const e=yield this.getPosenet(),n=yield e.estimatePoses(this.procVideo.nativeElement,{flipHorizontal:this.testService.POSENET_CONFIG.flipPoseHorizontal,decodingMethod:this.testService.POSENET_CONFIG.decodingMethod,maxDetections:this.testService.POSENET_CONFIG.maxPoseDetections,scoreThreshold:this.testService.POSENET_CONFIG.minPartConfidence,nmsRadius:this.testService.POSENET_CONFIG.nmsRadius});let i,s=0,l="ok";n.forEach(({score:e,keypoints:n})=>{e>=this.testService.POSENET_CONFIG.minPoseConfidence&&(s+=1,l=this.testService.evaluateBodyParts(n,this.testService.POSENET_CONFIG.minPartConfidence,t,this.testService.POSENET_CONFIG.showPoints),i=n)}),s<1?l=n&&n.length?"lq":"np":s>1?l="mp":1===s&&i&&i.length&&(this.checkLiveness(i)||(l="fs")),this.estimationHandler(l)}}))}estimatePoseUsingBlazeFace(){return Rn.__awaiter(this,void 0,void 0,(function*(){if(this.mediaStream){let e="ok";try{const t=yield this.getBlazeFace(),n=yield t.estimateFaces(this.procVideo.nativeElement,!1);n&&n.length?1===n.length?n.forEach(t=>{e=t.probability&&t.probability[0]&&t.probability[0]>=this.testService.BLAZEFACE_CONFIG.minPoseConfidence&&t.landmarks&&t.landmarks.length&&t.landmarks.length>5?this.testService.estimatePoseForBlazeFace(t.landmarks):"lq"}):e="mp":e="np"}catch(t){}return this.estimationHandler(e)}}))}compareFaceUsingFaceApiV2(){const t=document.createElement("canvas"),e=this.procVideo.nativeElement.videoHeight;t.width=this.procVideo.nativeElement.videoWidth,t.height=e,t.getContext("2d").drawImage(this.procVideo.nativeElement,0,0),t.toBlob(e=>{if(e&&e.type)if(this.faceVerificationService.isRunnerLocal){const n={targetImage:t.toDataURL(),s3FileUrl:""};this.faceVerificationService.verifyFace(n,"at-interval").then(t=>{t&&t.estimate&&this.uploadFaceComparisonProctoredImage(e,t.estimate)})}else{const t=this.testService.generateProctorFileName("image");this.testService.uploadToS3WithRetry(t,e,2,"proctoring").then(e=>{this.faceVerificationService.verifyFace({targetImage:"",s3FileUrl:t},"at-interval").then(t=>{})}).catch(n=>{this.onErrorProcImgUpload(t,e,"nonsubmit").then(()=>{}).catch(t=>{})})}},"image/jpeg")}uploadFaceComparisonProctoredImage(t,e){const n=this.testService.generateProctorFileName("image")+"__"+e;this.testService.uploadToS3WithRetry(n,t,2,"proctoring").then(t=>{}).catch(e=>{this.onErrorProcImgUpload(n,t,"nonsubmit").then(()=>{}).catch(t=>{})})}compareFaceUsingFaceApi(){return Rn.__awaiter(this,void 0,void 0,(function*(){if(this.mediaStream&&this.testService.baseImage&&this.testService.baseImage.length){let e="";const n=yield this.testService.getFaceApi();try{const t=yield n.detectAllFaces(this.procVideo.nativeElement,new n.TinyFaceDetectorOptions({inputSize:this.testService.FACEAPI_CONFIG.inputSize,scoreThreshold:this.testService.FACEAPI_CONFIG.scoreThreshold})).withFaceLandmarks(!0).withFaceDescriptors();if(t&&t.length)if(t.length>1)e="mf-v2";else{let i=!1;const s=yield this.getBaseImageDescriptors();if(s&&s.length){let l=new n.FaceMatcher(s);t.forEach(({descriptor:t})=>{const e=l.findBestMatch(t);e&&"unknown"!==e.label&&e.distance<this.testService.FACEAPI_CONFIG.distance&&(i=!0)}),i||(e="fnm-v2")}}else e="nf-v2"}catch(t){e=""}this.handleFaceComparisonEstimate(e)}}))}getBaseImageDescriptors(){return Rn.__awaiter(this,void 0,void 0,(function*(){if(!this.baseImageDescriptors){const t=yield this.testService.getFaceApi();let e=document.createElement("img");e.src=this.testService.baseImage,this.baseImageDescriptors=yield t.detectAllFaces(e,new t.TinyFaceDetectorOptions({inputSize:this.testService.FACEAPI_CONFIG.inputSize,scoreThreshold:this.testService.FACEAPI_CONFIG.scoreThreshold})).withFaceLandmarks(!0).withFaceDescriptors()}return this.baseImageDescriptors}))}handleFaceComparisonEstimate(t){const e=this.globalService.convert_IST_TO_EPOCH(this.testService.testData.instanceTime);this.uploadProctoredImage("nonsubmit",t?`image_${e}-curr_time-${this.testService.testData.t_counter}__${t}`:"").catch(t=>{this.mediaUploadErrAlert(t)})}estimationHandler(t){const e=this.testService.estimationHandler(t);if(this.data=e,"ok"!==t){const e=this.globalService.convert_IST_TO_EPOCH(this.testService.testData.instanceTime);this.uploadProctoredImage("nonsubmit",`image_${e}-curr_time-${this.testService.testData.t_counter}__${t}`).catch(t=>{this.mediaUploadErrAlert(t)})}else if(this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.manual_proctoring){const e=this.globalService.convert_IST_TO_EPOCH(this.testService.testData.instanceTime);this.uploadProctoredImage("nonsubmit",`image_${e}-curr_time-${this.testService.testData.t_counter}__${t}`).catch(t=>{this.mediaUploadErrAlert(t)})}this.checkMaxAllowedAlerts(t),window.innerWidth<this.mobileBreakPoint&&setTimeout(()=>{this.setupDragElement()},500)}getPosenet(){return new Promise((t,e)=>Rn.__awaiter(this,void 0,void 0,(function*(){this.posenetRef||(this.posenetRef=yield this.testService.getPosenet()),t(this.posenetRef)})))}getBlazeFace(){return new Promise((t,e)=>Rn.__awaiter(this,void 0,void 0,(function*(){this.blazeFace||(this.blazeFace=yield this.testService.getBlazeFace()),t(this.blazeFace)})))}getMediaStream(){return new Promise((t,e)=>Rn.__awaiter(this,void 0,void 0,(function*(){this.mediaStream?t(this.mediaStream):this.testService.getUserCamera().then(e=>{this.mediaStream=e;const n=this.mediaStream.getTracks(),i=()=>{this.errorAlert({header:"Error",summary:"Could not access your Camera or Microphone!",detail:"\n                                <p>You will be moved out of the test now.</p>\n                                <p>Error: Camera or mic has been stopped</p>\n                                "},!0)};n.forEach(t=>{t&&("ended"===t.readyState&&i(),t.onended=()=>{i()})}),t(this.mediaStream)}).catch(t=>{e(t)})})))}sentTestSubmit(){this.testService.testData.submit_proctoring=!0,this.testService.testData.isForceSubmit||this.output.emit({type:"submit-test"})}sendTestSubmitRetry(){this.testService.testData.submit_proctoring=!1,this.output.emit({type:"retry-submit-test"})}showAlertInDialog(t,e,n,i){const s={header:"Suspicious activity count: "+e,dialogHeaderStyle:{"background-color":"",color:""},summary:"Suspicious activity!",detail:`<p>${i}</p>\n                <p>Please do follow:</p>\n                <ul>\n                    <li>Have proper lighting.</li>\n                    <li>Sit ahead of a plain background.</li>\n                    <li>Sit upright facing the camera.</li>\n                </ul>`,acceptButton:{btnName:"Okay",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:()=>{},id:"tt-playground-alert-accept"}};switch(n&&(s.header+="/"+n,s.summary=`<p>Only <b>${n-e}</b> suspicious alert/s left!</p>`,s.detail="<p><b>You will be moved out of the test, if you exceed the limit.</b></p>"+s.detail,e>=n&&(s.summary="Exceeded Max. allowed suspicious activity!",s.detail="Since you have exceeded the Max. allowed suspicious activity,\n                    you will be moved out of the test!")),t){case"lq":case"np":case"mp":s.dialogHeaderStyle["background-color"]="var(--progressRed)",s.dialogHeaderStyle.color="var(--three)";break;case"d":s.dialogHeaderStyle["background-color"]="var(--eighteen)",s.dialogHeaderStyle.color="var(--three)";break;default:s.dialogHeaderStyle["background-color"]="var(--three)",s.dialogHeaderStyle.color="var(--fiftyfour)"}this.errorAlert(s)}checkMaxAllowedAlerts(t){"ok"!==t&&"fs"!==t&&this.testService.testData&&this.testService.testData.client_data&&(this.alertCount+=1,this.testService.testData.client_data.proctoring_alerts=this.alertCount),"fs"===t&&this.testService.testData&&this.testService.testData.client_data&&(this.testService.testData.client_data.liveness_alerts||(this.testService.testData.client_data.liveness_alerts=0),this.testService.testData.client_data.liveness_alerts+=1),this.testService.testData&&this.testService.testData.client_data&&(this.testService.testData.client_data.total_proc_img||(this.testService.testData.client_data.total_proc_img=0),this.testService.testData.client_data.total_proc_img+=1),this.maxAlertCount&&(("ok"!==t||this.alertCount>=this.maxAlertCount)&&this.showAlertInDialog(t,this.alertCount,this.maxAlertCount,this.data.msg),this.alertCount>=this.maxAlertCount&&(this.output.emit({type:"max-proctoring-alert-exceeded"}),this.maxAlertCount=0))}uploadProcImgQueue(){return new Promise((t,e)=>{this.retryingImgUpload?t(!1):this.testService.getProcDB().then(n=>{this.testService.getAllProcImgKeysInDB(n).then(i=>{if(i&&i.length){const s=i[0],l=()=>{this.retryingImgUpload=s},a=()=>{this.retryingImgUpload===s&&(this.retryingImgUpload=void 0)};this.testService.getProcImgInDB(n,s).then(i=>{i?(l(),this.testService.uploadToS3WithRetry(s,i,2,"proctoring").then(()=>{a(),this.testService.deleteProcImgInDB(n,s).then(()=>{t(!0)}).catch(t=>{e(t)})}).catch(t=>{a(),e(t)})):t(!0)}).catch(t=>{e(t)})}else t(!0)}).catch(t=>{e(t)})}).catch(t=>{e(t)})})}uploadAllProcImgQueue(){return new Promise((t,e)=>{this.testService.getProcDB().then(n=>{this.testService.getAllProcImgKeysInDB(n).then(i=>Rn.__awaiter(this,void 0,void 0,(function*(){if(i&&i.length){const s=t=>new Promise((e,i)=>{const s=()=>{this.retryingImgUpload=t},l=()=>{this.retryingImgUpload===t&&(this.retryingImgUpload=void 0)};this.testService.getProcImgInDB(n,t).then(a=>{a?(s(),this.testService.uploadToS3WithRetry(t,a,2,"proctoring").then(()=>{l(),this.testService.deleteProcImgInDB(n,t).then(()=>{e(!0)}).catch(t=>{i(t)})}).catch(t=>{l(),i(t)})):e(!0)}).catch(t=>{i(t)})});let l=!0;for(const t of i)if(t&&!(yield s(t).catch(t=>{e(t)}))){l=!1;break}t(l)}else t(!0)}))).catch(t=>{e(t)})}).catch(e=>{t(!0)})})}checkLiveness(t){let e={nose:{},leftEye:{},rightEye:{}};try{if(t.forEach(t=>{e[t.part]&&(e[t.part]=t.position,e[t.part].score=t.score)}),e.nose&&e.leftEye&&e.rightEye)if(this.faceLandMarks&&this.faceLandMarks.length>=10){let t=0;for(let n of this.faceLandMarks)n.nose&&n.leftEye&&n.rightEye&&Math.abs(n.nose.x-e.nose.x)<.5&&Math.abs(n.nose.y-e.nose.y)<.2&&Math.abs(n.leftEye.x-e.leftEye.x)<.5&&Math.abs(n.leftEye.y-e.leftEye.y)<.2&&Math.abs(n.rightEye.x-e.rightEye.x)<.5&&Math.abs(n.rightEye.y-e.rightEye.y)<.2&&t++;if(this.faceLandMarks.shift(),this.faceLandMarks.push(e),t>5)return!1}else this.faceLandMarks.push(e)}catch(n){}return!0}}var es=i.nb({encapsulation:0,styles:[[".proc-cont[_ngcontent-%COMP%]{display:none;flex-direction:column;position:fixed;left:0;padding:6px;z-index:10;cursor:-webkit-grab;cursor:grab;min-width:190px}.proc-alert-cont[_ngcontent-%COMP%]{padding:6px 0;width:100%}.proc-alert[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:24px;border-radius:3px;border:1px solid;padding:4px}.proc-alert.severity-success[_ngcontent-%COMP%]{border:none}.alert-count[_ngcontent-%COMP%]{position:relative;width:190px}.alert-count-badge[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-17px;min-width:20px;min-height:20px;display:flex;justify-content:center;align-items:center;background-color:var(--progressRed);color:var(--three);border-radius:20px;padding:2px;border:solid 1px var(--progressRed);transition:all .5s}.alert-count-badge[alertCount='0'][_ngcontent-%COMP%]{display:none}.proc-video[_ngcontent-%COMP%]{border:2px solid var(--greycardborder);max-width:190px;max-height:190px;transition:all .5s}.proc-canvas[_ngcontent-%COMP%]{display:none}.toggler-cont[_ngcontent-%COMP%]{display:none;justify-content:center}.toggler[_ngcontent-%COMP%]{background-color:var(--thirtyone);color:var(--fourtynine);padding:2px;border-radius:3px;border:1px solid var(--eighteen);cursor:pointer}.severity-error[_ngcontent-%COMP%]{color:var(--three);border-color:var(--nine);background-color:var(--progressRed)}.severity-warn[_ngcontent-%COMP%]{color:var(--three);border-color:var(--twentythree);background-color:var(--eighteen)}.severity-success[_ngcontent-%COMP%]{color:var(--one);border-color:var(--one)}.inner[_ngcontent-%COMP%]{width:100px;height:15%;position:absolute;top:0;left:10px;z-index:10}.proc-cont-none[_ngcontent-%COMP%]{display:none}@media screen and (max-width:992px){.proc-cont[_ngcontent-%COMP%]{align-items:center;cursor:unset}.toggler-cont[_ngcontent-%COMP%]{display:flex}}@media screen and (max-width:480px){.proc-video[_ngcontent-%COMP%]{border:2px solid var(--greycardborder);max-width:165px;max-height:190px;transition:all .5s;margin-left:0,}.toggler[_ngcontent-%COMP%]{background-color:var(--thirtyone);color:var(--fourtynine);padding:2px;border-radius:3px;border:1px solid var(--eighteen);cursor:pointer;margin-right:0}}"]],data:{}});function ns(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,7,"div",[["class","proc-alert-cont"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,6,"p",[["class","proc-alert font14"]],null,null,null,null,null)),i.ob(2,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(3,{"severity-error":0,"severity-warn":1,"severity-success":2}),(t()(),i.pb(4,0,null,null,2,"i",[],null,null,null,null,null)),i.ob(5,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{ngClass:[0,"ngClass"]},null),i.Cb(6,{"icon-alert-o":0}),(t()(),i.Hb(7,null,[" "," "]))],(function(t,e){var n=e.component,i=t(e,3,0,"error"===n.data.severity,"warn"===n.data.severity,"success"===n.data.severity);t(e,2,0,"proc-alert font14",i);var s=t(e,6,0,"error"===n.data.severity||"warn"===n.data.severity);t(e,5,0,s)}),(function(t,e){t(e,7,0,e.component.data.msg)}))}function is(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","alert-count"]],null,null,null,null,null)),(t()(),i.pb(1,0,[[2,0],["alertBadge",1]],null,1,"div",[["class","alert-count-badge font14"]],[[8,"title",0],[1,"alertCount",0]],null,null,null,null)),(t()(),i.Hb(2,null,[" "," "," "]))],null,(function(t,e){var n=e.component;t(e,1,0,n.alertCountMsg,n.alertCount),t(e,2,0,n.alertCount,n.maxAlertCount?"/"+n.maxAlertCount:"")}))}function ss(t){return i.Jb(0,[i.Fb(402653184,1,{procCont:0}),i.Fb(671088640,2,{alertBadge:0}),i.Fb(402653184,3,{procVideo:0}),i.Fb(402653184,4,{procCanvas:0}),i.Fb(402653184,5,{toggleCont:0}),(t()(),i.pb(5,0,[[1,0],["procCont",1]],null,12,"div",[["class","proc-cont"]],[[8,"title",0]],null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,ns)),i.ob(7,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,is)),i.ob(9,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(10,0,null,null,0,"div",[["id","jaas-container"],["style","height:0px; width: 0px;"]],null,null,null,null,null)),(t()(),i.pb(11,0,[[3,0],["procVideo",1]],null,2,"video",[["class","proc-video"],["height","143"],["width","190"]],null,null,null,null,null)),i.ob(12,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(13,{"severity-error":0,"severity-warn":1,"severity-success":2}),(t()(),i.pb(14,0,[[4,0],["procCanvas",1]],null,0,"canvas",[["class","proc-canvas"],["height","143"],["width","190"]],null,null,null,null,null)),(t()(),i.pb(15,0,[[5,0],["toggleCont",1]],null,2,"div",[["class","toggler-cont"]],null,null,null,null,null)),(t()(),i.pb(16,0,null,null,1,"a",[["class","toggler font14"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.toggleDisplay()&&i),i}),null,null)),(t()(),i.Hb(17,null,[" "," "]))],(function(t,e){var n=e.component;t(e,7,0,!n.disableAlert),t(e,9,0,!n.disableAlert);var i=t(e,13,0,"error"===n.data.severity&&!n.disableAlert,"warn"===n.data.severity&&!n.disableAlert,"success"===n.data.severity);t(e,12,0,"proc-video",i)}),(function(t,e){var n=e.component;t(e,5,0,n.hoverMsg),t(e,17,0,n.togglerLabel)}))}var ls=n("m/5E"),as=i.nb({encapsulation:0,styles:[['.testtaking-playground[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;position:absolute}.tt-header[_ngcontent-%COMP%]{width:100%;box-shadow:0 3px 6px 0 #00000038}.sections[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid var(--fourty)}.question-answer[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:hidden}.resizer-content-right[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow:hidden}.answer-content[_ngcontent-%COMP%]{height:100%;overflow:auto}.alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-evenly;padding:6px 14px;color:var(--fiftyfour)}.alert-container-preview[_ngcontent-%COMP%]{height:80%;display:flex;flex-direction:column;justify-content:normal;padding:6px 14px;color:var(--fiftyfour)}.previewPDF[_ngcontent-%COMP%]{display:block}.callNotification[_ngcontent-%COMP%]{background:#f4f4f4;position:absolute;bottom:8px;left:14rem;width:250px;height:150px;border-radius:1rem;display:flex;flex-direction:column;justify-content:space-around;z-index:97}.staffName[_ngcontent-%COMP%]{text-align:center;padding-top:12px}.popupButtons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%}.faceCam[_ngcontent-%COMP%]{position:absolute;left:0;top:0;z-index:999;height:182px;width:242px}.faceCam-center[_ngcontent-%COMP%]{top:2%;left:25%;width:50%;height:160px;position:fixed;z-index:999}.faceCam-none[_ngcontent-%COMP%]{display:none}.faceCam-block[_ngcontent-%COMP%]{display:block}.content-center[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:center;align-items:center;background-color:#eee}.pulse[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.pulse[_ngcontent-%COMP%]{cursor:pointer;height:50px;width:50px;background-color:#fff;border-radius:50%}.pulseCutCall[_ngcontent-%COMP%]{cursor:pointer;height:50px;width:50px;border-radius:50%;background-color:#fff}.callImage[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:60%}.pulse[_ngcontent-%COMP%]::before{content:"";position:absolute;width:50%;height:70%;top:40%;left:0;border:1px solid #41a857;border-radius:50%;-webkit-animation:1s linear infinite pulse;animation:1s linear infinite pulse}.pulseCutCall[_ngcontent-%COMP%]::before{content:"";position:absolute;width:50%;height:70%;top:40%;right:0;border:1px solid red;border-radius:50%;-webkit-animation:1s linear infinite pulse;animation:1s linear infinite pulse}.pulse[_ngcontent-%COMP%]::after{content:"";position:absolute;width:50%;height:70%;top:40%;left:0;border:1px solid #41a857;border-radius:50%;-webkit-animation:1s linear .6s infinite pulse;animation:1s linear .6s infinite pulse}.pulseCutCall[_ngcontent-%COMP%]::after{content:"";position:absolute;width:50%;height:70%;top:40%;right:0;border:1px solid red;border-radius:50%;-webkit-animation:1s linear .6s infinite pulse;animation:1s linear .6s infinite pulse}@-webkit-keyframes pulse{0%{transform:scale(.5);opacity:0}50%{transform:scale(1);opacity:1}100%{transform:scale(1.3);opacity:0}}@keyframes pulse{0%{transform:scale(.5);opacity:0}50%{transform:scale(1);opacity:1}100%{transform:scale(1.3);opacity:0}}@-webkit-keyframes pulseCutCall{0%{transform:scale(.5);opacity:0}50%{transform:scale(1);opacity:1}100%{transform:scale(1.3);opacity:0}}@keyframes pulseCutCall{0%{transform:scale(.5);opacity:0}50%{transform:scale(1);opacity:1}100%{transform:scale(1.3);opacity:0}}.pdf[_ngcontent-%COMP%]{border:2px solid;height:97%;overflow:hidden}.image-preview[_ngcontent-%COMP%]{max-height:100%;max-width:100%}.image-container[_ngcontent-%COMP%]{width:100%;text-align:center}.pdf-container[_ngcontent-%COMP%]{width:100%}.preview-container[_ngcontent-%COMP%]{height:97%;padding:0 14px;display:flex;justify-content:center}.noselect[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.alert-detail-cont[_ngcontent-%COMP%], .alert-summary-cont[_ngcontent-%COMP%]{padding:6px 14px}.alert-countdown-cont[_ngcontent-%COMP%]{display:flex;justify-content:center}.alert-action-cont[_ngcontent-%COMP%]{padding:6px 14px;display:flex;justify-content:center}.alert-action-cont-form[_ngcontent-%COMP%]{flex-direction:column;justify-content:flex-start}.alert-accept[_ngcontent-%COMP%], .alert-reject[_ngcontent-%COMP%]{padding:4px}.hints-container[_ngcontent-%COMP%]{padding:6px 14px;max-height:180px;overflow:auto}.hint[_ngcontent-%COMP%]{padding:4px}.hint-action-cont[_ngcontent-%COMP%]{display:flex;padding:6px 14px;justify-content:space-evenly}.desktop-question-answer[_ngcontent-%COMP%], .mobile-question-answer[_ngcontent-%COMP%]{display:none}.mobile-block-cont[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;height:100%;background-color:#00000038;z-index:10}.mobile-sec-summ-cont[_ngcontent-%COMP%]{display:flex;justify-content:center;position:absolute;margin:auto;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;top:0;left:0;right:0;bottom:0}.alertText[_ngcontent-%COMP%]{color:red;padding-top:5px}@media print{.previewPDF[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:992px){.mobile-question-answer[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:auto}.testtaking-playground[_ngcontent-%COMP%]{height:auto}.tt-header[_ngcontent-%COMP%]{box-shadow:none}.callNotification[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;margin-top:-75px;margin-left:-125px;z-index:97}.faceCam[_ngcontent-%COMP%]{position:fixed;left:0;top:0;z-index:999;height:155px;width:165px;margin-left:67%;margin-top:5%}}@media screen and (min-width:993px){.desktop-question-answer[_ngcontent-%COMP%]{display:block}}@media screen and (min-device-width:0px) and (max-device-width:480px){.pdf[_ngcontent-%COMP%]{height:100%}.faceCam[_ngcontent-%COMP%]{position:fixed;left:0;top:0;z-index:999;height:155px;width:165px;margin-top:14%;margin-left:2%}}.disableAnswerContainer[_ngcontent-%COMP%]{pointer-events:none;-webkit-filter:blur(2px);filter:blur(2px)}.display-flex-center[_ngcontent-%COMP%]{padding-top:20px;display:flex;align-items:center;justify-content:center;padding-bottom:20px;height:350px}.text-bold[_ngcontent-%COMP%]{font-weight:700;color:var(--seven)}.hide-content-preview[_ngcontent-%COMP%]{text-align:center;margin-top:35%;font-size:x-large}.each-test-summary-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:4px}.test-summary-header[_ngcontent-%COMP%]{background-color:var(--tableHeader);text-align:center;color:var(--white);padding:6px 14px}.test-summary-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.each-test-summary[_ngcontent-%COMP%]{padding:6px 14px;border-bottom:1px solid var(--greycardborder)}.each-test-summary-value[_ngcontent-%COMP%]{font-weight:500}.alert-pad-reduce[_ngcontent-%COMP%]{padding-left:0}.faq-cont[_ngcontent-%COMP%]{display:flex;flex-direction:column}.faq-each[_ngcontent-%COMP%]{display:flex;padding:6px 14px;flex-direction:column}.faq-question[_ngcontent-%COMP%]{padding:4px;font-weight:500}.faq-answer[_ngcontent-%COMP%]{padding:4px}.faceCamname[_ngcontent-%COMP%]{padding-left:28%;margin-top:-13%;color:#fff}textarea[_ngcontent-%COMP%]{margin-left:10px;width:350px;resize:vertical;border:1px solid var(--fourtynine)}.marginLeftRight[_ngcontent-%COMP%]{margin-left:20%;margin-right:20%;margin-top:15px;cursor:pointer}']],data:{}});function rs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"testtaking-sections",[],null,[[null,"sectionsAction"],[null,"sectionUnlock"]],(function(t,e,n){var i=!0,s=t.component;return"sectionsAction"===e&&(i=!1!==s.sectionsActionHandle(n)&&i),"sectionUnlock"===e&&(i=!1!==s.sectionUnlock(n)&&i),i}),rt,et)),i.ob(1,573440,null,0,tt,[c.a,u.a],{selectedSection:[0,"selectedSection"],s_counter:[1,"s_counter"],updateInstruction:[2,"updateInstruction"],disableLock:[3,"disableLock"]},{sectionsAction:"sectionsAction",sectionUnlock:"sectionUnlock"})],(function(t,e){var n=e.component;t(e,1,0,n.current_q?n.current_q.secIndex:0,n.s_counter?n.s_counter:0,n.updateInstruction,n.disableLock)}),null)}function os(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"app-loader",[["style","position: absolute; top: 45%; left: 45%;"],["type","type3"]],null,null,null,ot.b,ot.a)),i.ob(1,114688,null,0,ut.a,[],{type:[0,"type"]},null)],(function(t,e){t(e,1,0,"type3")}),null)}function us(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","faceCamname"]],null,null,null,null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.component.staffName)}))}function cs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,19,"div",[["class","question-answer desktop-question-answer"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,14,"resize-divider",[["defaultSplit","40:60"]],null,null,null,ct.b,ct.a)),i.ob(2,4767744,null,0,dt.a,[i.C],{defaultSplit:[0,"defaultSplit"]},null),(t()(),i.pb(3,0,null,0,3,"content-left",[],null,null,null,ht.b,ht.a)),i.ob(4,49152,null,0,pt.a,[],null,null),(t()(),i.pb(5,0,null,0,1,"testtaking-question",[],null,[[null,"output"]],(function(t,e,n){var i=!0;return"output"===e&&(i=!1!==t.component.questionAnswerActionHandle(n)&&i),i}),be,Vt)),i.ob(6,573440,null,0,$t,[c.a],{question:[0,"question"]},{output:"output"}),(t()(),i.pb(7,0,null,1,8,"content-right",[],null,null,null,ve.b,ve.a)),i.ob(8,49152,null,0,fe.a,[],null,null),(t()(),i.pb(9,0,null,0,6,"div",[["class","resizer-content-right"]],null,null,null,null,null)),(t()(),i.pb(10,0,null,null,2,"div",[["class","answer-content"]],null,null,null,null,null)),(t()(),i.pb(11,0,null,null,1,"testtaking-answer",[],null,[[null,"answerAction"]],(function(t,e,n){var i=!0;return"answerAction"===e&&(i=!1!==t.component.questionAnswerActionHandle(n)&&i),i}),Cn,sn)),i.ob(12,573440,null,0,nn,[c.a],{question:[0,"question"],doAction:[1,"doAction"]},{answerAction:"answerAction"}),(t()(),i.pb(13,0,null,null,2,"div",[["class","answer-footer"]],null,null,null,null,null)),(t()(),i.pb(14,0,null,null,1,"testtaking-footer",[],null,[[null,"footerAction"]],(function(t,e,n){var i=!0;return"footerAction"===e&&(i=!1!==t.component.footerActionHandle(n)&&i),i}),En,In)),i.ob(15,573440,null,0,qn,[c.a],{question:[0,"question"],selectedSection:[1,"selectedSection"],disableSubmit:[2,"disableSubmit"]},{footerAction:"footerAction"}),(t()(),i.pb(16,0,null,null,3,"side-menu",[["defaultState","open"],["position","right"],["width","226px"]],null,null,null,Hn,An)),i.ob(17,4243456,null,0,On,[i.C],{position:[0,"position"],width:[1,"width"],defaultState:[2,"defaultState"]},null),(t()(),i.pb(18,0,null,0,1,"testtaking-section-summary",[],null,[[null,"sectionSummaryAction"]],(function(t,e,n){var i=!0;return"sectionSummaryAction"===e&&(i=!1!==t.component.sectionSummaryActionHandle(n)&&i),i}),X,z)),i.ob(19,638976,null,0,H,[c.a],{disableSubmit:[0,"disableSubmit"],question:[1,"question"],secIndex:[2,"secIndex"],trigger:[3,"trigger"]},{sectionSummaryAction:"sectionSummaryAction"})],(function(t,e){var n=e.component;t(e,2,0,"40:60"),t(e,6,0,n.current_q),t(e,12,0,n.current_q,n.current_q?n.current_q.doAction:""),t(e,15,0,n.current_q,n.current_q?n.current_q.secIndex:0,n.disableSubmit),t(e,17,0,"right","226px","open"),t(e,19,0,n.disableSubmit,n.current_q,n.current_q.secIndex,n.triggerQuestionCount)}),null)}function ds(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,4,"div",[["class","mobile-block-cont"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.closeMobileSummary(n)&&i),i}),null,null)),(t()(),i.pb(1,0,null,null,3,"div",[["class","mobile-sec-summ-cont"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,2,"div",[["class","mob-sec-sum-card"]],null,null,null,null,null)),(t()(),i.pb(3,0,null,null,1,"testtaking-section-summary",[],null,[[null,"sectionSummaryAction"]],(function(t,e,n){var i=!0;return"sectionSummaryAction"===e&&(i=!1!==t.component.sectionSummaryActionHandle(n)&&i),i}),X,z)),i.ob(4,638976,null,0,H,[c.a],{showActions:[0,"showActions"],question:[1,"question"],secIndex:[2,"secIndex"],trigger:[3,"trigger"]},{sectionSummaryAction:"sectionSummaryAction"})],(function(t,e){var n=e.component;t(e,4,0,!1,n.current_q,n.current_q.secIndex,n.triggerQuestionCount)}),null)}function hs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,11,"div",[["class","question-answer mobile-question-answer"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,2,"div",[["class","m-question-container"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,1,"testtaking-question",[],null,[[null,"output"]],(function(t,e,n){var i=!0;return"output"===e&&(i=!1!==t.component.questionAnswerActionHandle(n)&&i),i}),be,Vt)),i.ob(3,573440,null,0,$t,[c.a],{question:[0,"question"]},{output:"output"}),(t()(),i.pb(4,0,null,null,2,"div",[["class","m-answer-container"]],null,null,null,null,null)),(t()(),i.pb(5,0,null,null,1,"testtaking-answer",[],null,[[null,"answerAction"]],(function(t,e,n){var i=!0;return"answerAction"===e&&(i=!1!==t.component.questionAnswerActionHandle(n)&&i),i}),Cn,sn)),i.ob(6,573440,null,0,nn,[c.a],{question:[0,"question"],doAction:[1,"doAction"]},{answerAction:"answerAction"}),(t()(),i.pb(7,0,null,null,2,"div",[["class","m-footer-container"]],null,null,null,null,null)),(t()(),i.pb(8,0,null,null,1,"testtaking-footer",[],null,[[null,"footerAction"]],(function(t,e,n){var i=!0;return"footerAction"===e&&(i=!1!==t.component.footerActionHandle(n)&&i),i}),En,In)),i.ob(9,573440,null,0,qn,[c.a],{question:[0,"question"],selectedSection:[1,"selectedSection"],disableSubmit:[2,"disableSubmit"]},{footerAction:"footerAction"}),(t()(),i.gb(16777216,null,null,1,null,ds)),i.ob(11,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,3,0,n.current_q),t(e,6,0,n.current_q,n.current_q?n.current_q.doAction:""),t(e,9,0,n.current_q,n.current_q?n.current_q.secIndex:0,n.disableSubmit),t(e,11,0,n.showMobileSummary)}),null)}function ps(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"app-tt-chat",[],null,null,null,ci,ai)),i.ob(1,245760,null,0,li,[c.a,Nn.a],null,null)],(function(t,e){t(e,1,0)}),null)}function _s(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"compiler-instruction",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.compilerInsActionHandle(n)&&i),i}),di.c,di.b)),i.ob(1,114688,null,0,hi.a,[u.a],{showClose:[0,"showClose"]},{action:"action"})],(function(t,e){t(e,1,0,!0)}),null)}function ms(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"calculator",[],null,null,null,mi,_i)),i.ob(1,4243456,null,0,pi.a,[],null,null)],null,null)}function gs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"scientific-calc",[],null,null,null,vi,bi)),i.ob(1,4243456,null,0,gi.a,[],null,null)],null,null)}function bs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,0,"div",[["class","alert-summary-cont font18"],["style","max-height: 300px; overflow: auto;"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.alertData.summary)}))}function vs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,5,"textarea",[["class","reportError"],["placeholder","Enter the reason"],["rows","4"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var s=!0,l=t.component;return"input"===e&&(s=!1!==i.zb(t,1)._handleInput(n.target.value)&&s),"blur"===e&&(s=!1!==i.zb(t,1).onTouched()&&s),"compositionstart"===e&&(s=!1!==i.zb(t,1)._compositionStart()&&s),"compositionend"===e&&(s=!1!==i.zb(t,1)._compositionEnd(n.target.value)&&s),"ngModelChange"===e&&(s=!1!==(l.errorReported=n)&&s),s}),null,null)),i.ob(1,16384,null,0,zn.d,[i.C,i.k,[2,zn.a]],null,null),i.Eb(1024,null,zn.o,(function(t){return[t]}),[zn.d]),i.ob(3,671744,null,0,zn.s,[[8,null],[8,null],[8,null],[6,zn.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Eb(2048,null,zn.p,null,[zn.s]),i.ob(5,16384,null,0,zn.q,[[4,zn.p]],null,null)],(function(t,e){t(e,3,0,e.component.errorReported)}),(function(t,e){t(e,0,0,i.zb(e,5).ngClassUntouched,i.zb(e,5).ngClassTouched,i.zb(e,5).ngClassPristine,i.zb(e,5).ngClassDirty,i.zb(e,5).ngClassValid,i.zb(e,5).ngClassInvalid,i.zb(e,5).ngClassPending)}))}function fs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,0,"div",[["class","alert-detail-cont font14"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.alertData.detail)}))}function Ss(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","alert-detail-cont font14 alertText"]],null,null,null,null,null)),(t()(),i.Hb(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.alertData.alertText)}))}function ws(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","hide-content-preview"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,[" Rendering file for preview..."]))],null,null)}function ys(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,5,"div",[["class","pdf-container"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,4,"div",[["class","pdf previewPDF"],["id","pdf-viewer"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,ws)),i.ob(3,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(4,0,null,null,1,"pdf-viewer",[["class","previewPDF noselect"]],null,[[null,"after-load-complete"],["window","resize"]],(function(t,e,n){var s=!0,l=t.component;return"window:resize"===e&&(s=!1!==i.zb(t,5).onPageResize()&&s),"after-load-complete"===e&&(s=!1!==l.onFetchComplete()&&s),s}),fi.b,fi.a)),i.ob(5,9158656,null,0,Si.a,[i.k],{src:[0,"src"],renderText:[1,"renderText"],originalSize:[2,"originalSize"],autoresize:[3,"autoresize"],fitToPage:[4,"fitToPage"]},{afterLoadComplete:"after-load-complete"})],(function(t,e){var n=e.component;t(e,3,0,"no"===n.isFetchedfromS3),t(e,5,0,n.alertData.iframe,!0,!0,!0,!0)}),null)}function xs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","image-container"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,0,"img",[["class","image-preview"]],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,1,0,e.component.alertData.iframe)}))}function ks(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,4,"div",[["class","preview-container"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,ys)),i.ob(2,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,xs)),i.ob(4,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,"file"===n.alertData.type),t(e,4,0,"img"===n.alertData.type)}),null)}function Ds(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","qr-image"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","display-flex-center"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,0,"img",[["alt","Loading Image..."],["crossorigin","anonymous"],["decoding","async"],["loading","lazy"]],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,2,0,e.component.alertData.src)}))}function Cs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","qr-image-preview"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","display-flex-center"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,0,"img",[["alt","Seems the image is not uploaded in the server. Try uploading again."],["crossorigin","anonymous"],["decoding","async"],["height","350px"],["id","refreshQrImage"],["loading","lazy"]],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,2,0,e.component.imgSrc)}))}function qs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","qr-image-preview"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","display-flex-center"],["style","height: auto;"]],null,null,null,null,null)),(t()(),i.Hb(2,null,[" "," "]))],null,(function(t,e){t(e,2,0,e.component.alertData.qr_text_preview)}))}function Is(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,6,"li",[],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Step 5:\xa0"])),(t()(),i.Hb(-1,null,[" After success message, in desktop/laptop click the "])),(t()(),i.pb(4,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Check for uploaded image\xa0"])),(t()(),i.Hb(-1,null,[" link. "]))],null,null)}function Ps(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,6,"li",[],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Step 5:\xa0"])),(t()(),i.Hb(-1,null,[" After success message, in desktop/laptop click the "])),(t()(),i.pb(4,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Confirm and Upload\xa0"])),(t()(),i.Hb(-1,null,[" link. "]))],null,null)}function Ms(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Step 6:\xa0"])),(t()(),i.Hb(-1,null,[" Check whether the image is rendered and confirm if it is the image that you have uploaded. "]))],null,null)}function Ts(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Step 6:\xa0"])),(t()(),i.Hb(-1,null,[" Verify if the file name shown matches with the file that you have uploaded. "]))],null,null)}function Es(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,6,"li",[],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Step 7:\xa0"])),(t()(),i.Hb(-1,null,[" Click "])),(t()(),i.pb(4,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Refresh\xa0"])),(t()(),i.Hb(-1,null,["button if the image is uploaded but not rendered. "]))],null,null)}function Os(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,6,"li",[],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Step 7:\xa0"])),(t()(),i.Hb(-1,null,[" Click "])),(t()(),i.pb(4,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Confirm & Upload\xa0"])),(t()(),i.Hb(-1,null,[" button to confirm the uploaded file. "]))],null,null)}function As(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,6,"li",[],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Step 8:\xa0"])),(t()(),i.Hb(-1,null,[" Click "])),(t()(),i.pb(4,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Confirm & Upload\xa0"])),(t()(),i.Hb(-1,null,[" button to confirm the uploaded image. "]))],null,null)}function Hs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,35,"div",[["class","qr-image-preview"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,34,"div",[["class","display-flex-center"],["style","height: auto;"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,33,"ul",[],null,null,null,null,null)),(t()(),i.pb(3,0,null,null,6,"li",[],null,null,null,null,null)),(t()(),i.pb(4,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Step 1:\xa0"])),(t()(),i.Hb(-1,null,[" Click the "])),(t()(),i.pb(7,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Upload using QR Code\xa0"])),(t()(),i.Hb(-1,null,[" button and then a QR code will be displayed. "])),(t()(),i.pb(10,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),i.pb(11,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Step 2:\xa0"])),(t()(),i.Hb(-1,null,[" Using your mobile scan the QR code and open the link generated. "])),(t()(),i.pb(14,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),i.pb(15,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Step 3:\xa0"])),(t()(),i.Hb(-1,null,[" You will be redirected to the file upload page (If you havent login from the mobile you will be asked to login). "])),(t()(),i.pb(18,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),i.pb(19,0,null,null,1,"a",[["class","text-bold"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Step 4:\xa0"])),(t()(),i.Hb(-1,null,[" Upload the file from the mobile and after upload a success message will be shown. "])),(t()(),i.gb(16777216,null,null,1,null,Is)),i.ob(23,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Ps)),i.ob(25,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Ms)),i.ob(27,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Ts)),i.ob(29,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Es)),i.ob(31,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Os)),i.ob(33,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,As)),i.ob(35,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,23,0,!n.alertData.file_upload),t(e,25,0,n.alertData.file_upload),t(e,27,0,!n.alertData.file_upload),t(e,29,0,n.alertData.file_upload),t(e,31,0,!n.alertData.file_upload),t(e,33,0,n.alertData.file_upload),t(e,35,0,!n.alertData.file_upload)}),null)}function zs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,3,"div",[["class","alert-countdown-cont"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,2,"b",[],null,null,null,null,null)),(t()(),i.Hb(2,null,["",""])),i.Db(3,1)],null,(function(t,e){var n=e.component,s=i.Ib(e,2,0,t(e,3,0,i.zb(e.parent.parent,0),n.alertCountDown));t(e,2,0,s)}))}function Rs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,5,"div",[["class","each-test-summary"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,4,"div",[["class","each-test-summary-container font14"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),i.Hb(3,null,[" "," "])),(t()(),i.pb(4,0,null,null,1,"div",[["class","each-test-summary-value"]],null,null,null,null,null)),(t()(),i.Hb(5,null,[" "," "]))],null,(function(t,e){t(e,3,0,e.context.$implicit.label),t(e,5,0,e.context.$implicit.value)}))}function Ns(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,5,"div",[["class","test-summary-container"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","test-summary-header"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,[" Test Summary "])),(t()(),i.pb(3,0,null,null,2,"div",[["class","test-summary-content"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Rs)),i.ob(5,278528,null,0,f.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,5,0,e.component.testSummary)}),null)}function Bs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,0,"em",[],[[8,"className",0]],null,null,null,null))],null,(function(t,e){t(e,0,0,i.rb(1,"icon ",e.parent.context.$implicit.value,""))}))}function Ls(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"a",[],null,null,null,null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.parent.context.$implicit.value)}))}function js(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,8,"div",[["class","each-test-summary"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,7,"div",[["class","each-test-summary-container font14"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),i.Hb(3,null,[" "," "])),(t()(),i.pb(4,0,null,null,4,"div",[["class","each-test-summary-value"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,Bs)),i.ob(6,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Ls)),i.ob(8,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.context.$implicit.value.includes("icon");t(e,6,0,n);var i=!e.context.$implicit.value.includes("icon");t(e,8,0,i)}),(function(t,e){t(e,3,0,e.context.$implicit.label)}))}function Fs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,5,"div",[["class","test-summary-container"],["style","width: 100%;"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","test-summary-header"]],null,null,null,null,null)),(t()(),i.Hb(-1,null,[" Test Submit Status "])),(t()(),i.pb(3,0,null,null,2,"div",[["class","test-summary-content"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,js)),i.ob(5,278528,null,0,f.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,5,0,e.component.testSubmitStatus)}),null)}function Js(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,5,"div",[["class","test-summary-container"],["style","width: 100%;"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,2,"div",[["class","test-summary-content "]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Hb(-1,null,["Thank you for interest in Virtusa and taking our Assessment Test. Please click here to see your results. Please note shortlisted candidates will be contacted in the coming week."])),(t()(),i.pb(4,0,null,null,1,"div",[["class","test-summary-header marginLeftRight"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.ViewAnalysis()&&i),i}),null,null)),(t()(),i.Hb(-1,null,[" View scores "]))],null,null)}function Us(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"app-form-builder",[["class","formbuilder"],["padding","4px"]],null,[[null,"onSubmit"]],(function(t,e,n){var i=!0;return"onSubmit"===e&&(i=!1!==t.component.alertFormSubmit(n)&&i),i}),wi.b,wi.a)),i.ob(1,1687552,null,0,yi.a,[],{fields:[0,"fields"],layout:[1,"layout"],btnStyle:[2,"btnStyle"],btnContStyle:[3,"btnContStyle"],padding:[4,"padding"],buttonList:[5,"buttonList"],customizeRowStyle:[6,"customizeRowStyle"]},{onSubmit:"onSubmit"})],(function(t,e){var n=e.component;t(e,1,0,n.alertData.form,n.alertData.layout,n.alertData.btnStyle,n.alertData.btnContStyle,"4px",n.alertData.button,n.alertData.customizeRowStyle)}),null)}function Ks(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","alert-reject"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0,s=t.component;return"but"===e&&(s.dialogVisible=!1,i=!1!==s.alertData.rejectButton.action()&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"],tabindex:[4,"tabindex"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.alertData.rejectButton,n.alertData.rejectButton.padding,n.alertData.rejectButton.fontSize,n.alertData.rejectButton.id,n.alertData.rejectButton.tabindex)}),null)}function Qs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","alert-accept"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0,s=t.component;return"but"===e&&(s.dialogVisible=!1,i=!1!==s.alertData.acceptButton.action()&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"],tabindex:[4,"tabindex"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.alertData.acceptButton,n.alertData.acceptButton.padding,n.alertData.acceptButton.fontSize,n.alertData.acceptButton.id,n.alertData.acceptButton.tabindex)}),null)}function Ws(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","alert-accept"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.alertData.refreshButton.action()&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,n.alertData.refreshButton,n.alertData.refreshButton.padding,n.alertData.refreshButton.fontSize,n.alertData.refreshButton.id)}),null)}function $s(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","alert-accept"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0,s=t.component;return"but"===e&&(s.dialogVisible=!1,i=!1!==s.alertData.acceptButton.action()&&i),i}),O.b,O.a)),i.ob(2,573440,null,0,A.a,[i.C],{disable:[0,"disable"],btnProperties:[1,"btnProperties"],padding:[2,"padding"],fontSize:[3,"fontSize"],id:[4,"id"],tabindex:[5,"tabindex"]},{but:"but"})],(function(t,e){var n=e.component;t(e,2,0,!n.errorReported,n.alertData.acceptButton,n.alertData.acceptButton.padding,n.alertData.acceptButton.fontSize,n.alertData.acceptButton.id,n.alertData.acceptButton.tabindex)}),null)}function Vs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,41,"div",[["class","alert-container"]],null,null,null,null,null)),i.ob(1,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(2,{"alert-container-preview":0,"alert-pad-reduce":1}),(t()(),i.gb(16777216,null,null,1,null,bs)),i.ob(4,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,vs)),i.ob(6,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,fs)),i.ob(8,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Ss)),i.ob(10,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ks)),i.ob(12,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Ds)),i.ob(14,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Cs)),i.ob(16,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,qs)),i.ob(18,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Hs)),i.ob(20,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,zs)),i.ob(22,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(23,0,null,null,18,"div",[["class","alert-action-cont"]],null,null,null,null,null)),i.ob(24,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(25,{"alert-action-cont-form":0}),(t()(),i.gb(16777216,null,null,1,null,Ns)),i.ob(27,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Fs)),i.ob(29,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Js)),i.ob(31,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Us)),i.ob(33,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Ks)),i.ob(35,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Qs)),i.ob(37,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,Ws)),i.ob(39,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,$s)),i.ob(41,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component,i=t(e,2,0,n.alertData.iframe,n.alertData.infoPopup);t(e,1,0,"alert-container",i),t(e,4,0,n.alertData.summary),t(e,6,0,n.alertData.input),t(e,8,0,n.alertData.detail),t(e,10,0,n.alertData.alertText),t(e,12,0,n.alertData.iframe),t(e,14,0,n.alertData.qr_image),t(e,16,0,n.alertData.qr_image_preview),t(e,18,0,n.alertData.qr_text_preview),t(e,20,0,n.alertData.qr_info),t(e,22,0,n.alertData.showCountDown);var s=t(e,25,0,n.alertData.form);t(e,24,0,"alert-action-cont",s),t(e,27,0,"End Test"===n.dialogHeader),t(e,29,0,"Test Submitting...."===n.dialogHeader),t(e,31,0,"Congratulation"===n.dialogHeader),t(e,33,0,n.alertData.form),t(e,35,0,!n.alertData.form&&n.alertData.rejectButton),t(e,37,0,!n.alertData.form&&n.alertData.acceptButton&&!n.reportFlag),t(e,39,0,!n.alertData.form&&n.alertData.refreshButton),t(e,41,0,!n.alertData.form&&n.alertData.acceptButton&&n.reportFlag)}),null)}function Ys(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","hint-action-cont"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","hint-count"]],null,null,null,null,null)),(t()(),i.Hb(2,null,[" "," "]))],null,(function(t,e){var n=e.component;t(e,2,0,n.current_q.show_hint_index+" / "+n.current_q.hint.length)}))}function Gs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,4,"div",[["class","hints-container"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","hint"]],null,null,null,null,null)),i.ob(2,540672,null,0,xi.a,[c.a,i.k],{data:[0,"data"]},null),(t()(),i.gb(16777216,null,null,1,null,Ys)),i.ob(4,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.current_q.show_hint),t(e,4,0,n.current_q.hint.length>1)}),null)}function Xs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"common-test-instruction",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.instructionActionHandle(n)&&i),i}),ki.b,ki.a)),i.ob(1,49152,null,0,Di.a,[],null,{action:"action"})],null,null)}function Zs(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"testtaking-summary",[],null,[[null,"action"]],(function(t,e,n){var i=!0;return"action"===e&&(i=!1!==t.component.summaryActionHandle(n)&&i),i}),Pi,qi)),i.ob(1,49152,null,0,Ci,[c.a],null,{action:"action"})],null,null)}function tl(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,4,"div",[["class","faq-each"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,1,"div",[["class","faq-question"]],null,null,null,null,null)),(t()(),i.Hb(2,null,[" "," "])),(t()(),i.pb(3,0,null,null,1,"div",[["class","faq-answer"]],null,null,null,null,null)),(t()(),i.Hb(4,null,[" "," "]))],null,(function(t,e){t(e,2,0,e.context.index+1+". "+e.context.$implicit.question),t(e,4,0,e.context.$implicit.answer)}))}function el(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"div",[["class","faq-cont"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,tl)),i.ob(2,278528,null,0,f.l,[i.N,i.K,i.r],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.projectFaqList)}),null)}function nl(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,10,"div",[["class","callNotification"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,0,"meta",[["content","width=device-width, initial-scale=1"],["name","viewport"]],null,null,null,null,null)),(t()(),i.pb(2,0,null,null,0,"link",[["href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"],["rel","stylesheet"]],null,null,null,null,null)),(t()(),i.pb(3,0,null,null,2,"div",[["class","staffName"]],null,null,null,null,null)),(t()(),i.pb(4,0,null,null,1,"span",[],null,[[null,"onClick"]],(function(t,e,n){var i=!0;return"onClick"===e&&(i=!1!==t.component.disablbCallPopup(n)&&i),i}),null,null)),(t()(),i.Hb(5,null,[""," is calling"])),(t()(),i.pb(6,0,null,null,4,"div",[["class","popupButtons"]],null,null,null,null,null)),(t()(),i.pb(7,0,null,null,1,"button",[["class","pulse"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.attendCall()&&i),i}),null,null)),(t()(),i.pb(8,0,null,null,0,"img",[["alt",""],["class","callImage"],["src","https://img.icons8.com/color/344/outgoing-call.png"]],null,null,null,null,null)),(t()(),i.pb(9,0,null,null,1,"button",[["class","pulseCutCall"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.dismissCall()&&i),i}),null,null)),(t()(),i.pb(10,0,null,null,0,"img",[["alt",""],["class","callImage"],["src","https://img.icons8.com/color/344/end-call.png"]],null,null,null,null,null))],null,(function(t,e){t(e,5,0,e.component.staffName)}))}function il(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"app-loader",[["type","type2"]],null,null,null,ot.b,ot.a)),i.ob(1,114688,null,0,ut.a,[],{type:[0,"type"]},null)],(function(t,e){t(e,1,0,"type2")}),null)}function sl(t){return i.Jb(0,[i.Bb(0,Z.a,[]),i.Fb(402653184,1,{remoteParticipant:0}),(t()(),i.pb(2,0,null,null,47,"div",[["class","testtaking-playground"],["role","main"]],null,null,null,null,null)),(t()(),i.pb(3,0,null,null,2,"div",[["class","tt-header"]],null,null,null,null,null)),(t()(),i.pb(4,0,null,null,1,"testtaking-header",[],null,[[null,"headerAction"]],(function(t,e,n){var i=!0;return"headerAction"===e&&(i=!1!==t.component.headerActionHandle(n)&&i),i}),Ui,Hi)),i.ob(5,573440,null,0,Ai,[c.a],{selectedSection:[0,"selectedSection"],disableSubmit:[1,"disableSubmit"],t_counter:[2,"t_counter"],isOffline:[3,"isOffline"]},{headerAction:"headerAction"}),(t()(),i.pb(6,0,null,null,2,"div",[["class","sections"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,rs)),i.ob(8,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(9,0,null,null,0,"div",[["id","jaas-container-share"],["style","height:0px"]],null,null,null,null,null)),(t()(),i.pb(10,0,null,null,9,"div",[["class","faceCam"],["id","faceCamID"]],null,null,null,null,null)),i.ob(11,278528,null,0,f.k,[i.r,i.s,i.k,i.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Cb(12,{"faceCam-center":0,faceCam:1,"faceCam-none":2,"faceCam-block":3}),(t()(),i.pb(13,0,[[1,0],["jaasFacecam",1]],null,2,"div",[["id","jaas-facecam-container"],["style","width: 100%; height: 100%;"]],null,null,null,null,null)),i.ob(14,278528,null,0,f.p,[i.s,i.k,i.C],{ngStyle:[0,"ngStyle"]},null),i.Cb(15,{background:0}),(t()(),i.gb(16777216,null,null,1,null,os)),i.ob(17,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,us)),i.ob(19,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(20,0,null,null,1,"app-screen-share-dialog",[],null,[[null,"dialogScreenShare"],[null,"dialogSubmitTest"],[null,"dialogPauseTest"]],(function(t,e,n){var i=!0,s=t.component;return"dialogScreenShare"===e&&(i=!1!==s.dialogScreenShare(n)&&i),"dialogSubmitTest"===e&&(i=!1!==s.dialogSubmitTest(n)&&i),"dialogPauseTest"===e&&(i=!1!==s.dialogPauseTest(n)&&i),i}),Vi,Qi)),i.ob(21,638976,null,0,Ki,[],{displayShareScreenDialog:[0,"displayShareScreenDialog"],displayShareScreenDialogCount:[1,"displayShareScreenDialogCount"],autoSubmitCutOffPeriod:[2,"autoSubmitCutOffPeriod"],liveScreenSharingFeature:[3,"liveScreenSharingFeature"]},{dialogScreenShare:"dialogScreenShare",dialogSubmitTest:"dialogSubmitTest",dialogPauseTest:"dialogPauseTest"}),(t()(),i.gb(16777216,null,null,1,null,cs)),i.ob(23,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,hs)),i.ob(25,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(26,0,null,null,1,"tt-proctoring",[],null,[[null,"output"]],(function(t,e,n){var i=!0;return"output"===e&&(i=!1!==t.component.proctorActionHandle(n)&&i),i}),ss,es)),i.ob(27,770048,null,0,ts,[u.a,c.a,Gi,Xi,d.a,i.C,Zi],{liveAction:[0,"liveAction"],imageAction:[1,"imageAction"],mediaAction:[2,"mediaAction"],isOnCall:[3,"isOnCall"]},{output:"output"}),(t()(),i.gb(16777216,null,null,1,null,ps)),i.ob(29,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(30,0,null,null,17,"app-dialog",[],null,[[null,"visibleChange"],["window","resize"]],(function(t,e,n){var s=!0,l=t.component;return"window:resize"===e&&(s=!1!==i.zb(t,31).getScreenSize(n)&&s),"visibleChange"===e&&(s=!1!==(l.dialogVisible=n)&&s),"visibleChange"===e&&(s=!1!==l.onDialogClose()&&s),s}),Mi.b,Mi.a)),i.ob(31,114688,null,0,Ti.a,[Ei.a,Oi.a,o.m,u.a],{closable:[0,"closable"],visible:[1,"visible"],header:[2,"header"],headRequired:[3,"headRequired"],ngStyleClass:[4,"ngStyleClass"],headerStyle:[5,"headerStyle"]},{visibleChange:"visibleChange"}),(t()(),i.gb(16777216,null,0,1,null,_s)),i.ob(33,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,0,1,null,ms)),i.ob(35,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,0,1,null,gs)),i.ob(37,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,0,1,null,Vs)),i.ob(39,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,0,1,null,Gs)),i.ob(41,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,0,1,null,Xs)),i.ob(43,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,0,1,null,Zs)),i.ob(45,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,0,1,null,el)),i.ob(47,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,nl)),i.ob(49,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,il)),i.ob(51,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,5,0,n.current_q?n.current_q.secIndex:0,n.disableSubmit,n.t_counter,n.isOffline),t(e,8,0,!n.isFullscreenExit);var i=t(e,12,0,!0===n.isMobile,!1===n.isMobile,!1===n.isOnCall,!0===n.isOnCall);t(e,11,0,"faceCam",i);var s=t(e,15,0,1==n.isOnCall&&1==n.callTypeTwilio&&0==n.showCallLoader?"black":"");t(e,14,0,s),t(e,17,0,n.showCallLoader),t(e,19,0,1==n.callTypeTwilio),t(e,21,0,n.displayShareScreenDialog,n.noOfTimeScreenSharingPause,n.autoSubmitCutOffPeriod,n.liveScreenSharingFeature),t(e,23,0,"desktop"===n.getDevice()&&!n.isFullscreenExit),t(e,25,0,"mobile"===n.getDevice()&&!n.isFullscreenExit),t(e,27,0,n.proctorLiveAction,n.proctorImageAction,n.proctorMediaAction,n.isOnCallObj),t(e,29,0,n.showChat),t(e,31,0,n.dialogClosable,n.dialogVisible,n.dialogHeader,n.dialogHeaderRequired,n.dialogStyle,n.dialogHeaderStyle),t(e,33,0,"Compiler Instruction"===n.dialogHeader),t(e,35,0,"Calculator"===n.dialogHeader),t(e,37,0,"Scientific Calculator"===n.dialogHeader),t(e,39,0,n.alertData&&n.alertData.visible),t(e,41,0,"Hint"===n.dialogHeader),t(e,43,0,"Instructions"===n.dialogHeader),t(e,45,0,"Summary"===n.dialogHeader),t(e,47,0,"FAQ"===n.dialogHeader),t(e,49,0,!0===n.enableCallNotification),t(e,51,0,n.startLoader)}),null)}var ll=n("4BqZ");class al{constructor(t,e,n,i,s,l){if(this.router=t,this.activatedRoute=e,this.globalService=n,this.socketService=i,this.testService=s,this.courseService=l,this.testStartPng=y.a.s3Objectstudentassets+"assets/teststart.png",this.testService.schoolData&&!this.testService.crispVideoEnabledSchools.includes(this.testService.schoolData.school_id)&&window.$crisp?window.$crisp.push(["do","chat:hide"]):this.testService.schoolData&&this.testService.crispVideoEnabledSchools.includes(this.testService.schoolData.school_id)&&window.$crisp&&window.$crisp.push(["do","chat:show"]),window.$crisp&&this.testService.userData&&window.$crisp.push(["set","user:email",this.testService.userData.email]),this.testService.setUserDetails(),this.testService.schoolData&&this.testService.userData){this.globalService.showTop.next(!1);const t=[];t.push(this.testService.getCryptoJS()),this.socketService.connect(this.testService.schoolData.school_id,this.testService.userData.user_id),this.testService.detectOffline(),this.testService.detectLeaveAlert(),this.testService.detectLeaveScreen(),this.testService.detectWindowResize(),Promise.all(t).then(()=>{this.testService.authSDK(),this.testService.testData?this.handleWithTestData():this.handleWithoutTestData()})}}ngOnDestroy(){this.removeListeners(),!this.testService.crispVideoEnabledSchools.includes(this.testService.schoolData.school_id)&&window.$crisp&&window.$crisp.push(["do","chat:show"]),this.testService.testData=void 0,this.testService.exitFullScreen(),this.globalService.showTop.next(!0)}removeListeners(){this.testService.removeDetectOffline(),this.testService.removePresentationLeave(),this.testService.removeWindowMove(),this.testService.removeWindowResize(),this.testService.removeLeaveAlert(),this.socketService.removeMessage()}showAlert(t){this.dialogVisible=!0,this.dialogClosable=t.dialogClosable,this.dialogHeader=t.dialogHeader,this.dialogHeader&&(this.dialogHeaderRequired=!0),this.alertData={showImage:t.showImage,summary:t.summary,detail:t.detail,acceptButton:t.acceptButton,rejectButton:t.rejectButton,cancelButton:t.cancelButton}}closeAlert(){this.dialogVisible=!1,this.dialogClosable=!1,this.dialogHeader="",this.dialogHeaderRequired=!1,this.dialogStyle=void 0}loadScriptsAsync(t){return new Promise((e,n)=>{t&&(this.dialogStyle=document.body.offsetWidth>500?{display:"flex","flex-direction":"column",width:"500px","min-height":"136px",top:"30%"}:{display:"flex","flex-direction":"column",width:"100%","min-height":"136px",top:"25%"},this.showAlert({dialogClosable:!1,dialogHeader:"Please wait...",summary:"Slow network detected!",detail:"Your test will load soon..."}));const i=[];i.push(this.testService.loadDigitalFont(),this.testService.getLeaderboardConstants(),this.testService.getMathJax(),this.testService.getStackBlitz(),this.testService.getAce(),this.testService.getQuill(),this.testService.getBlockly(),this.testService.getDrawio()),this.testService.testData&&this.testService.testData.c_modules&&((this.testService.testData.c_modules.remote_proctoring_type||this.testService.testData.c_modules.is_video_interview)&&(i.push(this.testService.getRecordRTC()),this.testService.testData.c_modules.remote_proctoring_type&&i.push(this.testService.getPosenet()),"Record-Analysis"===this.testService.testData.c_modules.audio_feature&&i.push(this.testService.getSpeechCommands())),this.testService.testData.c_modules.enable_debugger&&i.push(this.testService.getInlineDebugger())),Promise.all(i).then(()=>{t&&this.closeAlert(),e(!0)})})}startProgressSuccess(t){this.showSection="test-instruction"}instructionSuccess(t){this.loading=!0,Promise.all([this.loadScriptsAsync(!0),this.getFrozenData()]).then(t=>{if(this.loading=!1,t&&t[1]){const e=t[1];if(e.error)return void this.showStartError(e.msg);this.testService.testData.frozen_data={client_data:e.client_data,test_tracking_data:e.test_tracking_data,frozen_test_data:e.frozen_test_data,resume_question:e.question_details,id:e.id},this.testService.testData.instanceTime=new Date(e.instance),this.testService.testData.t_start_time=new Date(e.instance),this.testService.testData.c_name=e.c_name,this.testService.testData.daily_time_spent=e.daily_time_spent,this.showSection="testtaking-playground"}else this.showStartError()})}playGroundSuccess(t){switch(t.type){case"Start Loader":this.loading=!0;break;case"Stop Loader":this.loading=!1;break;case"redirect":this.showSection=void 0,this.loading=!1,this.testService.removeLeaveAlert(),this.redirectToListing()}}checkSuspicesaActivity(t){return new Promise((e,n)=>{t.question_details&&t.question_details.l_event_data&&t.question_details.l_event_data.remaining_time&&t.question_details.l_event_data.remaining_time.proctoring_alerts&&this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.max_proctoring_alerts&&t.question_details.l_event_data.remaining_time.proctoring_alerts>this.testService.testData.c_modules.max_proctoring_alerts?(this.dialogStyle={display:"flex","flex-direction":"column",width:"500px","min-height":"136px",top:"30%"},this.showAlert({dialogClosable:!1,dialogHeader:"Warning",summary:"Could not start the test!",detail:"Exceeded suspicious activity",rejectButton:{btnName:"Close",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",action:()=>{this.redirectToListing()},id:"tt-start-reject"}})):e(!0)})}getFrozenData(){return new Promise((t,e)=>{this.testService.testData.client_data.session_id=localStorage.getItem("sessionId"),"resume"===this.testService.testData.attempt_type?this.testService.resumeTest({user_id:this.testService.userData.user_id,c_id:this.testService.testData.c_id,t_id:this.testService.testData.t_id,client_data:this.testService.testData.client_data,attempt_no:this.testService.testData.attempt_no}).then(e=>Rn.__awaiter(this,void 0,void 0,(function*(){yield this.checkSuspicesaActivity(e),e.frozen_test_data=yield this.testService.switchS3bucket(e.frozen_test_data),t(e)}))):"take"!==this.testService.testData.attempt_type&&"retake"!==this.testService.testData.attempt_type||this.testService.startTest({user_id:this.testService.userData.user_id,c_id:this.testService.testData.c_id,t_id:this.testService.testData.t_id,client_data:this.testService.testData.client_data,attempt_no:this.testService.testData.attempt_no,test_type:this.testService.testData.test_type}).then(e=>Rn.__awaiter(this,void 0,void 0,(function*(){e.frozen_test_data=yield this.testService.switchS3bucket(e.frozen_test_data),t(e)})))})}handleWithTestData(){this.showSection="test-instruction"}startTestAccept(){if(this.globalService.inIframe())if(document&&document.location&&document.location.ancestorOrigins&&document.location.ancestorOrigins[0])localStorage.setItem("externalIframePath",document.location.ancestorOrigins[0]);else if(this.testService&&this.testService.userData&&this.testService.userData.school_branch_department_users&&this.testService.userData.school_branch_department_users.length&&this.testService.testData&&this.testService.testData.isExternal){let t=this.testService.userData.school_branch_department_users;for(let e of t){if(e&&e.branch_id&&("83b6d1c0-63bc-495a-afb6-0e9dc20bdd03"===e.branch_id||"28a651c2-ebc0-4847-868e-74f578e4847f"===e.branch_id||"0441b756-ebf0-4fb6-b0b3-bc2159c82cb0"===e.branch_id)){localStorage.setItem("externalIframePath","learn.wileynxt");break}e&&e.branch_id&&("e55a8c23-8f15-41c4-afc9-b3b380c2ae2a"===e.branch_id||"b85d1548-570c-4236-998a-8f3b61c61b52"===e.branch_id)&&localStorage.setItem("externalIframePath","uat.wileynxt.com")}}window.onbeforeunload=null,this.testService&&this.testService.testData&&this.testService.testData.c_modules&&localStorage.getItem("ssologin")&&!localStorage.getItem("alreadyRedirected")?(this.testService.setUserDetails(),this.testService.testData.c_modules.standalone_window?(window.open(window.location.protocol+"//"+window.location.host+"/test?id="+this.testService.testData.c_id+this.testService.testData.t_id,"Proctored Test","menubar=no,location=no,resizable=no,scrollbars=yes,status=no,fullscreen=yes"),localStorage.setItem("alreadyRedirected","true"),this.closeAlert(),this.getTestStartConfirmation()):(this.closeAlert(),this.showSection="test-creation")):(this.closeAlert(),this.showSection="test-creation")}handleWithoutTestData(){this.byLink=!0,this.activatedRoute.queryParams.subscribe(t=>{this.testService.getTestTakingDetail(t.id).then(t=>Rn.__awaiter(this,void 0,void 0,(function*(){if(t&&t.success){if(t.data=JSON.parse(t.data),this.testService.checkProctoringAllowed()||(t.data.c_modules.remote_proctoring_type=null),this.testService.checkManualProcAllowed()||(t.data.c_modules.manual_proctoring=void 0),this.testService.testData={c_id:t.data.c_id,c_name:t.data.c_name,c_modules:t.data.c_modules,course_progress:t.data.course_progress,c_type:t.data.c_type,test_count:t.data.test_count,entity:t.data.entity,attempt_no:0,t_id:t.data.t_id,t_name:t.data.t_name,t_type:t.data.t_type,template_data:{sections:t.data.template_data},t_total_marks:t.data.t_total_marks,t_total_duration:t.data.t_total_duration,mod_id:t.data.mod_id,sub_mod_id:t.data.sub_mod_id,isExternal:!!(t&&t.data&&t.data.isExternal)&&t.data.isExternal,isTestruletype:t.data.isTestruletype,c_marks_data:t.data.c_marks_data},this.testService.lockTestParams=t.data.lockTestParams,this.testService.schoolData&&this.testService.schoolData.school_id&&this.testService.embedSchoolIds&&this.testService.embedSchoolIds.includes(this.testService.schoolData.school_id)){const e={c_id:t.data.c_id,t_id:t.data.t_id,user_id:this.testService.userData.user_id,flag:!0};yield this.getPreviousAttemptDetails(e).then(t=>{t.success&&t.attempts&&(this.testService.previousAttemptNo=t.attempts.attempt_no,this.testService.previousAttemptId=t.attempts.id)})}this.getTestStartConfirmation()}else t?this.showStartError(t.message):this.showStartError()})),t=>{this.showStartError()})})}getTestStartConfirmation(){let t;if(this.dialogStyle=document.body.offsetWidth>500?{display:"flex","flex-direction":"column",width:"450px","min-height":"136px",top:"25%"}:{display:"flex","flex-direction":"column",width:"100%","min-height":"136px",top:"20%"},this.testService.schoolData&&this.testService.schoolData.school_id&&this.testService.embedSchoolIds&&this.testService.embedSchoolIds.includes(this.testService.schoolData.school_id)&&this.testService.previousAttemptNo>=1){let e,n=0;this.testService.testData.c_modules.allow_retake&&this.testService.testData.c_modules.retakeCount&&(n=this.testService.testData.c_modules.retakeCount-this.testService.previousAttemptNo+1,n=n<0?0:n),e=!!(this.testService.testData.c_modules&&this.testService.testData.c_modules.allow_retake&&n>0),t={dialogClosable:!1,dialogHeader:e?"Retake test":"You have completed the test",showImage:!0,summary:this.testService.testData.c_name,detail:"<b>Test: </b> "+this.testService.testData.t_name,acceptButton:!!e&&{btnName:"Retake test("+n+" attempts left)",border:"1px solid var(--one)",fontColor:"var(--white)",background:"var(--one)",padding:"6px 14px",fontSize:"14px",marginRight:{"margin-right":"15px"},action:this.startTestAccept.bind(this),id:"tt-start-confirm"},rejectButton:!(!this.testService.testData.c_modules.analysis_restrict||!this.testService.testData.c_modules.analysis_show_type||"Immediate"!==this.testService.testData.c_modules.analysis_show_type)&&{btnName:"Show result analysis",border:"1px solid var(--one)",fontColor:"var(--white)",background:"var(--one)",padding:"6px 14px",fontSize:"14px",marginLeft:{"margin-left":"15px !important"},action:()=>{this.encryptStudentCourseId(this.testService.previousAttemptId)},id:"tt-start-confirm"},cancelButton:!e&&{btnName:"Close",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",multipleBtn:!0,marginLeft:{"margin-left":"15px"},action:()=>{if(localStorage.getItem("ssologin")&&this.testService&&this.testService.schoolData&&this.testService.schoolData.schools_metadata&&this.testService.schoolData.schools_metadata.sso_url_after_test&&""!==this.testService.schoolData.schools_metadata.sso_url_after_test){let t=this.testService.testData.c_id+""+this.testService.testData.t_id,e=this.testService.userData.email?this.testService.userData.email.toLowerCase():"",n=this.testService.schoolData.schools_metadata.sso_url_after_test;n=n.replace(/\${email}/g,e),n=n.replace(/\${test_id}/g,t),location.replace(n)}else window.close()},id:"tt-start-reject"}}}else t={dialogClosable:!1,dialogHeader:"Start test",showImage:!0,summary:this.testService.testData.c_name,detail:"<b>Test: </b> "+this.testService.testData.t_name,acceptButton:{btnName:"Start test",border:"1px solid var(--one)",fontColor:"var(--white)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:this.startTestAccept.bind(this),id:"tt-start-confirm"}};t.summary="drive"===this.testService.testData.entity?"<b>Drive: </b> "+t.summary:"contest"===this.testService.testData.entity?this.testService.schoolData&&this.globalService.contestToTestSchoolId.includes(this.testService.schoolData.school_id)?"<b>Test: </b> "+t.summary:"<b>Contest: </b> "+t.summary:"<b>Course: </b> "+t.summary,this.showAlert(t)}redirectToListing(){if(this.byLink)if(this.dialogStyle=document.body.offsetWidth>500?{display:"flex","flex-direction":"column",width:"500px","min-height":"136px",top:"30%"}:{display:"flex","flex-direction":"column",width:"100%","min-height":"136px",top:"25%"},this.testService.schoolData&&this.testService.schoolData.school_id&&this.testService.embedSchoolIds&&this.testService.embedSchoolIds.includes(this.testService.schoolData.school_id)){let t,e=0;this.testService.testData.c_modules.allow_retake&&this.testService.testData.c_modules.retakeCount&&(e=this.testService.testData.c_modules.retakeCount-this.testService.testData.attempt_no+1,e=e<0?0:e),t=this.testService.testData.c_modules&&this.testService.testData.c_modules.allow_retake?this.testService.isTestPaused?"Resume test":e?"Retake test ("+e+" attempts left)":"Close":this.testService.isTestPaused?"Resume test":"Close",this.loading=!1,this.showSection=void 0,this.showAlert({dialogClosable:!1,dialogHeader:"Success",summary:"Test progress saved!",detail:"Press ESC or F11 key and proceed next in your course.",acceptButton:!(this.testService.isTestPaused&&!this.testService.previousAttemptNo||!this.testService.testData.c_modules.analysis_restrict||!this.testService.testData.c_modules.analysis_show_type||"Immediate"!==this.testService.testData.c_modules.analysis_show_type)&&{btnName:"Show result analysis",border:"1px solid var(--one)",fontColor:"var(--white)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",marginRight:{"margin-right":"15px"},action:()=>{this.testService.isTestPaused?this.testService.isTestPaused&&this.testService.previousAttemptNo>=1&&this.encryptStudentCourseId(this.testService.previousAttemptId):this.encryptStudentCourseId(this.testService.testData.frozen_data.id)},id:"tt-start-confirm"},rejectButton:!(!this.testService.isTestPaused&&!e)&&{btnName:t,border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",action:()=>{this.testService.previousAttemptNo=this.testService.testData.attempt_no,this.testService.previousAttemptId=this.testService.testData.frozen_data.id,window.location.reload()},id:"tt-start-reject"},cancelButton:{btnName:"Close",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",multipleBtn:!0,marginLeft:{"margin-left":"15px"},action:()=>{if(localStorage.getItem("ssologin")&&this.testService&&this.testService.schoolData&&this.testService.schoolData.schools_metadata&&this.testService.schoolData.schools_metadata.sso_url_after_test&&""!==this.testService.schoolData.schools_metadata.sso_url_after_test&&this.testService.schoolData.schools_metadata.sso_url_before_test&&this.testService.schoolData.schools_metadata.sso_url_before_test){let t;t=this.testService.isTestPaused?this.testService.schoolData.schools_metadata.sso_url_before_test:this.testService.schoolData.schools_metadata.sso_url_after_test;let e=this.testService.testData.c_id+""+this.testService.testData.t_id,n=this.testService.userData.email?this.testService.userData.email.toLowerCase():"";t=t.replace(/\${email}/g,n),t=t.replace(/\${test_id}/g,e),location.replace(t)}else window.close()},id:"tt-start-reject"}})}else this.showAlert({dialogClosable:!1,dialogHeader:"Success",summary:"Test progress saved!",detail:"You can close the window.",rejectButton:{btnName:"Close",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",action:()=>{window.close()},id:"tt-start-reject"}});else switch(this.testService.testData.entity){case"course":this.router.navigate(["/mycourses/details"],{queryParams:{id:this.testService.testData.c_id}});break;case"drive":this.router.navigate(["/mydrivedetails"],{queryParams:{drive_id:this.testService.testData.drive_id}});break;case"contest":this.testService.testData.contest_id?this.router.navigate(["/mycdetails"],{queryParams:{c_id:this.testService.testData.c_id,contest_id:this.testService.testData.contest_id}}):this.router.navigate(["/mycontest"])}localStorage.removeItem("alreadyRedirected"),localStorage.removeItem("externalIframePath")}showStartError(t="Sorry, Could not start the test"){this.dialogStyle=document.body.offsetWidth>500?{display:"flex","flex-direction":"column",width:"500px","min-height":"136px",top:"30%"}:{display:"flex","flex-direction":"column",width:"100%","min-height":"136px",top:"25%"},this.showAlert({dialogClosable:!1,dialogHeader:"Warning",summary:"Could not start the test!",detail:t,rejectButton:{btnName:"Close",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",action:()=>{this.redirectToListing()},id:"tt-start-reject"}})}getPreviousAttemptDetails(t){return new Promise((e,n)=>{this.courseService.attemptwiseCount(t).subscribe(t=>{e(t)})})}encryptStudentCourseId(t){return Rn.__awaiter(this,void 0,void 0,(function*(){const e={id:t},n=(yield this.testService.getCryptoJS()).AES.encrypt(JSON.stringify(e),this.testService.userData.user_id).toString();this.router.navigate(["/result"],{queryParams:{testId:encodeURIComponent(n)}})}))}}var rl=i.nb({encapsulation:0,styles:[[".alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:6px 14px}.alert-image-cont[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:6px 14px}.test-start-image[_ngcontent-%COMP%]{width:250px}.alert-summary-cont[_ngcontent-%COMP%]{padding:6px 14px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.alert-detail-cont[_ngcontent-%COMP%]{padding:6px 14px;text-overflow:ellipsis;white-space:normal;overflow:hidden}.alert-confirmation[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:6px 14px}"]],data:{}});function ol(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"test-start-progress",[],null,[[null,"success"]],(function(t,e,n){var i=!0;return"success"===e&&(i=!1!==t.component.startProgressSuccess(n)&&i),i}),a.b,a.a)),i.ob(1,245760,null,0,r.a,[o.m,i.C,u.a,c.a,d.a,h.a],null,{success:"success"})],(function(t,e){t(e,1,0)}),null)}function ul(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"test-instruction",[],null,[[null,"success"]],(function(t,e,n){var i=!0;return"success"===e&&(i=!1!==t.component.instructionSuccess(n)&&i),i}),T,k)),i.ob(1,49152,null,0,x,[c.a],null,{success:"success"})],null,null)}function cl(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"testtaking-playground",[],null,[[null,"success"]],(function(t,e,n){var i=!0;return"success"===e&&(i=!1!==t.component.playGroundSuccess(n)&&i),i}),sl,as)),i.Eb(512,null,f.d,f.d,[i.t]),i.ob(2,245760,null,0,ls.a,[u.a,c.a,Ie.a,f.d,i.C],null,{success:"success"})],(function(t,e){t(e,2,0)}),null)}function dl(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"div",[["class","alert-image-cont"]],null,null,null,null,null)),(t()(),i.pb(1,0,null,null,0,"img",[["alt",""],["class","test-start-image"],["decoding","async"],["loading","lazy"]],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,1,0,i.rb(1,"",e.component.testStartPng,""))}))}function hl(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,0,"div",[["class","alert-summary-cont font18"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.alertData.summary)}))}function pl(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,0,"div",[["class","alert-detail-cont font14"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.alertData.detail)}))}function _l(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.alertData.acceptButton.action()&&i),i}),O.b,O.a)),i.ob(1,278528,null,0,f.p,[i.s,i.k,i.C],{ngStyle:[0,"ngStyle"]},null),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,1,0,n.alertData.acceptButton.marginRight),t(e,2,0,n.alertData.acceptButton,n.alertData.acceptButton.padding,n.alertData.acceptButton.fontSize,n.alertData.acceptButton.id)}),null)}function ml(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.alertData.rejectButton.action()&&i),i}),O.b,O.a)),i.ob(1,278528,null,0,f.p,[i.s,i.k,i.C],{ngStyle:[0,"ngStyle"]},null),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,1,0,n.alertData.rejectButton.marginLeft),t(e,2,0,n.alertData.rejectButton,n.alertData.rejectButton.padding,n.alertData.rejectButton.fontSize,n.alertData.rejectButton.id)}),null)}function gl(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,2,"app-button",[],null,[[null,"but"]],(function(t,e,n){var i=!0;return"but"===e&&(i=!1!==t.component.alertData.cancelButton.action()&&i),i}),O.b,O.a)),i.ob(1,278528,null,0,f.p,[i.s,i.k,i.C],{ngStyle:[0,"ngStyle"]},null),i.ob(2,573440,null,0,A.a,[i.C],{btnProperties:[0,"btnProperties"],padding:[1,"padding"],fontSize:[2,"fontSize"],id:[3,"id"]},{but:"but"})],(function(t,e){var n=e.component;t(e,1,0,n.alertData.cancelButton.marginLeft),t(e,2,0,n.alertData.cancelButton,n.alertData.cancelButton.padding,n.alertData.cancelButton.fontSize,n.alertData.cancelButton.id)}),null)}function bl(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,13,"div",[["class","alert-container"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,dl)),i.ob(2,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,hl)),i.ob(4,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,pl)),i.ob(6,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(7,0,null,null,6,"div",[["class","alert-confirmation"]],null,null,null,null,null)),(t()(),i.gb(16777216,null,null,1,null,_l)),i.ob(9,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ml)),i.ob(11,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,gl)),i.ob(13,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.alertData.showImage),t(e,4,0,n.alertData.summary),t(e,6,0,n.alertData.detail),t(e,9,0,n.alertData.acceptButton),t(e,11,0,n.alertData.rejectButton),t(e,13,0,n.alertData.cancelButton)}),null)}function vl(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"app-loader",[["type","type2"]],null,null,null,ot.b,ot.a)),i.ob(1,114688,null,0,ut.a,[],{type:[0,"type"]},null)],(function(t,e){t(e,1,0,"type2")}),null)}function fl(t){return i.Jb(0,[(t()(),i.gb(16777216,null,null,1,null,ol)),i.ob(1,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,ul)),i.ob(3,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,cl)),i.ob(5,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(6,0,null,null,3,"app-dialog",[],null,[[null,"visibleChange"],["window","resize"]],(function(t,e,n){var s=!0,l=t.component;return"window:resize"===e&&(s=!1!==i.zb(t,7).getScreenSize(n)&&s),"visibleChange"===e&&(s=!1!==(l.dialogVisible=n)&&s),s}),Mi.b,Mi.a)),i.ob(7,114688,null,0,Ti.a,[Ei.a,Oi.a,o.m,u.a],{closable:[0,"closable"],visible:[1,"visible"],header:[2,"header"],headRequired:[3,"headRequired"],ngStyleClass:[4,"ngStyleClass"]},{visibleChange:"visibleChange"}),(t()(),i.gb(16777216,null,0,1,null,bl)),i.ob(9,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(16777216,null,null,1,null,vl)),i.ob(11,16384,null,0,f.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,1,0,"test-creation"===n.showSection),t(e,3,0,"test-instruction"===n.showSection),t(e,5,0,"testtaking-playground"===n.showSection),t(e,7,0,n.dialogClosable,n.dialogVisible,n.dialogHeader,n.dialogHeaderRequired,n.dialogStyle),t(e,9,0,n.alertData),t(e,11,0,!n.showSection||n.loading)}),null)}function Sl(t){return i.Jb(0,[(t()(),i.pb(0,0,null,null,1,"test-taking",[],null,null,null,fl,rl)),i.ob(1,180224,null,0,al,[o.m,o.a,u.a,Ie.a,c.a,ll.a],null,null)],null,null)}var wl=i.lb("test-taking",al,Sl,{},{},[]),yl=n("7Z8E"),xl=n("Se1k"),kl=n("k/Rj");class Dl{}var Cl=n("Lqxq"),ql=n("lbgN"),Il=n("Wbze"),Pl=n("CHyA"),Ml=n("3F6C"),Tl=n("u1jE"),El=n("2L1b"),Ol=n("sd+0"),Al=n("CsXA"),Hl=n("zO9m"),zl=n("b+Sf"),Rl=n("PbUE"),Nl=n("+M9C");class Bl{}var Ll=n("EJ0Q"),jl=n("i6eG"),Fl=n("1gTg"),Jl=n("YZ15"),Ul=n("wbqD"),Kl=n("/qvy"),Ql=n("b3E/"),Wl=n("w6+6"),$l=n("IZET"),Vl=n("1jDe"),Yl=n("T8sE"),Gl=n("skic"),Xl=n("KeWI"),Zl=n("UsZU"),ta=n("50k4"),ea=n("o56U"),na=n("U3vz"),ia=n("r6ye"),sa=n("KktT"),la=n("eby4"),aa=n("FGbf"),ra=n("HYbW");class oa{}class ua{}var ca=n("BgkS");class da{}var ha=n("pznz"),pa=n("iTUp");class _a{}class ma{}n.d(e,"TestTakingModuleNgFactory",(function(){return ga}));var ga=i.mb(s,[],(function(t){return i.wb([i.xb(512,i.j,i.ab,[[8,[l.a,wl,di.a,yl.a]],[3,i.j],i.w]),i.xb(4608,f.o,f.n,[i.t,[2,f.A]]),i.xb(4608,zn.C,zn.C,[]),i.xb(4608,zn.f,zn.f,[]),i.xb(4608,xl.a,xl.a,[i.g,i.j,i.q]),i.xb(4608,kl.a,kl.a,[xl.a]),i.xb(1073742336,f.b,f.b,[]),i.xb(1073742336,o.o,o.o,[[2,o.u],[2,o.m]]),i.xb(1073742336,Dl,Dl,[]),i.xb(1073742336,Cl.a,Cl.a,[]),i.xb(1073742336,ql.a,ql.a,[]),i.xb(1073742336,Il.a,Il.a,[]),i.xb(1073742336,zn.z,zn.z,[]),i.xb(1073742336,zn.l,zn.l,[]),i.xb(1073742336,Pl.a,Pl.a,[]),i.xb(1073742336,zn.w,zn.w,[]),i.xb(1073742336,Ml.a,Ml.a,[]),i.xb(1073742336,Tl.a,Tl.a,[]),i.xb(1073742336,El.a,El.a,[]),i.xb(1073742336,Ol.a,Ol.a,[]),i.xb(1073742336,Al.a,Al.a,[]),i.xb(1073742336,Hl.a,Hl.a,[]),i.xb(1073742336,zl.a,zl.a,[]),i.xb(1073742336,Rl.a,Rl.a,[]),i.xb(1073742336,Nl.a,Nl.a,[]),i.xb(1073742336,Bl,Bl,[]),i.xb(1073742336,Ll.a,Ll.a,[]),i.xb(1073742336,jl.a,jl.a,[]),i.xb(1073742336,Fl.a,Fl.a,[]),i.xb(1073742336,Jl.a,Jl.a,[]),i.xb(1073742336,Si.b,Si.b,[]),i.xb(1073742336,Ul.a,Ul.a,[]),i.xb(1073742336,Kl.a,Kl.a,[]),i.xb(1073742336,Ql.a,Ql.a,[]),i.xb(1073742336,Wl.a,Wl.a,[]),i.xb(1073742336,$l.a,$l.a,[]),i.xb(1073742336,Vl.a,Vl.a,[]),i.xb(1073742336,Yl.a,Yl.a,[]),i.xb(1073742336,Gl.a,Gl.a,[]),i.xb(1073742336,Xl.a,Xl.a,[]),i.xb(1073742336,Zl.a,Zl.a,[]),i.xb(1073742336,ta.a,ta.a,[]),i.xb(1073742336,ea.a,ea.a,[]),i.xb(1073742336,na.a,na.a,[]),i.xb(1073742336,ia.a,ia.a,[]),i.xb(1073742336,sa.a,sa.a,[]),i.xb(1073742336,la.a,la.a,[]),i.xb(1073742336,aa.a,aa.a,[]),i.xb(1073742336,ra.a,ra.a,[]),i.xb(1073742336,oa,oa,[]),i.xb(1073742336,ua,ua,[]),i.xb(1073742336,ca.a,ca.a,[]),i.xb(1073742336,da,da,[]),i.xb(1073742336,ha.a,ha.a,[]),i.xb(1073742336,pa.a,pa.a,[]),i.xb(1073742336,_a,_a,[]),i.xb(1073742336,ma,ma,[]),i.xb(1073742336,s,s,[]),i.xb(1024,o.k,(function(){return[[{path:"",component:al}],[{path:"",component:hi.a}]]}),[])])}))},jwN2:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ScientificCalcComponent}));class ScientificCalcComponent{constructor(){this.deg=!0,this.rad=!1}ngAfterViewInit(){}checkParanthesis(t){let e=[];for(let n=0;n<t.length;n++)"("===t[n]?e.push(t[n]):")"===t[n]&&("("===e[e.length-1]?e.pop():e.push("#"));return e.length}input(t){let e=document.getElementById("result"),n=document.getElementById("myPara");if(e.value+=t,n.innerHTML+=t,")"===t&&0===this.checkParanthesis(e.value)&&0!==this.checkParanthesis(n.innerHTML)){let t=this.checkParanthesis(n.innerHTML);for(;t;)n.innerHTML+=" )",t-=1}}factorial(t){if(Number.isInteger(t))return t<2?1:t*this.factorial(t-1)}sqrt(){let t=document.getElementById("result"),e=document.getElementById("myPara");t.value+="sqrt(",e.innerHTML+=/[\d)IE]/.test(e.innerHTML.slice(-1))?" * Math.sqrt(":"Math.sqrt("}cbrt(){let t=document.getElementById("result"),e=document.getElementById("myPara");t.value+="cbrt(",e.innerHTML+=/[\d)IE]/.test(e.innerHTML.slice(-1))?" * Math.cbrt(":"Math.cbrt("}leftParen(){let t=document.getElementById("result"),e=document.getElementById("myPara");t.value+="(",e.innerHTML+=/[\d)IE]/.test(e.innerHTML.slice(-1))?" * (":"("}piOrE(t){let e=document.getElementById("result"),n=document.getElementById("myPara");"pi"==t?(e.value+="\u03c0",n.innerHTML+=/[\d)IE]/.test(n.innerHTML.slice(-1))?" * Math.PI":"Math.PI"):(e.value+="e",n.innerHTML+=/[\d)IE]/.test(n.innerHTML.slice(-1))?" * Math.E":"Math.E")}log(t){let e=document.getElementById("result"),n=document.getElementById("myPara");1==t?(e.value+="log(",n.innerHTML+=/[\d)IE]/.test(n.innerHTML.slice(-1))?" * Math.log10(":"Math.log10("):(e.value+="ln(",n.innerHTML+=/[\d)IE]/.test(n.innerHTML.slice(-1))?" * Math.log(":"Math.log(")}trigo(t){let e=document.getElementById("result"),n=document.getElementById("myPara");e.value+=t+"(",this.deg?n.innerHTML+=/[\d)IE]/.test(n.innerHTML.slice(-1))?" * Math."+t+"(Math.PI / 180 * ":"Math."+t+"(Math.PI / 180 * ":this.rad&&(n.innerHTML+=/[\d)IE]/.test(n.innerHTML.slice(-1))?" * Math."+t+"(1 * ":"Math."+t+"(1 * ")}itrigo(t){let e=document.getElementById("result"),n=document.getElementById("myPara");e.value+=t+"(",this.deg?n.innerHTML+=/[\d)IE]/.test(n.innerHTML.slice(-1))?" * ((180 / Math.PI) * Math."+t+"(1 *":"((180 / Math.PI) * Math."+t+"(1 *":this.rad&&(n.innerHTML+=/[\d)IE]/.test(n.innerHTML.slice(-1))?" * Math."+t+"(1 *":"Math."+t+"(1 *")}degRad(t){t?(this.deg=!0,this.rad=!1):(this.rad=!0,this.deg=!1)}multOrDiv(t){let e=document.getElementById("result"),n=document.getElementById("myPara");"mult"==t?(e.value+="\xd7",n.innerHTML+="*"):(e.value+="\xf7",n.innerHTML+="/")}del(){let t=document.getElementById("result"),e=document.getElementById("myPara"),n=document.getElementById("myAns");if("Ans"==t.value.slice(-3))e.innerHTML=/[\d)IE]/.test(t.value.slice(-4,-3))?e.innerHTML.slice(0,-(n.innerHTML.length+3)):e.innerHTML.slice(0,-n.innerHTML.length),t.value=t.value.slice(0,-3);else if("Error!"==t.value||"Infinite!"==t.value)this.ac();else switch(e.innerHTML.slice(-2)){case"* ":e.innerHTML=/[\d)IE]/.test(t.value.slice(-5,-4))?e.innerHTML.slice(0,-28):e.innerHTML.slice(0,-25),t.value=t.value.slice(0,-4);break;case" *":this.deg?(e.innerHTML=/[\d)IE]/.test(t.value.slice(-6,-5))?e.innerHTML.slice(0,-35):e.innerHTML.slice(0,-32),t.value=t.value.slice(0,-5)):(e.innerHTML=(/[\d)IE]/.test(t.value.slice(-6,-5)),e.innerHTML.slice(0,-13)),t.value=t.value.slice(0,-5));break;case"0(":e.innerHTML=/[\d)IE]/.test(t.value.slice(-5,-4))?e.innerHTML.slice(0,-14):e.innerHTML.slice(0,-11),t.value=t.value.slice(0,-4);break;case"g(":e.innerHTML=/[\d)IE]/.test(t.value.slice(-4,-3))?e.innerHTML.slice(0,-12):e.innerHTML.slice(0,-9),t.value=t.value.slice(0,-3);break;case"t(":e.innerHTML=/[\d)IE]/.test(t.value.slice(-6,-5))?e.innerHTML.slice(0,-13):e.innerHTML.slice(0,-10),t.value=t.value.slice(0,-5);break;case"PI":e.innerHTML=/[\d)IE]/.test(t.value.slice(-2,-1))?e.innerHTML.slice(0,-10):e.innerHTML.slice(0,-7),t.value=t.value.slice(0,-1);break;case".E":e.innerHTML=/[\d)IE]/.test(t.value.slice(-2,-1))?e.innerHTML.slice(0,-9):e.innerHTML.slice(0,-6),t.value=t.value.slice(0,-1);break;case" )":case") ":e.innerHTML=e.innerHTML.slice(0,-3),t.value=t.value.slice(0,-1);break;default:e.innerHTML=e.innerHTML.slice(0,-1),t.value=t.value.slice(0,-1)}}ac(){let t=document.getElementById("result"),e=document.getElementById("myPara");t.value=e.innerHTML=""}ans(){let t=document.getElementById("result"),e=document.getElementById("myPara"),n=document.getElementById("myAns");t.value+="Ans",e.innerHTML+=/[\d)IE]/.test(e.innerHTML.slice(-1))?" * "+n.innerHTML:n.innerHTML}equal(){let x=document.getElementById("result");try{let y=document.getElementById("myPara"),z=document.getElementById("myAns");for(let t=0;t<x.value.split("(").length-x.value.split(")").length;t++)y.innerHTML+=")";""!=y.innerHTML&&(x.value=y.innerHTML=z.innerHTML=eval(y.innerHTML.replace(/(\d+\.?\d*)\!/g,"this.factorial($1)").replace(/(\(?[^(]*\)?)\^(\(?.*\)?)/,"Math.pow($1, $2)"))),isFinite(x.value)||(x.value="Infinite!")}catch(err){x.value="Error!"}}}},"m/5E":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"a",(function(){return TesttakingPlaygroundComponent}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("mrSG"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("8Y7J"),_leaderboard__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ojYq"),_services_test_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("EPgW"),_services_global_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("4WDQ"),_services_socket_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5U9e"),_environments_environment__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("AytR"),lodash__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("LvDl"),lodash__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_7__);class TesttakingPlaygroundComponent{constructor(t,e,n,i,s){this.globalService=t,this.testService=e,this.socketService=n,this.datepipe=i,this.renderer=s,this.success=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.m,this.leaderboard=new _leaderboard__WEBPACK_IMPORTED_MODULE_2__.a(this.testService),this.serviceSubs=[],this.t_counter=0,this.s_counter=0,this.dialogHeader="",this.matchPercentage=0,this.alertCountDown=0,this.showChat=!1,this.questionList=[],this.testSummary=[],this.enableCallNotification=!1,this.isOnCall=!1,this.isOnCallObj={type:"onCall",value:!1},this.showCallLoader=!1,this.staffName="",this.adminParticipantID="",this.livescreensharingJoined=!1,this.videoCallJoined=!1,this.adminUserID="",this.callTypeTwilio=!1,this.projectInstanceArray=[],this.pauseTimerForProject=!1,this.liveScreenShare=!1,this.disablePrevAndLockSection="true",this.compilationErrorMessages=["COMPILATION ERROR","Failed to compile","ClassNotFoundException","Unsupported major.minor version","container not found","Test suite failed to run"],this.projectFaqList=[{question:"How to deploy?",answer:"You can deploy app to port 8080 to make it public. Then click deployed Url to open it."},{question:"How to deploy rest api / secondary app?",answer:"You can deploy secondary app to port 8081 to make it public. Then click api Url to open it."}],this.attemptVal=["one","two","three","four","five","six","seven","eight","nine","ten"],this.updateInstruction=!0,this.startLoader=!1,this.errorReported="",this.reportFlag=!1,this.disableLock=!1,this.nonManualQuestionMark=0,this.countManual=0,this.totalMark=0,this.choiceMaunalCount=0,this.submit_counter=0,this.submitTime="00:59",this.retrying=!1,this.displayShareScreenDialog=!1,this.isMobile=!1,this.participantDisconnected=(t,e)=>{document.getElementById(t.sid).remove(),0==lodash__WEBPACK_IMPORTED_MODULE_7__.size(e.twilioRoom&&e.twilioRoom.participants?e.twilioRoom.participants:{})&&(this.twilioRoom.localParticipant&&e.liveScreenShareTwilio&&(e.twilioRoom.localParticipant.unpublishTrack(e.liveScreenShareTwilio),e.liveScreenShareTwilio.stop(),e.liveScreenShareTwilio=void 0,clearTimeout(e.screenShareParticipantTimer)),e.twilioRoom.disconnect(),e.twilioRoom=void 0,e.isOnCall=!1,e.isOnCallObj={type:"onCall",value:!1})},this.initJitsiScreenShare(),this.isAutoCutoffEnabled(),this.formatSectionWiseQuestionData(),this.testService.detectWindowMove(),this.timerRunner(),this.socketHandler(),this.onlineOfflineHandler(),this.presentationHandler(),this.windowMoveHandler(),this.windowFocus(),this.screenShareHandler(),this.chatInitialize(),this.updateQuestionCount(),this.testService&&this.testService.testData&&this.testService.testData.c_modules&&(this.liveScreenSharingFeature=this.testService.testData.c_modules.live_screen_sharing_feature,this.noOfTimeScreenSharingPause=this.testService.testData.c_modules.no_of_time_screen_sharing_pause,this.autoSubmitCutOffPeriod=this.testService.testData.c_modules.auto_submit_cut_off_period),this.testService&&this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.enable_copy_paste?this.testService.removeCopyPasteHandler():this.testService.copyPasteHandler(),"false"!==this.disablePrevAndLockSection&&this.questionAnswerActionHandle({type:"disable_previous_and_lock_section"})}initJitsiScreenShare(){const t=navigator.userAgent,e=/android|iphone|kindle|ipad/i.test(t),n=t.toLowerCase().indexOf("firefox")>-1;!this.testService.testData.c_modules.live_screen_sharing||e||n||(this.screenShare(this),this.liveScreenShare=!0)}ngOnInit(){const t=navigator.userAgent;/android|iphone|kindle|ipad/i.test(t)&&(this.isMobile=!0)}ngOnDestroy(){this.timerRunnerSub&&clearInterval(this.timerRunnerSub),(this.twilioRoom||this.jitsiAPI||this.liveScreenShareMeeting)&&this.disconnectUserFromCall(),this.serviceSubs.forEach(t=>{t&&t.unsubscribe()}),this.stopRecording(),this.testService.copyPasteHandler(),this.projectInstanceArray&&this.projectInstanceArray.length&&this.formatForStopInstance()}getDevice(){return window.innerWidth>992?"desktop":"mobile"}showGrowlMsg(t,e,n,i){this.globalService.commonGrowl.next({time:t,severity:e,summary:n,detail:i})}clearAnswer(){this.current_q.clear_answer_count=this.current_q.clear_answer_count>=0?this.current_q.clear_answer_count+1:1,this.current_q.attempted=!1,this.current_q.state=3,this.eventTracker("clear-answer")}onDialogClose(){this.dialogVisible=!1,this.dialogHeader="",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!1,this.dialogClosable=!1,this.alertData=void 0,this.congratsPopUp&&this.FinalSubmit()}onSubmitTestClick(t){this.testService.testData.c_modules.disable_manual_submit||(this.checkQuestionSubmitted()?this.triggerAlert("Test",t):this.checkAnswerIsTyped()?this.triggerAlert("Question",t):this.triggerAlert("Test",t))}onSubmitSectionClick(t){let e=!0,n={};if(n.index=this.current_q.secIndex?this.current_q.secIndex:0,this.testService.testData.frozen_data.frozen_test_data[n.index]&&(e=this.checkCutoffPercentage(n)),e){if(this.testService.testData.c_modules.disable_manual_submit)return;this.checkQuestionSubmitted()?this.triggerAlert("Test",t):this.checkAnswerIsTyped()?this.triggerAlert("Question",t):this.triggerAlert("Test",t)}else this.showGrowlMsg(8e3,"error","Failed to move next section!","Your current section cutoff percentage is not matched")}onCalculatorClick(){this.alertData=void 0,this.dialogHeader="Calculator",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!0,this.dialogStyle=document.body.offsetWidth>480?{width:"320px",top:"20%",height:"auto","min-height":"unset"}:{width:"100%",top:"20%",height:"auto","min-height":"unset"},this.dialogVisible=!0,this.dialogClosable=!0}onScifiCalcClick(){this.alertData=void 0,this.dialogHeader="Scientific Calculator",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!0,this.dialogStyle=document.body.offsetWidth>480?{width:"350px",top:"20%",height:"auto","min-height":"unset"}:{width:"100%",top:"20%",height:"auto","min-height":"unset"},this.dialogVisible=!0,this.dialogClosable=!0}onlineOfflineHandler(){const t=this.testService.isOffline.subscribe(t=>{this.isOffline=t});this.serviceSubs.push(t)}uploadScreenShot(t){return new Promise((e,n)=>{if(t&&t.type){const n={file_name:this.testService.userData.school_id+"/"+this.testService.testData.c_id+"/"+this.testService.testData.t_id+"/"+this.testService.testData.attempt_no+"/"+this.testService.userData.user_id+"/suspicious-scr-shot-"+this.testService.testData.instanceTime.getTime()+"-curr_time-"+this.testService.testData.t_counter,type:t.type,Bucket_name:this.globalService.proctoring_bucket};this.globalService.getSignedUrl(n).subscribe(i=>{i&&i.data?this.globalService.uploadUsingSignedUrl(i.data.url,t).subscribe(t=>{e(_environments_environment__WEBPACK_IMPORTED_MODULE_6__.a.s3ObjectProctorBucket+n.file_name)},()=>{e(!1)}):e(!1)})}else this.shareScreenErrorWarn("Could not access screen sharing media!","scr-share-error"),e(!1)})}updateSuspiciousScreenShots(t){this.testService.testData&&this.testService.testData.client_data&&(this.testService.testData.client_data.suspicious_scr_shots||(this.testService.testData.client_data.suspicious_scr_shots=[]),this.testService.testData.client_data.suspicious_scr_shots.push(t))}captureScreenShot(){if(this.testService.testData.c_modules.scr_capture_on_suspicious)if(this.testService.screenShareMedia)setTimeout(()=>{const t=document.createElement("canvas");t.width=this.screenShareVideoElement.videoWidth,t.height=this.screenShareVideoElement.videoHeight,t.getContext("2d").drawImage(this.screenShareVideoElement,0,0),t.toBlob(t=>{this.testService.testData&&this.testService.testData.client_data&&this.uploadScreenShot(t).then(t=>{t&&this.updateSuspiciousScreenShots(t)})})},500);else{if(this.testService.testData&&this.testService.testData.client_data&&!this.testService.testData.c_modules.only_desktop&&this.testService.testData.client_data.OS&&("Android"===this.testService.testData.client_data.OS.name||"iOS"===this.testService.testData.client_data.OS.name))return;this.shareScreenErrorWarn("Screen sharing is not established successfully","scr-share-error")}}showTabSwitchWarning(){this.testService.testData&&this.testService.testData.client_data&&this.testService.testData.c_modules.tab_monitor&&this.testService.testData.c_modules.tabswitchcount&&this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0,summary:`<p>This is a digitally proctored test. Tab switching is prohibited!</p><p>Number of Tab switches done: <b>${this.testService.testData.client_data.tabswitched}</b>`,detail:"If you switch tabs, your test will end and you will be disqualified!",acceptButton:{btnName:"Okay",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:()=>{},id:"tt-playground-alert-accept"}}})}showCopyPasteWarning(){this.testService.testData&&this.testService.testData.client_data&&this.testService.testData.c_modules.copy_past_monitor&&this.testService.testData.c_modules.copyPasteCount&&this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0,summary:`<p>This is a digitally proctored test. Copy Paste is prohibited!</p><p>Number of copies done: <b>${this.testService.testData.client_data.copyPasted}</b>`,detail:"If you copy again, your test will end and you will be disqualified!",acceptButton:{btnName:"Okay",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:()=>{},id:"tt-playground-alert-accept"}}})}presentationHandler(){const t=this.testService.isPresentationChange.subscribe(t=>{1!==t||this.presentationDetected||!this.testService.testData.c_modules.external_display_prevent||navigator.userAgent.includes("SEB")||(this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0,summary:"Your test will be paused now",detail:"Secondary display detected. Please disconnect and resume"}}),this.presentationDetected=!0,this.eventTracker("has-external-monitor"),setTimeout(()=>{this.pauseTest()},15e3))});this.serviceSubs.push(t)}pauseTabSwitchMonitor(){this.current_q.stop_detection=!0}resumeTabSwitchMonitor(){this.current_q.stop_detection=!1}windowMoveHandler(){const t=this.testService.isWindowChange.subscribe(t=>"visible"===document.visibilityState&&document.activeElement instanceof HTMLIFrameElement||this.current_q.stop_detection?0:void(t&&(this.testService.testData.c_modules.tabswitchcount>=this.testService.testData.client_data.tabswitched&&(this.testService.testData.client_data.tabswitched+=1,this.eventTracker("tab-switch-done"),this.showTabSwitchWarning()),this.captureScreenShot())));this.serviceSubs.push(t)}windowFocus(){if(this.testService.testData&&this.testService.testData.client_data&&this.testService.testData.c_modules.copy_past_monitor&&this.testService.testData.c_modules.copyPasteCount){let t=this;window.onfocus=function(e){"Firefox"!=t.testService.testData.client_data.browser.name?window.navigator.clipboard.readText().then(e=>{e!=t.testService.clipboard_data&&"Could not copy"!=e&&(t.alertData.visible=!1,t.testService.clipboard_data=e,t.triggerCopied())}).catch(t=>{console.log(t)}):t.copyPasteCheckForQues(t.current_q)},"Firefox"===this.testService.testData.client_data.browser.name&&["keypress","keyup","keydown"].forEach(e=>{document.addEventListener(e,(function(e){setTimeout(()=>{t.testService.setCurrentQuesForCopyPaste()},500)}),!1)})}}copyPasteCheckForQues(t){t&&("programming_file_based"===this.current_q.question_type?this.testService.currAnswer!=this.current_q.langList[this.current_q.langListIndex].files[0].data&&null!=this.current_q.langList[this.current_q.langListIndex].files[0].data&&(this.testService.currAnswer=this.current_q.langList[this.current_q.langListIndex].files[0].data,this.triggerCopied()):"programming"===this.current_q.question_type?this.current_q.langList[this.current_q.langListIndex].codeEntered!=this.testService.currAnswer&&this.current_q.langList[this.current_q.langListIndex].codeEntered!=this.testService.currAnswer!=null&&(this.testService.currAnswer=this.current_q.langList[this.current_q.langListIndex].codeEntered,this.triggerCopied()):"html_css_js"===this.current_q.question_type?this.testService.currAnswer.htmlCodeEntered!=this.current_q.answer.htmlCodeEntered&&this.testService.currAnswer.cssCodeEntered!=this.current_q.answer.cssCodeEntered&&this.testService.currAnswer.jsCodeEntered!=this.current_q.answer.jsCodeEntered&&null!=this.testService.currAnswer.jsCodeEntered&&(this.testService.currAnswer=this.current_q.answer,this.triggerCopied()):"essay_email_writing"!==this.current_q.question_type&&"descriptive_answer_writing_text"!==this.current_q.question_type&&"descriptive_answer_writing"!==this.current_q.question_type||this.testService.currAnswer!=this.current_q.answer&&null!=this.current_q.answer&&(this.testService.currAnswer=this.current_q.answer,this.triggerCopied()))}triggerCopied(){this.alertData.visible=!1,this.testService.testData.client_data.copyPasted+=1,this.showCopyPasteWarning()}windowResizeHandler(){const t=this.testService.isWindowResize.subscribe(t=>{if(t)return this.current_q.stop_detection||(this.isFullscreenExit=!0),void this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!1,alertData:{visible:!0,summary:"Please enable Fullscreen!",detail:"Test can be continued only in fullscreen",acceptButton:{btnName:"Enable Fullscreen",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:this.testService.goFullScreen.bind(this),id:"tt-playground-alert-accept"}}});this.alertData&&"Please enable Fullscreen!"===this.alertData.summary&&this.onDialogClose(),this.current_q.stop_detection=!1,this.isFullscreenExit=!1});this.serviceSubs.push(t)}shareScreenErrorWarn(t,e){this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0,summary:"You will be moved out of test!",detail:t}}),this.eventTracker(e),setTimeout(()=>{this.pauseTest()},1e4)}screenShareStoppedHandler(){this.shareScreenErrorWarn("Screen sharing has been stopped","scr-share-stopped")}screenShareHandler(){if(this.testService.testData.c_modules.scr_capture_on_suspicious)if(this.testService.screenShareMedia){this.screenShareVideoElement=document.createElement("video"),this.screenShareVideoElement.srcObject=this.testService.screenShareMedia,this.screenShareVideoElement.autoplay=!0;const t=this.testService.screenShareMedia.getTracks();t&&t[0]&&("ended"===t[0].readyState&&this.screenShareStoppedHandler(),t[0].onended=this.screenShareStoppedHandler.bind(this))}else{if(this.testService.testData&&this.testService.testData.client_data&&!this.testService.testData.c_modules.only_desktop&&this.testService.testData.client_data.OS&&("Android"===this.testService.testData.client_data.OS.name||"iOS"===this.testService.testData.client_data.OS.name))return;this.shareScreenErrorWarn("Screen sharing is not established successfully","scr-share-error")}}chatInitialize(){this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.manual_proctoring&&this.testService.getStProcDetails({c_id:this.testService.testData.c_id,t_id:this.testService.testData.t_id}).subscribe(t=>{t&&(this.testService.testData.ct_id=t.ct_id,this.testService.testData.manual_proctoring=t.manual_proctoring,this.showChat=!0)},t=>{})}calculateAllQuestionCount(){this.triggerQuestionCount=!this.triggerQuestionCount}headerActionHandle(t){switch(t.type){case"Submit Test":this.onSubmitTestClick(t),localStorage.removeItem("alreadyRedirected");break;case"Submit Section":this.onSubmitSectionClick(t);break;case"Pause Test":this.checkQuestionSubmitted()?(this.triggerAlert("Test",t),localStorage.removeItem("alreadyRedirected"),localStorage.removeItem("externalIframePath")):this.checkAnswerIsTyped()?this.triggerAlert("Question",t):(this.triggerAlert("Test",t),localStorage.removeItem("alreadyRedirected"),localStorage.removeItem("externalIframePath"));break;case"Calculator":this.onCalculatorClick();break;case"Scientific Calculator":this.onScifiCalcClick();break;case"Section Summary":this.showMobileSummary=!0}}sectionsActionHandle(t){let e=!0,n=this.current_q.secIndex?this.current_q.secIndex:0;if(this.testService.testData.frozen_data.frozen_test_data[n]&&(e=this.checkCutoffPercentage(t)),e&&t.index>=n+1||t.index===n)switch(t.type){case"Section Move":if(this.testService.testData.c_modules.lock_sections||this.testService.testData.c_modules.disable_previous||this.testService.testData.c_modules.answer_mandatory&&!this.current_q.attempted)return;this.checkQuestionSubmitted()?this.setQuestionByIndex(t.index,0):this.checkAnswerIsTyped()?this.triggerAlert("Question",t):this.setQuestionByIndex(t.index,0)}else if(t.index<n)switch(t.type){case"Section Move":if(this.testService.testData.c_modules.lock_sections||this.testService.testData.c_modules.disable_previous||this.testService.testData.c_modules.answer_mandatory&&!this.current_q.attempted)return;this.checkQuestionSubmitted()?this.setQuestionByIndex(t.index,0):this.checkAnswerIsTyped()?this.triggerAlert("Question",t):this.setQuestionByIndex(t.index,0)}else this.showGrowlMsg(8e3,"error","Failed to move next section!","Your current section cutoff percentage is not matched")}questionAnswerActionHandle(t){switch(t.type){case"sendCompileToStream":this.sendCompileToStream(t.data,t.question_type);break;case"sendDebugToStream":this.sendDebugToStream(t.data,t.question_type);break;case"showGrowlMsg":this.showGrowlMsg(t.data.time,t.data.severity,t.data.summary,t.data.detail);break;case"event":this.eventTracker(t.data.event_type);break;case"pauseTimer":this.pauseTimerForProject=!0;break;case"resumeTimer":this.pauseTimerForProject=!1;break;case"retryProjectInstance":this.createInstance(t.data);break;case"projectTestCase":case"submitProject":this.runProjectTestCases(t);break;case"sendCloudToStream":case"cloudTestCase":case"submitCloud":this.sendCloudToStream(t,t.question_type);break;case"openProjectFAQ":this.openFAQ();break;case"loader":this.loaderHandler(t.data);break;case"clear-answer":this.clearAnswer();break;case"delete-file":this.triggerAlert("Custom",{dialogHeader:"Confirmation",dialogHeaderRequired:!0,dialogClosable:!1,alertData:{visible:!0,summary:"Are you sure you want to delete the file?",rejectButton:{btnName:"No",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:()=>{},id:"tt-playground-alert-reject"},acceptButton:{btnName:"Yes",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:()=>{this.current_q.doAction={type:"delete-confirm"}},id:"tt-playground-alert-accept"}}});break;case"Add File":this.triggerAlert("Custom",t.data);break;case"Show Hint":this.current_q.total_hints_shown?this.showHint():this.triggerAlert("Question",t);break;case"Report Error":this.triggerAlert("Question",t);break;case"compiler-instruction":this.showCompilerInstruction();break;case"pause-test":this.pauseTest();break;case"submit-test":this.submitTest();break;case"submit-section":this.submitSection();break;case"Start Loader":case"Stop Loader":this.success.emit(t);break;case"pause-timer":this.toggleTimer(!0);break;case"resume-timer":this.toggleTimer(!1);break;case"capture-scr-shot":this.captureScreenShot();break;case"clear-confirmation":this.triggerAlert("Custom",{dialogHeader:"Confirmation",dialogHeaderRequired:!0,dialogClosable:!1,alertData:{visible:!0,summary:"Are you sure you want to clear the Answer?",rejectButton:{btnName:"No",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:()=>{},id:"tt-playground-alert-reject"},acceptButton:{btnName:"Yes",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:()=>{this.current_q.doAction={type:"clear-confirm"}},id:"tt-playground-alert-accept"}}});break;case"CreateVariable":this.triggerAlert("CreateVariable",t);break;case"preview-file":this.triggerAlert("Custom",{dialogHeader:"Preview",dialogHeaderRequired:!0,dialogClosable:!1,alertData:{visible:!0,iframe:t.data.url,type:t.data.type,rejectButton:{btnName:"Cancel",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:()=>{t&&t.data&&t.data.note&&"file_upload_question"===t.data.note&&(this.current_q.doAction={type:"remove-file"})},id:"tt-playground-alert-reject"},acceptButton:{btnName:"Upload",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:()=>{this.current_q.doAction={type:"upload-file"}},id:"tt-playground-alert-accept"}}});break;case"QR-dialog":this.triggerAlert("Custom",{dialogHeader:"Scan the QR Code",dialogHeaderRequired:!0,dialogClosable:!0,dialogStyle:t.data.dialogStyle,alertData:{visible:!0,src:t.data.url,qr_image:!0}});break;case"QR-uploaded-image":{let e;t&&t.data&&t.data.result&&(this.imgSrc=t.data.result);const n={visible:!0,result:t.data.result,rejectButton:{btnName:"Cancel",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 31px",fontSize:"14px",tabindex:"1",action:()=>{this.cancelUpload()},id:"tt-playground-alert-reject"},acceptButton:t&&t.data&&!t.data.unsupportedFormat?{btnName:"Confirm & Upload",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 31px",fontSize:"14px",tabindex:"1",action:()=>{this.current_q.doAction={type:"qr-confirm-upload"}},id:"tt-playground-alert-accept"}:null};t.data.fileUpload?(n.qr_text_preview=t.data.alertText,e="Confirm and Upload"):(n.refreshButton={btnName:"Refresh",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:()=>{this.refreshQRUpload()},id:"tt-playground-alert-reject"},n.qr_image_preview=!0,e="Uploaded Image"),this.triggerAlert("Custom",{dialogHeader:e,dialogHeaderRequired:!0,dialogClosable:!0,dialogStyle:t.data.dialogStyle,alertData:n});break}case"QR-close-dialog":this.cancelUpload();case"show-qr-steps":{let e;e=t.data&&t.data.file_upload?"Steps to upload file using QR code":"Steps to upload image using QR code",this.triggerAlert("Custom",{dialogHeader:e,dialogHeaderRequired:!0,dialogClosable:!0,dialogStyle:{width:"80%",margin:"0px auto",top:"10%"},alertData:{file_upload:t.data.file_upload,qr_info:!0,visible:!0}});break}case"download-pdf":this.isFetchedfromS3="no",this.triggerAlert("Custom",{dialogHeader:"Preview",dialogHeaderRequired:!0,dialogClosable:!1,alertData:{visible:!0,iframe:t.data.url,type:t.data.type,rejectButton:{btnName:"Close",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:()=>{this.alertData=null,this.isFetchedfromS3=""},id:"tt-playground-alert-reject"},acceptButton:{btnName:"Download",disable:"false",border:"1px solid var(--one)",fontColor:"var(--white)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:()=>{const e=document.createElement("a");e.setAttribute("download",t.data.name),e.href=t.data.url,e.target="_blank",document.body.appendChild(e),window.onbeforeunload=null,e.dispatchEvent(new MouseEvent("click")),e.remove(),this.dialogVisible=!1,this.isFetchedfromS3=""}}}});break;case"restrict-edit":this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.answer_edit_restrict&&this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0,summary:`<p>Be aware of modifications to answers !</p><p>Total answer edits allowed: <b>${this.testService.testData.c_modules.max_edit_count}</b>,\n                                <p>Exhausted: <b>${this.testService.testData.curr_submit_count>=0?this.testService.testData.curr_submit_count:0}</b> out of <b>${this.testService.testData.c_modules.max_edit_count}</b>`,detail:"",acceptButton:{btnName:"Okay",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:()=>{},id:"tt-playground-alert-accept"}}});break;case"answer_submission_popup":if(this.testService.testData&&this.testService.testData.c_modules&&(this.testService.testData.c_modules.answer_edit_restrict||this.testService.testData.c_modules.answer_mandatory||this.testService.testData.c_modules.tab_monitor)){const e=this.testService.testData.c_modules.answer_mandatory?"<li>All questions are compulsory to attend. In order to move to the next question, you have to answer the current question.</li>":"",n=this.testService.testData.c_modules.answer_edit_restrict&&t.count?'<li>You are allowed to modify the answers only <b>"'+t.count+'"</b> times</li>':"",i=this.testService.testData.c_modules.answer_edit_restrict&&!t.count?"<li>You are not allowed to modify the answers</li>":"",s=this.testService.testData.c_modules.edit_after_section_complete?"<li>This test will allow you to edit the answers only after completing each section</li>":"";let l="",a="";if(this.testService.testData.c_modules.enable_test_submit_cutoff&&this.testService.testData.c_modules.auto_submit_cutoff_time&&new Date(this.testService.testData.c_modules.auto_submit_cutoff_time)>=new Date){const t=this.testService.testData.c_modules.selectedtimezone?this.testService.testData.c_modules.selectedtimezone:"+05:30";let e=this.globalService.timezone(this.testService.testData.c_modules.auto_submit_cutoff_time,t);e=this.datepipe.transform(e,"dd MMM y | hh:mm a"),a="<li>This test will auto submit at <b>"+e+"</b>   (GMT "+t+")</li>",l="Please submit your answer well before that, in order to avoid loss of data"}const r=e+n+i+s+(this.testService.testData.c_modules.tabswitchcount>=0&&this.testService.testData.c_modules.tab_monitor?"<li>You are not allowed to switch the tab. The test will end and you will be disqualified,\n                     if you try to switch the tab</li>":"")+(this.testService.testData.c_modules.disable_previous?"<li>Disable Previous Button has been Enabled. You won't be able to edit or come back to the previous question, once you moved further.</li>":"")+(this.testService.testData.c_modules.lock_sections?"<li> Sectional Lock has been Enabled. You won't be able to edit/ view the section once you move to successive sections (or) once the timer runs out.</li>":"")+a;""===r&&(l=""),this.triggerAlert("Custom",{dialogHeader:"Test Instruction",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0,summary:`<ul>${r}</ul>`,detail:l,infoPopup:!0,acceptButton:{btnName:"Okay",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:()=>{},id:"tt-playground-alert-accept"}}})}break;case"disable_previous_and_lock_section":if(this.testService.testData&&this.testService.testData.c_modules){let t="",e="";if(this.testService.testData.c_modules.enable_test_submit_cutoff&&this.testService.testData.c_modules.auto_submit_cutoff_time&&new Date(this.testService.testData.c_modules.auto_submit_cutoff_time)>=new Date){const n=this.testService.testData.c_modules.selectedtimezone?this.testService.testData.c_modules.selectedtimezone:"+05:30";let i=this.globalService.timezone(this.testService.testData.c_modules.auto_submit_cutoff_time,n);i=this.datepipe.transform(i,"dd MMM y | hh:mm a"),e="<li>This test will auto submit at <b>"+i+"</b>   (GMT "+n+")</li>",t="Please submit your answer well before that, in order to avoid loss of data"}void 0===e&&(e="");const n=(this.testService.testData.c_modules.disable_previous?"<li>Disable Previous Button has been Enabled. You won't be able to edit or come back to the previous question, once you moved further.</li>":"")+(this.testService.testData.c_modules.lock_sections?"<li> Sectional Lock has been Enabled. You won't be able to edit/ view the section once you move to successive sections (or) once the timer runs out.</li>":"")+e;""!==n&&this.triggerAlert("Custom",{dialogHeader:"Test Instruction",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0,summary:`<ul>${n}</ul>`,detail:t,infoPopup:!0,acceptButton:{btnName:"Okay",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:()=>{},id:"tt-playground-alert-accept"}}})}}}proctorActionHandle(t){switch(t.type){case"showGrowlMsg":this.showGrowlMsg(t.data.time,t.data.severity,t.data.summary,t.data.detail);break;case"pause-tab-switch":this.pauseTabSwitchMonitor();break;case"resume-tab-switch":this.resumeTabSwitchMonitor();break;case"pause-timer":this.toggleTimer(!0);break;case"resume-timer":this.toggleTimer(!1);break;case"pause-test":this.pauseTest();break;case"submit-test":this.submitTest();break;case"retry-submit-test":this.testSubmitFailHandler();break;case"show-alert":t.data&&(t.data.showCountDown&&(this.alertCountDown=t.data.showCountDown),this.triggerAlert("Custom",{dialogHeader:t.data.header,dialogHeaderStyle:t.data.dialogHeaderStyle,dialogHeaderRequired:!0,dialogClosable:!1,alertData:{visible:!0,summary:t.data.summary,detail:t.data.detail,showCountDown:t.data.showCountDown,acceptButton:t.data.acceptButton,rejectButton:t.data.rejectButton}}));break;case"Close Dialog":this.onDialogClose();break;case"max-proctoring-alert-exceeded":this.eventTracker(t.type),setTimeout(()=>{this.pauseTest()},1e4)}}footerActionHandle(t){switch(t.type){case"Next":if(t.answer_mandatory&&t.growlMsg){const e={type:"showGrowlMsg"};e.data=t.growlMsg,this.questionAnswerActionHandle(e)}else this.checkQuestionSubmitted()?this.setNextQuestion():this.checkAnswerIsTyped()?this.triggerAlert("Question",t):this.setNextQuestion();break;case"Back":this.checkQuestionSubmitted()?this.setPreviousQuestion():this.checkAnswerIsTyped()?this.triggerAlert("Question",t):this.setPreviousQuestion();break;case"Calculator":this.onCalculatorClick();break;case"Scientific Calculator":this.onScifiCalcClick();break;case"Submit Test":this.onSubmitTestClick(t);break;case"Submit Section":this.onSubmitSectionClick(t)}}sectionSummaryActionHandle(t){switch(t.type){case"Question Move":this.checkQuestionSubmitted()?this.setQuestionByIndex(t.secIndex,t.quesIndex):this.checkAnswerIsTyped()?this.triggerAlert("Question",t):this.setQuestionByIndex(t.secIndex,t.quesIndex);break;case"Submit Test":if(this.testService.testData.c_modules.disable_manual_submit)return;this.checkQuestionSubmitted()?this.triggerAlert("Test",t):this.checkAnswerIsTyped()?this.triggerAlert("Question",t):this.triggerAlert("Test",t);break;case"Submit Section":{let e=!0,n={};if(n.index=this.current_q.secIndex?this.current_q.secIndex:0,this.testService.testData.frozen_data.frozen_test_data[n.index]&&(e=this.checkCutoffPercentage(n)),e){if(this.testService.testData.c_modules.disable_manual_submit)return;this.checkQuestionSubmitted()?this.triggerAlert("Test",t):this.checkAnswerIsTyped()?this.triggerAlert("Question",t):this.triggerAlert("Test",t)}else this.showGrowlMsg(8e3,"error","Failed to move next section!","Your current section cutoff percentage is not matched");break}case"Attempt Summary":this.alertData=void 0,this.dialogHeader="Summary",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!1,this.dialogClosable=!0,this.dialogStyle={width:"100%",height:"100%",top:"unset","max-width":"unset"},this.dialogVisible=!0;break;case"Instructions":this.alertData=void 0,this.dialogHeader="Instructions",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!1,this.dialogClosable=!0,this.dialogStyle={width:"100%",height:"100%",top:"unset","max-width":"unset"},this.dialogVisible=!0}}compilerInsActionHandle(t){switch(t.type){case"Close Dialog":this.onDialogClose()}}instructionActionHandle(t){switch(t.type){case"Close Dialog":this.onDialogClose()}}summaryActionHandle(t){switch(t.type){case"Close Dialog":this.onDialogClose()}}closeMobileSummary(t){this.showMobileSummary=!1}setNextQuestion(){"project_question"===this.current_q.question_type&&this.clearInterval();let t=this.getNextQuestion();t&&(this.testService.testData.current_q=t,this.current_q=this.testService.testData.current_q,5!=this.current_q.state||"programming_file_based"!=this.current_q.question_type&&"programming"!=this.current_q.question_type?5==this.current_q.state&&this.eventTracker("skipped"):setTimeout(()=>{this.eventTracker("skipped")},1e3))}setPreviousQuestion(){"project_question"===this.current_q.question_type&&this.clearInterval();let t=this.getPreviousQuestion();t&&(this.testService.testData.current_q=t,this.current_q=this.testService.testData.current_q,5!=this.current_q.state||"programming_file_based"!=this.current_q.question_type&&"programming"!=this.current_q.question_type?5==this.current_q.state&&this.eventTracker("skipped"):setTimeout(()=>{this.eventTracker("skipped")},1e3))}setQuestionByIndex(t,e){this.testService.testData.current_q=this.testService.testData.frozen_data.frozen_test_data[t].questions[e],this.current_q=this.testService.testData.current_q,5!=this.current_q.state||"programming_file_based"!=this.current_q.question_type&&"programming"!=this.current_q.question_type?5==this.current_q.state&&this.eventTracker("skipped"):setTimeout(()=>{this.eventTracker("skipped")},1e3)}showHint(){if(this.current_q.hint&&this.current_q.hint.length){const t=this.current_q.total_hints_shown%this.current_q.hint.length;this.current_q.show_hint_index=t+1,this.current_q.show_hint=this.current_q.hint[t],this.current_q.total_hints_shown+=1,this.alertData=void 0,this.dialogHeader="Hint",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!0,this.dialogClosable=!0,this.dialogStyle=document.body.offsetWidth>480?{width:"450px",top:"30%",height:"auto","min-height":"unset"}:{width:"100%",top:"30%",height:"auto","min-height":"unset"},this.dialogVisible=!0,this.eventTracker("shown-hint")}}reportQuestion(){this.alertData.input=!1,this.dialogClosable=!1,this.testService.reportQuestion({q_id:this.current_q.q_id,reported_error:this.errorReported}).subscribe(()=>{this.showGrowlMsg(3e3,"success","Success","Question successfully reported")}),this.errorReported=""}checkQuestionSubmitted(){if(this.current_q.disableAnswering)return!0;switch(this.current_q.question_type){case"mcq_single_correct":return this.current_q.previous_answer&&this.current_q.previous_answer.length&&this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.answer_edit_restrict&&this.current_q.answer[0]!==this.current_q.previous_answer[0]&&(this.current_q.program_submitted_count+=1,this.testService.updateEditCount(this.current_q),this.current_q&&this.current_q.program_submitted_count>1&&this.questionAnswerActionHandle({type:"restrict-edit"}),this.eventTracker("submit-program","mcq")),this.current_q.answer&&this.current_q.answer.length&&(this.current_q.previous_answer=JSON.parse(JSON.stringify(this.current_q.answer)),0===this.current_q.program_submitted_count)&&(this.current_q.program_submitted_count+=1,this.testService.updateEditCount(this.current_q),this.current_q&&this.current_q.program_submitted_count>1&&this.questionAnswerActionHandle({type:"restrict-edit"}),this.mcqEventTracker()),!0;case"mcq_multiple_correct":if(this.current_q.previous_answer&&this.current_q.previous_answer.length&&this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.answer_edit_restrict)if(this.current_q.previous_answer.length===this.current_q.answer.length){let t=0;this.current_q.answer.forEach((e,n)=>{e===this.current_q.previous_answer[n]&&t++}),t!==this.current_q.previous_answer.length&&(this.current_q.program_submitted_count+=1,this.testService.updateEditCount(this.current_q),this.current_q&&this.current_q.program_submitted_count>1&&this.questionAnswerActionHandle({type:"restrict-edit"}),this.eventTracker("submit-program","mcq"))}else this.current_q.program_submitted_count+=1,this.testService.updateEditCount(this.current_q),this.current_q&&this.current_q.program_submitted_count>1&&this.questionAnswerActionHandle({type:"restrict-edit"}),this.eventTracker("submit-program","mcq");return this.current_q.answer&&this.current_q.answer.length&&(this.current_q.previous_answer=JSON.parse(JSON.stringify(this.current_q.answer)),0===this.current_q.program_submitted_count)&&(this.current_q.program_submitted_count+=1,this.testService.updateEditCount(this.current_q),this.current_q&&this.current_q.program_submitted_count>1&&this.questionAnswerActionHandle({type:"restrict-edit"}),this.mcqEventTracker()),!0;case"fillup_single_correct":case"programming":case"programming_file_based":case"essay_email_writing":case"descriptive_answer_writing":case"descriptive_answer_writing_text":case"html_css_js":case"frontend_technology":case"video_answer_speaking":case"diagram":case"classification":return this.current_q.attempted;case"block_programming":case"project_question":case"cloud_question":case"file_upload_questions":case"question_paper_upload":return this.current_q.attempted}}questionSubmitWarnMsg(){switch(this.current_q.question_type){case"fillup_single_correct":case"essay_email_writing":case"descriptive_answer_writing":case"classification":case"descriptive_answer_writing_text":return"Your answer is not submitted!";case"programming":case"programming_file_based":case"html_css_js":case"frontend_technology":return"Your code is not submitted!";case"video_answer_speaking":return"Your video is not submitted!";case"block_programming":return"Your block is not submitted";case"diagram":return"Your diagram is not submitted!";case"file_upload_questions":return"Files are not submitted!";case"project_question":return"Your project is not submitted";case"cloud_question":return"Your Cloud Question is not submitted!";case"question_paper_upload":return"Files are not submitted!"}}questionSubmitWarnButton(t){if("accept"!==t)return"Skip and Proceed";switch(this.current_q.question_type){case"fillup_single_correct":case"essay_email_writing":case"descriptive_answer_writing":case"classification":case"descriptive_answer_writing_text":return"Submit Answer";case"programming":case"programming_file_based":case"html_css_js":case"frontend_technology":return"Submit Code";case"video_answer_speaking":return"Submit Video";case"block_programming":return"Submit Block";case"diagram":return"Submit Diagram";case"file_upload_questions":return"Submit Files";case"project_question":return"Submit Project";case"cloud_question":return"Submit Cloud Question";case"question_paper_upload":return"Submit Files"}}triggerQuestionAction(t){this.current_q.doAction=t}triggerAlert(t,e){switch(this.dialogStyle=e.dialogStyle?e.dialogStyle:void 0,t){case"Question":switch(this.dialogHeader="Warning!",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!0,this.alertData={visible:!1,summary:this.questionSubmitWarnMsg(),detail:"",form:void 0,button:void 0,rejectButton:{btnName:this.questionSubmitWarnButton("reject"),border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:void 0,id:"tt-playground-alert-reject"},acceptButton:{btnName:this.questionSubmitWarnButton("accept"),disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:void 0,id:"tt-playground-alert-accept"}},e.type){case"Next":this.alertData.rejectButton.action=this.setNextQuestion.bind(this),this.alertData.acceptButton.action=this.triggerQuestionAction.bind(this,{type:"Submit"});break;case"Back":this.alertData.rejectButton.action=this.setPreviousQuestion.bind(this),this.alertData.acceptButton.action=this.triggerQuestionAction.bind(this,{type:"Submit"});break;case"Question Move":this.alertData.rejectButton.action=this.setQuestionByIndex.bind(this,e.secIndex,e.quesIndex),this.alertData.acceptButton.action=this.triggerQuestionAction.bind(this,{type:"Submit"});break;case"Section Move":this.alertData.rejectButton.action=this.setQuestionByIndex.bind(this,e.index,0),this.alertData.acceptButton.action=this.triggerQuestionAction.bind(this,{type:"Submit"});break;case"Pause Test":case"Submit Test":case"Submit Section":this.alertData.rejectButton.action=this.triggerAlert.bind(this,"Test",e),this.alertData.acceptButton.action=this.triggerQuestionAction.bind(this,{type:"Submit"});break;case"Show Hint":this.alertData.summary="Using hints may result in partial loss of marks. Do you want to continue?",this.alertData.rejectButton.btnName="No",this.alertData.acceptButton.btnName="Yes",this.alertData.rejectButton.action=()=>{},this.alertData.acceptButton.action=this.showHint.bind(this);break;case"Report Error":this.alertData.summary="Do you want to report this question?",this.reportFlag=!0,this.alertData.rejectButton.btnName="No",this.alertData.acceptButton.btnName="Yes",this.alertData.acceptButton.disable=this.errorReported,this.alertData.rejectButton.action=()=>{this.errorReported="",this.dialogClosable=!1},this.alertData.acceptButton.action=this.reportQuestion.bind(this),this.dialogClosable=!0,this.alertData.input=!0}this.reportFlag=!1,this.alertData.visible=!0;break;case"Test":switch(e.type){case"Submit Test":this.dialogHeader="End Test",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!0,this.testService.isTestPaused=!1,this.formatTestSummaryData(),this.alertData={visible:!1,summary:"Are you sure you want to submit this test?",detail:"To confirm, type <b>END</b> in the input box below and then click <b>Yes</b>",alertText:"By typing END, the entire test will get submitted.",form:[{type:"text",name:"name",label:"END",value:"",required:!0,minLength:null,regex:/^end$/i,customError:{error:!1,message:""}}],button:[{multipleBtn:!0,id:"tt-alert-reject",btnName:"No",disable:"false",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",action:void 0},{multipleBtn:!0,id:"tt-alert-accept",btnName:"Yes",border:"1px solid var(--one)",fontColor:"var(--white)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:void 0}],btnStyle:{display:"flex","justify-content":"center"},layout:{display:"flex","flex-direction":"column",width:"100%"},customizeRowStyle:{display:"flex","flex-direction":"column",width:"100%"},btnContStyle:{margin:"0px 14px 10px 0px",height:"36px","min-width":"80px"}};break;case"Submit Section":this.dialogHeader="End Section",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!0,this.alertData={visible:!1,summary:"Are you sure you want to submit this section?",detail:`To confirm, type <b>${this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].name}</b> in the input box below and then click <b>Yes</b>`,form:[{type:"text",name:"name",label:this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].name,value:"",required:!0,minLength:null,regex:this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].name,customError:{error:!1,message:""}}],button:[{multipleBtn:!0,id:"tt-alert-reject",btnName:"No",disable:"false",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",action:void 0},{multipleBtn:!0,id:"tt-alert-accept",btnName:"Yes",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:void 0}],btnStyle:{display:"flex","justify-content":"center"},layout:{display:"flex","flex-direction":"column",width:"100%"},customizeRowStyle:{display:"flex","flex-direction":"column",width:"100%"},btnContStyle:{margin:"0px 14px 10px 0px",height:"36px","min-width":"80px"}};break;case"Pause Test":this.dialogHeader="Pause Test",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!0,this.alertData={visible:!1,summary:"Are you sure you want to pause the test?",detail:"",form:void 0,button:void 0,rejectButton:{btnName:"No",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:void 0,id:"tt-playground-alert-reject"},acceptButton:{btnName:"Yes",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:void 0,id:"tt-playground-alert-accept"}},this.alertData.acceptButton.action=this.pauseTest.bind(this),this.alertData.rejectButton.action=()=>{}}this.alertData.visible=!0;break;case"CreateVariable":this.dialogHeader="Create Variable",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!0,this.alertData={visible:!1,summary:"Are you sure want to create a new variable?",detail:'Type new variable name and click "Create"',form:[{type:"text",name:"name",label:"Enter variable name",value:"",required:!0,minLength:null,customError:{error:!1,message:""}}],button:[{multipleBtn:!0,id:"tt-alert-reject",btnName:"Close",disable:"false",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",action:void 0},{multipleBtn:!0,id:"tt-alert-accept",btnName:"Create",border:"1px solid var(--one)",fontColor:"var(--white)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",action:void 0}],btnStyle:{display:"flex","justify-content":"center"},layout:{display:"flex","flex-direction":"column",width:"100%"},customizeRowStyle:{display:"flex","flex-direction":"column",width:"100%"},btnContStyle:{margin:"0px 14px 10px 0px",height:"36px","min-width":"80px"}},this.alertData.visible=!0;break;case"Custom":this.dialogHeader=e.dialogHeader,this.dialogHeaderStyle=e.dialogHeaderStyle,this.dialogHeaderRequired=e.dialogHeaderRequired,this.dialogClosable=e.dialogClosable,this.alertData=e.alertData}"Custom"===t&&e&&e.alertData&&e.alertData.iframe?this.dialogStyle=document.body.offsetWidth>480?{top:"10%",height:"85%","min-height":"unset",bottom:"10%"}:{width:"100%",top:"10%",height:"auto","min-height":"unset",bottom:"10%"}:"Custom"===t&&e&&e.congratsPopup?(this.congratsPopUp=!0,this.dialogStyle={width:"60%",top:"30%",height:"auto","min-height":"15%"}):this.dialogStyle||(this.dialogStyle=document.body.offsetWidth>480?{width:"450px",top:"30%",height:"auto","min-height":"unset"}:{width:"100%",top:"30%",height:"auto","min-height":"unset"}),this.dialogVisible=!0}alertFormSubmit(t){const e=this.dialogHeader;if(this.onDialogClose(),t)switch(t.type){case"Yes":switch(e){case"End Test":this.submitTest("test-submitted");break;case"End Section":this.submitSection()}break;case"Create File":t.value&&t.value.value&&t.value.value.name&&this.triggerQuestionAction({type:"Create File",data:{label:t.value.value.name}});break;case"Submit":t.value&&t.value.value&&t.value.value.rating&&this.submitRating(t.value.value.rating);break;case"Create":t.value&&t.value.value&&t.value.value.name&&this.testService.testData.current_q.workspace.createVariable(t.value.value.name)}else switch(e){case"Feedback":this.redirectToListing()}}showCompilerInstruction(){this.alertData=void 0,this.dialogHeader="Compiler Instruction",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!1,this.dialogClosable=!0,this.dialogStyle={width:"100%",top:"0",height:"100%","min-height":"unset","max-width":"none"},this.dialogVisible=!0}getNextQuestion(){let t=!0,e=this.current_q.q_id,n={};n.index=this.current_q.secIndex?this.current_q.secIndex:0;let i=this.testService.testData.frozen_data.frozen_test_data[n.index].questions;if(e===i[i.length-1].q_id&&this.testService.testData.frozen_data.frozen_test_data[n.index]&&(t=this.checkCutoffPercentage(n)),t){let t;if(this.testService.testData.current_q)return t=this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex].questions[this.testService.testData.current_q.quesIndex+1],t?this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex].questions[this.testService.testData.current_q.quesIndex+1]:(t=this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex+1]&&this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex+1].questions[0],t&&!this.testService.testData.c_modules.lock_sections?this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex+1].questions[0]:(t=void 0,t))}else this.showGrowlMsg(8e3,"error","Failed to move next section!","Your current section cutoff percentage is not matched")}getPreviousQuestion(){let t;if(this.testService.testData.current_q)return t=this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex].questions[this.testService.testData.current_q.quesIndex-1],t?this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex].questions[this.testService.testData.current_q.quesIndex-1]:(t=this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex-1]&&this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex-1].questions[this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex-1].questions.length-1],t&&!this.testService.testData.c_modules.lock_sections?this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex-1].questions[this.testService.testData.frozen_data.frozen_test_data[this.testService.testData.current_q.secIndex-1].questions.length-1]:(t=void 0,t))}formatSectionWiseQuestionData(){return new Promise((t,e)=>{if(this.testService.testData.frozen_data&&this.testService.testData.frozen_data.frozen_test_data){let e=0,n=0;if(this.testService.testData.t_total_marks=0,this.testService.testData.frozen_data.frozen_test_data.forEach((t,i)=>{t.timer=60*t.duration,t.cutoff_based&&!1===t.isSectionLocked?t.isSectionLocked=!1:t.cutoff_based&&(t.isSectionLocked=!0),t.questions.forEach((t,s)=>{if(t.secIndex=i,t.quesIndex=s,this.testService.testData.t_total_marks+=t.marks,1===t.question_editor_type)t.question_data1=t.question_data,t.question_data2="";else if(2===t.question_editor_type)t.question_data1="",t.question_data2=t.question_data;else{const e=t.question_data.split("$$$examly");t.question_data1=e[0],t.question_data2=e[1]}switch(t.time_spent=t.time_spent?t.time_spent:0,t.options_switched_count=t.options_switched_count?t.options_switched_count:0,t.compiled_count=t.compiled_count?t.compiled_count:0,t.program_submitted_count=t.program_submitted_count?t.program_submitted_count:0,t.total_hints_shown=t.total_hints_shown?t.total_hints_shown:0,t.online=!0,t.no_test_cases=t.no_test_cases?t.no_test_cases:0,t.testcase_passed=t.testcase_passed?t.testcase_passed:0,t.obtained_mark=t.last_event?t.last_event.marks:0,t.state=t.last_event?t.last_event.state:5,t.hint=JSON.parse(t.hint),t&&t.programming_question&&t.programming_question.solution&&t.programming_question.solution.length&&(t.hide_header=t.programming_question.solution[0].hideHeader,t.hide_footer=t.programming_question.solution[0].hideFooter),t&&t.programming_file_based_question&&t.programming_file_based_question.solution&&t.programming_file_based_question.solution.length&&(t.hide_header=t.programming_file_based_question.solution[0].hideHeader,t.hide_footer=t.programming_file_based_question.solution[0].hideFooter),t.question_type){case"mcq_single_correct":t=this.formatMcqSingleCorrect(t);break;case"mcq_multiple_correct":t=this.formatMcqMultiCorrect(t);break;case"fillup_single_correct":t=this.formatFillupSingleCorrect(t);break;case"programming":t=this.formatProgramming(t);break;case"programming_file_based":t=this.formatProgrammingFileBased(t);break;case"block_programming":t=this.formatBlockProgramming(t);break;case"essay_email_writing":t=this.formatEssayEmailWriting(t);break;case"descriptive_answer_writing":case"descriptive_answer_writing_text":t=this.formatDescriptiveAnswerWriting(t);break;case"html_css_js":t=this.formatHtmlCssJs(t);break;case"frontend_technology":t=this.formatFrontendTechnology(t);break;case"video_answer_speaking":t=this.formatVideoAnswerSpeaking(t);break;case"diagram":t=this.formatDiagram(t);break;case"file_upload_questions":t=this.formatFileUploadQuestions(t);break;case"classification":t=this.formatClassification(t);break;case"project_question":t=this.formatProjectQuestion(t);break;case"question_paper_upload":t=this.formatQuestionPaperUploadQuestion(t);break;case"cloud_question":t=this.formatCloudQuestion(t)}t.last_event&&t.last_event.leaderboard_values&&(t.leaderboard_values=t.last_event.leaderboard_values),this.testService.testData.frozen_data.resume_question&&this.testService.testData.frozen_data.resume_question.q_id===t.q_id&&(t.variable_id&&this.testService.testData.frozen_data.resume_question.variable_id===t.variable_id||!t.variable_id)&&(e=i,n=s)})}),this.projectInstanceArray&&this.projectInstanceArray.length&&this.createInstance(this.projectInstanceArray),this.testService.testData.current_q=this.testService.testData.frozen_data.frozen_test_data[e].questions[n],this.current_q=this.testService.testData.current_q,5==this.current_q.state&&this.eventTracker("skipped"),this.testService&&this.testService.testData&&this.testService.testData.frozen_data&&this.testService.testData.frozen_data.frozen_test_data[e].cutoff_based&&(this.testService.testData.frozen_data.frozen_test_data[e].isSectionLocked=!1),this.testService&&this.testService.testData&&this.testService.testData.c_modules&&(this.testService.testData.c_modules.answer_mandatory||this.testService.testData.c_modules.answer_edit_restrict||this.testService.testData.c_modules.tab_monitor)){const t={type:"answer_submission_popup"};t.count=this.testService.testData.c_modules.max_edit_count?this.testService.testData.c_modules.max_edit_count:0,this.disablePrevAndLockSection="false",this.questionAnswerActionHandle(t)}this.testService.testStartMetrics&&(this.testService.testData.internal_teststart_metrics||(this.testService.testData.internal_teststart_metrics={aws_success_count:0,fa_success_count:0,distance:[]}),this.testService.testStartMetrics.fa_success?(this.testService.testData.internal_teststart_metrics.fa_success_count+=1,this.testService.testStartMetrics.distance&&this.testService.testData.internal_teststart_metrics.distance.push(this.testService.testStartMetrics.distance)):this.testService.testData.internal_teststart_metrics.aws_success_count+=1),this.testService.testData.frozen_data.resume_question&&this.testService.testData.frozen_data.resume_question.l_event_data&&this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time?(this.testService.testData.t_counter=this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.overall,this.testService.testData.client_data.tabswitched=this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.tabswitched?this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.tabswitched:0,this.testService.testData.client_data.copyPasted=this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.copyPasted?this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.copyPasted:0,this.testService.testData.client_data.resume_no=this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.resume_no?this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.resume_no+1:0,this.testService.testData.client_data.resume_no||"resume"!==this.testService.testData.attempt_type||(this.testService.testData.client_data.resume_no=1),this.testService.testData.client_data.suspicious_scr_shots=this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.suspicious_scr_shots?this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.suspicious_scr_shots:void 0,this.testService.testData.client_data.proctoring_alerts=this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.proctoring_alerts?this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.proctoring_alerts:void 0,this.testService.testData.test_tracking_data||(this.testService.testData.test_tracking_data={audio_proctor_analysis:[]}),this.testService.testData.test_tracking_data.audio_proctor_analysis=this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.audio_proctor_analysis?this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.audio_proctor_analysis:void 0,this.testService.testData.client_data.total_proc_img=this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.total_proc_img?this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.total_proc_img:void 0,this.testService.testData.client_data.liveness_alerts=this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.liveness_alerts?this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.liveness_alerts:void 0,this.testService.testData.client_data.proctoring_alerts>this.testService.testData.client_data.total_proc_img&&(this.testService.testData.client_data.total_proc_img=this.testService.testData.client_data.proctoring_alerts),this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.section.forEach((t,e)=>{this.testService.testData.frozen_data.frozen_test_data[e].timer=t.timer,this.testService.testData.frozen_data.frozen_test_data[e].subimited=t.subimited}),this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.internal_teststart_metrics&&(this.testService.testData.internal_teststart_metrics.fa_success_count+=this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.internal_teststart_metrics.fa_success_count,this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.internal_teststart_metrics.distance&&(this.testService.testData.internal_teststart_metrics.distance=this.testService.testData.internal_teststart_metrics.distance.concat(this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.internal_teststart_metrics.distance)),this.testService.testData.internal_teststart_metrics.aws_success_count+=this.testService.testData.frozen_data.resume_question.l_event_data.remaining_time.internal_teststart_metrics.aws_success_count),this.eventTracker("test-resume")):(this.testService.testData.t_counter=this.testService.testData.c_modules.disable_timer?1:60*this.testService.testData.t_total_duration,this.testService.testData.client_data.tabswitched=0,this.testService.testData.client_data.copyPasted=0,this.testService.testData.client_data.resume_no=0,"resume"===this.testService.testData.attempt_type&&(this.testService.testData.client_data.resume_no=1)),t(this.testService.testData.frozen_data.frozen_test_data)}else t(!1)})}formatMcqSingleCorrect(t){return t.formatted_type="Multi Choice Type Question",t.answer?(t.answer=JSON.parse(t.answer),t.answer.length&&(t.attempted=!0,t.options.forEach(e=>{e.selected=t.answer.find(t=>t===e.text)}))):t.answer=[],t}formatMcqMultiCorrect(t){return t.formatted_type="Multi Choice Type Question",t.answer?(t.answer=JSON.parse(t.answer),t.answer.length&&(t.attempted=!0,t.options.forEach(e=>{e.selected=t.answer.find(t=>t===e.text)}))):t.answer=[],t}formatClassification(t){return t.formatted_type="Classification Question",t.answer?(t.answer=JSON.parse(t.answer),t.answer.length&&(t.attempted=!0,t.options.forEach(e=>{e.selected=t.answer.find(t=>t.option_id===e.id)}))):t.answer=[],t.drop_container=t.last_event&&t.last_event.l_event_data.answer.drop_container?JSON.parse(t.last_event.l_event_data.answer.drop_container):t.classification_questions.actual_answer,t}formatFillupSingleCorrect(t){if(t.formatted_type="Fill in the blanks Type Question",t.answer&&(t.l_submitted_answer=JSON.parse(t.answer),t.attempted=!0),t.last_event&&t.last_event.l_event_data){const e=JSON.parse(t.last_event.l_event_data.answer);if(e&&e.length)t.answer=e;else{let e=0;t.fillup_questions&&t.fillup_questions.actual_answer&&t.fillup_questions.actual_answer.fillups_answers&&t.fillup_questions.actual_answer.fillups_answers.length&&(e=t.fillup_questions.actual_answer.fillups_answers.length),t.count=e,t.answer=[],t.l_submitted_answer=[];for(let n=0;n<e;n++)t.answer.push({answer:null})}}else{let e=0;t.fillup_questions&&t.fillup_questions.actual_answer&&t.fillup_questions.actual_answer.fillups_answers&&t.fillup_questions.actual_answer.fillups_answers.length&&(e=t.fillup_questions.actual_answer.fillups_answers.length),t.count=e,t.answer=[],t.l_submitted_answer=[];for(let n=0;n<e;n++)t.answer.push({answer:null})}return t}formatBlockProgramming(t){if(t.formatted_type="Block Programming Type Question",t.block_programming.block_category=[],t.block_programming.block=[],t.block_programming){const e=JSON.parse(JSON.stringify(t.block_programming)),n=e.custom_blocks;t.block_programming.selected_language=e.selected_language,t.block_programming.output=e.output,t.block_programming.block_category=n.category,t.block_programming.block=n.block}if(t.answer&&(t.l_submitted_answer=t.answer,t.attempted=!0),t.last_event&&t.last_event.l_event_data&&t.last_event.l_event_data.answer){const e=JSON.parse(t.last_event.l_event_data.answer);t.sample_tc_list=[],t.generatedCode=e.answer,t.blocklyWorkspace=e.blocklyWorkspace,null!=e.data&&(t.sample_tc_list.push(e.data.sample_tc),t.compiler_message=e.data.compiler_message),t.input=t.block_programming.output,t.obtained_mark=t.last_event.marks}return t}formatProgramming(t){if(t.formatted_type="Single File Programming Question",t.langList=[],t.tc_submitted=[],t.tc_list=[],t.programming_question){if(t.programming_question.multilanguage){const e=t.programming_question.multilanguage.indexOf("C/C++");-1!==e&&(t.programming_question.multilanguage.splice(e,1),t.programming_question.multilanguage.push("C","C++"),t.programming_question.solution&&t.programming_question.solution.length&&t.programming_question.solution.forEach(e=>{if(e.language&&e.language.includes("C/C++")){const n=JSON.parse(JSON.stringify(e));n.language="C++",t.programming_question.solution.push(n),e.language="C"}})),this.testService.programmingLangs.forEach(e=>{t.programming_question.multilanguage.includes(e.value)&&t.langList.push({label:e.label,value:e.value,aceCode:e.aceCode,code:e.code,codeEntered:""})})}t.programming_question.sample_io&&"string"==typeof t.programming_question.sample_io&&(t.programming_question.sample_io=JSON.parse(t.programming_question.sample_io))}if(t.answer&&(t.l_submitted_answer=t.answer,t.attempted=!0),t.last_event&&t.last_event.l_event_data){const e=JSON.parse(t.last_event.l_event_data.answer),n=t.langList.findIndex(t=>7===t.code?t.value===e.language_name:t.code===Number(e.language));n>-1&&(t.langListIndex=n,t.currentLang=e.language_name,t.langList[n].codeEntered=e.answer),t.testcase_passed=t.last_event.testcase_passed,t.no_test_cases=t.last_event.no_test_cases,t.obtained_mark=t.last_event.marks,e.data&&e.data.forEach((e,n)=>{if(t.tc_submitted[n]={},e&&e.result&&"object"==typeof e){let i;switch(e.status){case 0:i="Failed";break;case 1:i="Success",t.passed+=1,e.result.score=e.score;break;case 2:i="Time Limit Exceeded"}t.tc_submitted[n]={no:n,result:e.status,status:i,time:e.result?e.result.time:null,memory:e.result?e.result.mem:null,score:e.result?e.result.score:0}}e&&"string"==typeof e&&(t.tc_submitted[n].url=e)}),e.testcaseMetadata&&e.testcaseMetadata.forEach((e,n)=>{t.tc_submitted[n]=Object.assign({},t.tc_submitted[n],e)})}return t.debug_count=t.debug_count?t.debug_count:0,t}formatProgrammingFileBased(t){if(t.formatted_type="Multi File Programming Question",t.langList=[],t.tc_submitted=[],t.tc_list=[],t.programming_file_based_question&&(t.programming_file_based_question.multilanguage&&this.testService.progFileBasedLangs.forEach(e=>{t.programming_file_based_question.multilanguage.includes(e.value)&&t.langList.push({label:e.label,value:e.value,aceCode:e.aceCode,files:void 0,defaultFiles:e.defaultFiles})}),t.programming_file_based_question.sample_io&&"string"==typeof t.programming_file_based_question.sample_io&&(t.programming_file_based_question.sample_io=JSON.parse(t.programming_file_based_question.sample_io))),t.answer&&(t.l_submitted_answer=t.answer,t.attempted=!0),t.last_event&&t.last_event.l_event_data){const e=JSON.parse(t.last_event.l_event_data.answer),n=t.langList.findIndex(t=>t.value===e.language);n>-1&&(t.langListIndex=n,t.currentLang=e.language,t.langList[n].files=e.answer&&e.answer.map(t=>({label:t.filename,data:t.content,id:t.id,blockdelete:t.blockdelete||"main"===t.id,blockedit:t.blockedit}))),t.testcase_passed=t.last_event.testcase_passed,t.no_test_cases=t.last_event.no_test_cases,t.obtained_mark=t.last_event.marks,e.data&&e.data.forEach((e,n)=>{if(t.tc_submitted[n]={},e&&e.result&&"object"==typeof e){let i;switch(e.status){case 0:i="Failed";break;case 1:i="Success",t.passed+=1,e.result.score=e.score;break;case 2:i="Time Limit Exceeded"}t.tc_submitted[n]={no:n,result:e.status,status:i,time:e.result?e.result.time:null,memory:e.result?e.result.mem:null,score:e.result?e.result.score:0}}e&&"string"==typeof e&&(t.tc_submitted[n].url=e)}),e.testcaseMetadata&&e.testcaseMetadata.forEach((e,n)=>{t.tc_submitted[n]=Object.assign({},t.tc_submitted[n],e)})}return t.debug_count=t.debug_count?t.debug_count:0,t}formatEssayEmailWriting(t){if(t.formatted_type="English Writing Skills Assessment",t.essay_email_writing_questions&&(t.essay_email_writing_questions.internalkeyword=JSON.parse(t.essay_email_writing_questions.internalkeyword),t.essay_email_writing_questions.externalkeyword=JSON.parse(t.essay_email_writing_questions.externalkeyword),t.essay_email_writing_questions.externalkeyword&&t.essay_email_writing_questions.externalkeyword.length&&(t.essay_email_writing_questions.externalkeywordHTML="<p>",t.essay_email_writing_questions.externalkeyword.forEach((e,n)=>{t.essay_email_writing_questions.externalkeywordHTML+=e,t.essay_email_writing_questions.externalkeywordHTML+=n!==t.essay_email_writing_questions.externalkeyword.length-1?", ":"</p>"}))),t.answer&&(t.attempted=!0,t.l_submitted_answer=t.answer,t.answer=JSON.parse(t.answer),t.answer.answer?(t.essay_processed_answer=t.answer,t.answer=t.answer.answer[0]):t.answer.length&&(t.answer=t.answer[0])),t.last_event&&t.last_event.l_event_data&&t.last_event.l_event_data.answer){const e=JSON.parse(t.last_event.l_event_data.answer);t.answer=e&&e.answer?e.answer&&e.answer[0]?e.answer[0]:"":e&&e[0]?e[0]:""}return t}formatDescriptiveAnswerWriting(t){if(t.question_type&&"descriptive_answer_writing_text"===t.question_type?(t.formatted_type="Text Only Descriptive Question",t.type="Text Only Descriptive"):(t.formatted_type="Descriptive Question With Image",t.type="Descriptive With Image"),t.answer&&(t.attempted=!0,t.l_submitted_answer=t.answer),t.last_event&&t.last_event.l_event_data&&t.last_event.l_event_data.answer){const e=JSON.parse(t.last_event.l_event_data.answer);t.answer=e[0]}return t}formatDiagram(t){if(t.formatted_type="Diagram Type Question",t.answer&&(t.l_submitted_answer=t.answer,t.attempted=!0),t.answer=null,t.last_event&&t.last_event.l_event_data&&t.last_event.l_event_data.answer){const e=JSON.parse(t.last_event.l_event_data.answer);t.answer=e[0]}else t.answer=null,t.student_answer=null;return t&&t.answer&&this.testService.getObject(t.answer).then(e=>{t.student_answer=e.trim()}),t&&t.diagram_questions&&t.diagram_questions.solution?this.testService.getObject(t.diagram_questions.solution).then(e=>{t.staff_answer=e.trim()}):t.staff_answer=null,t}formatHtmlCssJs(t){if(t.formatted_type="Coding Type Question",t.answer&&(t.l_submitted_answer=t.answer,t.attempted=!0),t.answer={},t.answer.htmlCodeEntered=null,t.answer.cssCodeEntered=null,t.answer.jsCodeEntered=null,t.last_event&&t.last_event.l_event_data&&t.last_event.l_event_data.answer){const e=JSON.parse(t.last_event.l_event_data.answer);t.answer.htmlCodeEntered=e.htmlCodetyped,t.answer.cssCodeEntered=e.cssCodetyped,t.answer.jsCodeEntered=e.jsCodetyped}else t.answer.htmlCodeEntered=null,t.answer.cssCodeEntered=null,t.answer.jsCodeEntered=null;return t}formatFrontendTechnology(t){if(t.formatted_type="Coding Type Question",t.answer&&(t.l_submitted_answer=t.answer,t.attempted=!0),t.answer={},t.answer.frontEndlanguage=null,t.answer.frontEndTypedCode=null,t.last_event&&t.last_event.l_event_data&&t.last_event.l_event_data.answer){const e=JSON.parse(t.last_event.l_event_data.answer);t.answer.frontEndlanguage=e.frontEndlanguage,t.answer.frontEndTypedCode=e.frontEndTypedCode}else t.answer.frontEndlanguage=t.frontend_technology.language,t.answer.frontEndTypedCode=t.frontend_technology.file_structure;return t.frontend_technology&&t.frontend_technology.solution&&t.frontend_technology.solution.length&&(t.frontend_technology.solution[0]&&t.frontend_technology.solution[0].blacklist&&t.frontend_technology.solution[0].blacklist.length&&t.frontend_technology.solution[0].blacklist[0].list&&t.frontend_technology.solution[0].blacklist[0].list.length&&(t.blacklist=t.frontend_technology.solution[0].blacklist),t.frontend_technology.solution[0]&&t.frontend_technology.solution[0].whitelist&&t.frontend_technology.solution[0].whitelist.length&&t.frontend_technology.solution[0].whitelist[0].list&&t.frontend_technology.solution[0].whitelist[0].list.length&&(t.whitelist=t.frontend_technology.solution[0].whitelist)),t}formatVideoAnswerSpeaking(t){return t.formatted_type="Video Type Question",t.video_answer_speaking&&t.video_answer_speaking.externalkeyword&&t.video_answer_speaking.externalkeyword.length&&(t.video_answer_speaking.externalkeywordHTML="<p>",t.video_answer_speaking.externalkeyword.forEach((e,n)=>{t.video_answer_speaking.externalkeywordHTML+=e,t.video_answer_speaking.externalkeywordHTML+=n!==t.video_answer_speaking.externalkeyword.length-1?", ":"</p>"})),t.program_submitted_count&&(t.attempted=!0),t}formatFileUploadQuestions(t){if(t.formatted_type="File Upload Question",t.file_upload_questions&&t.file_upload_questions.file_count_and_size&&t.file_upload_questions.file_count_and_size.length&&(t.fileCount=t.file_upload_questions.file_count_and_size.length),t.answer&&(t.l_submitted_answer=t.answer),t.last_event&&t.last_event.l_event_data&&t.last_event.l_event_data.answer&&(t.answer=JSON.parse(t.last_event.l_event_data.answer)),t.program_submitted_count&&(t.attempted=!0),t.c_id=this.testService.testData.c_id,t.t_id=this.testService.testData.t_id,t.user_id=this.testService.userData.user_id,!t.answer){t.answer=[];for(let e=0;e<t.fileCount;e++)t.answer.push({name:null,url:null})}for(let e=0;e<t.fileCount;e++){let n=[];t&&t.file_upload_questions&&t.file_upload_questions.file_count_and_size&&t.file_upload_questions.file_count_and_size.length&&t.file_upload_questions.file_count_and_size[e].type&&t.file_upload_questions.file_count_and_size[e].type.length&&(n=t.file_upload_questions.file_count_and_size[e].type),t.answer[e].supportedFileTypes=n}return t}formatProjectQuestion(t){return t.formatted_type="Project Question",t&&t.project_questions&&(t.image=t.project_questions.image?t.project_questions.image:"",t.node_pool=t.project_questions.node_pool?t.project_questions.node_pool:"",t.project_questions.has_auto_evaluation?(t.has_auto_evaluation=!0,t.evaluation_type=t.project_questions.evaluation_type?t.project_questions.evaluation_type:null,t.boilerPlate=t.project_questions.boilerPlate?t.project_questions.boilerPlate:{},t.config=t.project_questions.config?t.project_questions.config:[]):t.has_auto_evaluation=!1),t.URL||(t.key=this.testService.userData.user_id.replace(/-/g,"").replace(/\d+/g,"")+""+this.testService.testData.frozen_data.id+t.q_id.replace(/-/g,"").replace(/\d+/g,"")+this.getAttempt(),this.projectInstanceArray.push({q_id:t.q_id,key:t.key,image:t.image,node_pool:t.node_pool,has_auto_evaluation:t.has_auto_evaluation,boilerPlate:t.boilerPlate?t.boilerPlate:{},config:t.config?t.config:[]})),t.answer&&(t.l_submitted_answer=t.answer,t.attempted=!0),t.last_event&&t.last_event.l_event_data&&t.last_event.l_event_data.answer&&(t.answer=JSON.parse(t.last_event.l_event_data.answer),t.tc_list=t.answer.tc_list?t.answer.tc_list:[],t.resultList=t.answer.resultList?t.answer.resultList:[],t.testcasemarks=t.answer.testcasemarks?t.answer.testcasemarks:[],t=this.formatFlexDataProject(t)),t.showTestCase=!0,t}formatCloudQuestion(t){return t.formatted_type="Cloud Question",t&&t.cloud_questions&&(t.cloud_provider=t.cloud_questions.cloud_providerage?t.cloud_questions.cloud_provider:"",t.cloud_questions.has_auto_evaluation?(t.has_auto_evaluation=!0,t.test_case=t.cloud_questions.test_case?t.cloud_questions.test_case:[]):t.has_auto_evaluation=!1),t.answer&&(t.l_submitted_answer=t.answer,t.attempted=!0),t.last_event&&t.last_event.l_event_data&&t.last_event.l_event_data.answer&&(t.answer=JSON.parse(t.last_event.l_event_data.answer),t.tc_list=t.answer.tc_list?t.answer.tc_list:[],t.resultList=t.answer.resultList?t.answer.resultList:[],t.testcasemarks=t.answer.testcasemarks?t.answer.testcasemarks:[],t=this.formatFlexDataCloud(t)),t.showTestCase=!0,t}deductHintShownPercentage(t,e){if(e.total_hints_shown){let n=t;for(let t=0;t<e.total_hints_shown;t++)n-=n*(this.testService.testData.c_modules.percentage_reduction/100);return n}return t}mcqSingleCorrectEvaluate(t){let e=0;return t.mcq_questions.actual_answer&&t.answer?t.variable_id&&"0"!==t.variable_id&&t.answer_data?t.answer_data===t.answer[0]?(t.state=1,e=t.marks):(t.state=2,e=0-t.negative_marks):t.mcq_questions.actual_answer.args&&t.mcq_questions.actual_answer.args[0]===t.answer[0]?(t.state=1,e=t.marks):t.mcq_questions.actual_answer.partial&&t.mcq_questions.actual_answer.partial.length?(t.mcq_questions.actual_answer.partial.forEach(n=>{t.answer[0]===n.value&&(e+=n.weightage/100*t.marks)}),0===e?(t.state=2,e=0-t.negative_marks):t.state=4):(t.state=2,e=0-t.negative_marks):(t.state=2,e=0-t.negative_marks),e}mcqMultiCorrectEvaluate(t){let e=0,n=0;switch(t.marking_scheme){case"split_equally":{let i,s=0,l=0;i=t.mcq_questions.actual_answer.args.length?t.marks/t.mcq_questions.actual_answer.args.length:t.marks,t.mcq_questions.actual_answer.args.forEach(e=>{t.answer.includes(e)&&(n+=i,l++)});let a=0;a=t.answer.length-l,s=t.mcq_questions.actual_answer.reductionPercent,s&&(n-=i*Math.abs(a)*(s/100),n<0&&(n=0)),0===l||t.answer.length===t.options.length&&t.mcq_questions.actual_answer.args.length!==t.answer.length?(t.state=2,e=0-t.negative_marks):(t.state=t.marks===n?1:4,e=n);break}case"split_manually":{let i,s=0,l=0;t.mcq_questions.actual_answer.partial.forEach(e=>{t.answer.includes(e.value)&&(n+=t.marks*e.weightage/100,l++)}),i=t.marks/t.mcq_questions.actual_answer.args.length;let a=0;a=t.answer.length-l,s=t.mcq_questions.actual_answer.reductionPercent,s&&(n-=i*Math.abs(a)*(s/100),n<0&&(n=0)),0===l||t.answer.length===t.options.length&&t.mcq_questions.actual_answer.partial.length!==t.answer.length?(t.state=2,e=0-t.negative_marks):(t.state=t.marks===n?1:4,e=n);break}case"atleast_one":{let i;i=0,t.mcq_questions.actual_answer.args.forEach(e=>{t.answer.includes(e)&&i++}),i?(t.state=1,n=t.marks):(t.state=2,n=0-t.negative_marks),0===n||t.answer.length===t.options.length&&t.mcq_questions.actual_answer.args.length!==t.answer.length?(t.state=2,e=0-t.negative_marks):(t.state=t.marks===n?1:4,e=n);break}case"all_correct":{let i;i=0,t.mcq_questions.actual_answer.args.forEach(e=>{-1===t.answer.indexOf(e)&&i++}),i?(t.state=2,n=0-t.negative_marks):t.answer.length<=t.mcq_questions.actual_answer.args.length?(t.state=1,n=t.marks):(t.state=2,n=0-t.negative_marks),0===n||t.answer.length!==t.mcq_questions.actual_answer.args.length||t.answer.length===t.options.length&&t.mcq_questions.actual_answer.args.length!==t.answer.length?(t.state=2,e=0-t.negative_marks):(t.state=t.marks===n?1:4,e=n);break}}return e}ClassificationEvaluate(t){let e=0,n=0;const i=[];let s=t.classification_questions.actual_answer;switch(s.forEach(t=>{i.push({check:{drop_id:t.id,option_id:t.option_id},weightage:t.weightage})}),t.marking_scheme){case"split_equally":{let l;l=s.length?t.marks/s.length:t.marks;for(const e of t.answer)for(const t of i)if(t.check.drop_id===e.drop_id&&t.check.option_id===e.option_id){n+=l;break}0===n&&t.answer.length===i.length?(t.state=2,e=0-t.negative_marks):(t.state=t.marks===n?1:4,e+=n);break}case"split_manually":for(const e of t.answer)for(const s of i)if(s.check.drop_id===e.drop_id&&s.check.option_id===e.option_id){n+=t.marks*s.weightage/100;break}0===n&&t.answer.length===i.length?(t.state=2,e=0-t.negative_marks):(t.state=t.marks===n?1:4,e=n);break;case"atleast_one":{let s;s=0;for(const e of t.answer)for(const t of i)if(t.check.drop_id===e.drop_id&&t.check.option_id===e.option_id){s++;break}s===i.length?(t.state=1,n=t.marks):0===s&&t.answer&&t.answer.length>0?(t.state=2,n=0-t.negative_marks):s>0&&s<i.length&&(t.state=4,n=t.marks),e=n;break}case"all_correct":{let s;s=0;for(const e of t.answer)for(const t of i)if(t.check.drop_id===e.drop_id&&t.check.option_id===e.option_id){s++;break}s===i.length?(t.state=1,n=t.marks):0===s&&t.answer&&t.answer.length>0?(t.state=2,n=0-t.negative_marks):s>0&&s<i.length&&(t.state=4,n=0-t.negative_marks),e=n;break}}return e}trimLowercaseAndCompare(t,e){return t.trim().toLowerCase().replace(/\s+/g," ")===e.trim().toLowerCase().replace(/\s+/g," ")}trimAndCompare(t,e){return t.trim().replace(/\s+/g," ")===e.trim().replace(/\s+/g," ")}fillupEvaluate(t){let e=0;return t.fillup_questions.actual_answer.fillups_answers.forEach((n,i)=>{const s=n.args.replace("<p>","").replace("</p>","");let l="",a=t.fillup_questions.answer_type,r=[];if(t.l_submitted_answer&&t.l_submitted_answer[i]&&t.l_submitted_answer[i].answer&&(l=t.l_submitted_answer[i].answer.replace("<p>","").replace("</p>","")),"Range"===a)r=s.split("_"),r&&2===r.length?parseInt(l)>=parseInt(r[0])&&parseInt(l)<=parseInt(r[1])&&(e+=n.splitweight/100*t.marks):(t.fillup_questions.case_sensitive?this.trimAndCompare(s,l):this.trimLowercaseAndCompare(s,l))&&(e+=n.splitweight/100*t.marks);else if(t.fillup_questions.case_sensitive?this.trimAndCompare(s,l):this.trimLowercaseAndCompare(s,l))e+=n.splitweight/100*t.marks;else if(n.other_answers){const i=n.other_answers.find(e=>{const n=e.value.replace("<p>","").replace("</p>","");return t.fillup_questions.case_sensitive?this.trimAndCompare(n,l):this.trimLowercaseAndCompare(n,l)});i&&(e+=n.splitweight/100*(i.weightage/100)*t.marks)}}),0===e?(t.state=2,e=0-t.negative_marks):t.state=t.marks===e?1:4,e}blockProgrammingEvaluate(t){return t.attempted&&t.sample_tc_list[0]&&"Compiling..."!==t.sample_tc_list[0].message?"Passed"===t.sample_tc_list[0].message?(t.state=1,t.marks):(t.state=2,0-t.negative_marks):t.obtained_mark?t.obtained_mark===t.marks?(t.state=1,t.obtained_mark):(t.state=2,0-t.negative_marks):(t.state=3,0)}projectQuestionEvaluate(t){if(t.has_auto_evaluation&&t.resultList&&t.resultList.length){let e=0,n=0;const i=[];for(let s of t.resultList){const l=s.result;let a=!1;for(const t of this.compilationErrorMessages)l.includes(t)&&(a=!0);if(a)for(const n of s.testcases){let l=0;t.negative_marks&&(l=0-n.weightage*t.negative_marks),e+=l,i.push({evaluation_type:s.evaluation_type,name:n.name,marks:l})}else if("Maven Junit"===s.evaluation_type)if(l.includes("BUILD SUCCESS"))for(const r of s.testcases){const l=r.weightage*t.marks;n+=1,e+=l,i.push({evaluation_type:s.evaluation_type,name:r.name,marks:l})}else for(const r of s.testcases){let a=0;l.includes(r.name)?t.negative_marks&&(a=0-r.weightage*t.negative_marks):(a=r.weightage*t.marks,n+=1),e+=a,i.push({evaluation_type:s.evaluation_type,name:r.name,marks:a})}else if("Puppeteer"===s.evaluation_type)for(const r of s.testcases){let a=0;l.includes(`TESTCASE:${r.name}:success`)?(a=r.weightage*t.marks,n+=1):t.negative_marks&&(a=0-r.weightage*t.negative_marks),e+=a,i.push({evaluation_type:s.evaluation_type,name:r.name,marks:a})}else if("Karma"===s.evaluation_type)for(const r of s.testcases){let a=0;l.includes(r.name+" FAILED")?t.negative_marks&&(a=0-r.weightage*t.negative_marks):(a=r.weightage*t.marks,n+=1),e+=a,i.push({evaluation_type:s.evaluation_type,name:r.name,marks:a})}else if("Screenshot Match"===s.evaluation_type||"Shell"===s.evaluation_type)for(const r of s.testcases){let a=0;const o=`TESTCASE:${r.name}:success: `;if(l.includes(o)){const e=new RegExp(o+"(.*?)\\\\n"),i=l.match(e);i&&i[1]?a=r.weightage*t.marks*(Number(i[1])/100):(a=r.weightage*t.marks,n+=1)}else t.negative_marks&&(a=0-r.weightage*t.negative_marks);e+=a,i.push({evaluation_type:s.evaluation_type,name:r.name,marks:a})}else if("React Jest"===s.evaluation_type)for(const r of s.testcases){let a=0;l.includes("\u2713 "+r.name)?(a=r.weightage*t.marks,n+=1):t.negative_marks&&(a=0-r.weightage*t.negative_marks),e+=a,i.push({evaluation_type:s.evaluation_type,name:r.name,marks:a})}else if("NUnit"===s.evaluation_type)for(const r of s.testcases){let a=0;l.includes("Failed "+r.name)?t.negative_marks&&(a=0-r.weightage*t.negative_marks):(a=r.weightage*t.marks,n+=1),e+=a,i.push({evaluation_type:s.evaluation_type,name:r.name,marks:a})}}return t.testcase_passed=n,t.testcasemarks=i,e?(t.state=t.marks===e?1:4,e):(t.state=2,0-t.negative_marks)}return t.state=2,0}cloudQuestionEvaluate(t){if(t.has_auto_evaluation&&t.resultList&&t.resultList.length){let e=0,n=0;const i=[];for(let s of t.resultList){let l=0;t.negative_marks&&s.weightage&&!s.status?l=0-s.weightage*t.negative_marks:s.status&&(l=s.weightage*t.marks,n+=1),e+=l,i.push({name:s.name,marks:l})}return t.testcase_passed=n,t.testcasemarks=i,e?(t.state=t.marks===e?1:4,e):(t.state=2,0-t.negative_marks)}return t.state=2,0}programmingEvaluate(t){if(t.tc_submitted&&t.tc_submitted.length){let e=0,n=0;return t.tc_submitted.forEach(i=>{1===i.status&&(e+=t.marks*(i.score/100),n+=1)}),t.testcase_passed=n,e?(t.state=t.marks===e?1:4,e):(t.state=2,0-t.negative_marks)}return t.obtained_mark?t.obtained_mark===t.marks?(t.state=1,t.obtained_mark):t.obtained_mark===0-t.negative_marks?(t.state=2,0-t.negative_marks):(t.state=4,t.obtained_mark):(t.state=2,0-t.negative_marks)}programmingFileBasedEvaluate(t){if(t.tc_submitted&&t.tc_submitted.length){let e=0,n=0;return t.tc_submitted.forEach(i=>{1===i.status&&(e+=t.marks*(i.score/100),n+=1)}),t.testcase_passed=n,e?(t.state=t.marks===e?1:4,e):(t.state=2,0-t.negative_marks)}return t.obtained_mark?t.obtained_mark===t.marks?(t.state=1,t.obtained_mark):t.obtained_mark===0-t.negative_marks?(t.state=2,0-t.negative_marks):(t.state=4,t.obtained_mark):(t.state=2,0-t.negative_marks)}essayEvaluate(t){if(t.essay_processed_answer&&t.essay_processed_answer.percentages&&t.essay_processed_answer.percentages.score){const e=t.essay_processed_answer.percentages;return t.state=100===e.score?1:0===e.score?2:4,"skipped"===e.score?(t.state=2,0-t.negative_marks):e.score?t.marks*(e.score/100):0-t.negative_marks}return t.state=2,0-t.negative_marks}descriptiveEvaluate(t){let e=0,n=0,i=0;if(!t.auto_evaluation)return t.state=2,n;let s=t.answer?t.answer.trim().toLowerCase().replace(/\s+/g," "):"";const l=t.descriptive_answer_writing.internalkeyword?JSON.parse(t.descriptive_answer_writing.internalkeyword):[];return t.answer&&t.answer.length?(s.split(" ").length>t.descriptive_answer_writing.word_limit&&(s=s.split(" ").splice(0,t.descriptive_answer_writing.word_limit).join(" ")),l.forEach(t=>{e=s.includes(t.trim().toLowerCase().replace(/\s+/g," "))?++e:e}),l&&l.length?(i=e/l.length*100,t.relevancyPercentage=i,n=i*t.marks/100,t.state=t.marks===n?1:n?4:2,n):n):(n=s.length,t.state=n?4:2,n)}htmlEvaluate(t){return t.state=2,0}frontEndEvaluate(t){return t.state=2,0}videoAnswerSpeakingEvaluate(t){return t.state=2,0}diagramEvaluate(t){return t.state=2,0}fileUploadQuestionsEvaluate(t){return t.state=2,0}questionPaperUploadEvaluate(t){return t.state=2,0}getQuestionMark(t){let e=0;switch(t.question_type){case"mcq_single_correct":e=this.mcqSingleCorrectEvaluate(t);break;case"mcq_multiple_correct":e=this.mcqMultiCorrectEvaluate(t);break;case"fillup_single_correct":e=this.fillupEvaluate(t);break;case"programming":e=this.programmingEvaluate(t);break;case"programming_file_based":e=this.programmingFileBasedEvaluate(t);break;case"essay_email_writing":e=this.essayEvaluate(t);break;case"descriptive_answer_writing":case"descriptive_answer_writing_text":e=this.descriptiveEvaluate(t);break;case"html_css_js":e=this.htmlEvaluate(t);break;case"frontend_technology":e=this.frontEndEvaluate(t);break;case"video_answer_speaking":e=this.videoAnswerSpeakingEvaluate(t);break;case"block_programming":e=this.blockProgrammingEvaluate(t);break;case"diagram":e=this.diagramEvaluate(t);break;case"file_upload_questions":e=this.fileUploadQuestionsEvaluate(t);break;case"classification":e=this.ClassificationEvaluate(t);break;case"project_question":e=this.projectQuestionEvaluate(t);break;case"cloud_question":e=this.cloudQuestionEvaluate(t);break;case"question_paper_upload":e=this.questionPaperUploadEvaluate(t)}return e=this.deductHintShownPercentage(e,t),e}generateEventPayload(t,e,n){return new Promise((i,s)=>{const l=e.secIndex;let a=new Date(this.testService.testData.instanceTime),r=e.time_spent;a.setMilliseconds(a.getMilliseconds()+(new Date).getMilliseconds());const o={s_question_id:e.s_question_id,question_type:e.question_type,event_type:t,user_id:this.testService.userData.user_id,school_id:this.testService.userData.school_id,q_id:e.q_id,variable_id:e.variable_id?e.variable_id:"0",t_id:this.testService.testData.t_id,c_id:this.testService.testData.c_id,attempt_no:this.testService.testData.attempt_no,updatedAt:new Date(a),marks:e.obtained_mark,total_mark:e.marks,state:e.state,bookmarked:e.bookmarked,total_hints_shown:e.total_hints_shown,timespent:e.time_spent,l_event_data:{remaining_time:{},answer:null},options_switched_count:e.options_switched_count,compiled_count:e.compiled_count,program_submitted_count:e.program_submitted_count,testcase_passed:e.testcase_passed,no_test_cases:e.no_test_cases,clear_answer_count:e.clear_answer_count,debug_count:e.debug_count,branch_id:this.testService.userData.school_branch_department_users[0].branch_id,department_id:this.testService.userData.school_branch_department_users[0].department_id,leaderboard_values:e.leaderboard_values?e.leaderboard_values:null,sectionIndex:l};o.testcase_passed&&o.no_test_cases&&(o.testcase_percentage=o.testcase_passed/o.no_test_cases*100),"section_unlock"!==t&&!0!==this.current_q.section_unlock||(o.section_unlock=!0,this.current_q.section_unlock=!0);const u=new Promise((n,i)=>{switch(e&&e.question_type){case"mcq_single_correct":if(e.variable_id){o.variable_id=e.variable_id;let t=e.answer?e.answer:void 0;t=JSON.stringify(t),n({answer:t,l_event_data_answer:t})}else{o.variable_id=0;const t=JSON.stringify(e.answer);n({answer:t,l_event_data_answer:t})}break;case"classification":{o.variable_id=0;const t=JSON.stringify(e.answer),i=JSON.stringify(e.drop_container);n({answer:t,drop_container:i,l_event_data_answer:{answer:t,drop_container:i}});break}case"mcq_multiple_correct":{o.variable_id=0;const t=JSON.stringify(e.answer);n({answer:t,l_event_data_answer:t});break}case"fillup_single_correct":if(e.answer.find(t=>null!==t.answer&&""!==t.answer)){const t=JSON.stringify(e.answer);n({answer:e.l_submitted_answer?JSON.stringify(e.l_submitted_answer):[],l_event_data_answer:t})}else n({answer:null,l_event_data_answer:null});break;case"block_programming":{let i;e.sample_tc_list&&e.sample_tc_list.length&&(i={sample_tc:e.sample_tc_list[0],compiler_message:e.compiler_message});let s={answer:e.generatedCode?e.generatedCode:null,blocklyWorkspace:e.blocklyWorkspace?e.blocklyWorkspace:null,data:i||null};s=JSON.stringify(s),"submit-program"===t&&(e.l_submitted_answer=s),n({answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:s});break}case"project_question":{let i={tc_list:e.tc_list?e.tc_list:null,resultList:e.resultList?e.resultList:null,data:e.testcasemarks?e.testcasemarks:null};i=JSON.stringify(i),"submit-program"===t&&(e.l_submitted_answer=i),n({answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:i});break}case"cloud_question":{let i={tc_list:e.tc_list?e.tc_list:null,resultList:e.resultList?e.resultList:null,data:e.testcasemarks?e.testcasemarks:null};i=JSON.stringify(i),"submit-program"===t&&(e.l_submitted_answer=i),n({answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:i});break}case"programming":{let i=[],s=[];e.tc_submitted&&e.tc_submitted.length&&e.tc_submitted[0].url?(i=e.tc_submitted.map(t=>t.url),e.tc_submitted.forEach(t=>{s.push({status:t.status,test_case_percentage:t.test_case_percentage,score:t.score})})):(i=e.tc_submitted,e.tc_submitted.forEach(t=>{s.push({status:t.status,test_case_percentage:t.test_case_percentage,score:t.score})}));let l={answer:e.langListIndex>-1&&e.langList[e.langListIndex].codeEntered?e.langList[e.langListIndex].codeEntered:null,answerDebugURL:e.langList[e.langListIndex].answerDebugURL,language:e.langList[e.langListIndex].code+"",language_name:e.langList[e.langListIndex].value,currentLangLabel:e.langList[e.langListIndex].label,event_type:t,code_match_percentge:e.code_match_percentge,data:i,testcaseMetadata:s};l=JSON.stringify(l),"submit-program"===t&&(e.l_submitted_answer=l),n({answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:l});break}case"programming_file_based":{let i,s=[];e.tc_submitted&&e.tc_submitted.length&&e.tc_submitted[0].url?(i=e.tc_submitted.map(t=>t.url),e.tc_submitted.forEach(t=>{s.push({status:t.status,test_case_percentage:t.test_case_percentage,score:t.score})})):(i=e.tc_submitted,e.tc_submitted.forEach(t=>{s.push({status:t.status,test_case_percentage:t.test_case_percentage,score:t.score})}));let l={answer:e.langListIndex>-1&&e.langList[e.langListIndex].files?this.current_q.langList[this.current_q.langListIndex].files.map(t=>({filename:t.label,content:t.data,id:t.id,blockdelete:t.blockdelete,blockedit:t.blockedit})):null,answerDebugURL:e.langList[e.langListIndex].answerDebugURL,language:e.currentLang,language_name:e.langList[e.langListIndex].value,currentLangLabel:e.langList[e.langListIndex].label,event_type:t,code_match_percentge:e.code_match_percentge,data:i,testcaseMetadata:s};l=JSON.stringify(l),"submit-program"===t&&(e.l_submitted_answer=l),n({answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:l});break}case"essay_email_writing":{let i;i=e.essay_processed_answer&&e.essay_processed_answer.answer?JSON.stringify(e.essay_processed_answer):e.answer?JSON.stringify([e.answer]):null,"submit-program"===t&&(e.l_submitted_answer=i),n({answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:JSON.stringify([e.answer])}),o.relevancyPercentage=e.relevancyPercentage;break}case"descriptive_answer_writing":case"descriptive_answer_writing_text":{let i;i=e.answer?JSON.stringify([e.answer]):null,"submit-program"===t&&(e.l_submitted_answer=i),n({answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:i});break}case"html_css_js":{const i=JSON.stringify({htmlCodetyped:e.answer.htmlCodeEntered,cssCodetyped:e.answer.cssCodeEntered,jsCodetyped:e.answer.jsCodeEntered});"submit-program"===t&&(e.l_submitted_answer=i),n({answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:i});break}case"frontend_technology":if(!e.vmInstance)return n(e.last_event?{answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:e.last_event.answer}:{answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:null});e.vmInstance.getFsSnapshot().then(i=>{e.answer.frontEndTypedCode=i;const s=JSON.stringify({frontEndTypedCode:i,frontEndlanguage:e.answer.frontEndlanguage});return"submit-program"===t&&(e.l_submitted_answer=s),n({answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:s})});break;case"video_answer_speaking":return n({answer:null,l_event_data_answer:null});case"file_upload_questions":case"question_paper_upload":{let i;"submit-program"===t?(i=JSON.stringify(e.answer),e.l_submitted_answer=i):i=JSON.stringify(e.answer),n({answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:i});break}case"diagram":{let i;i=e.answer?JSON.stringify([e.answer]):null,"submit-program"===t&&(e.l_submitted_answer=i),n({answer:e.l_submitted_answer?e.l_submitted_answer:null,l_event_data_answer:i});break}}});if(this.testService.testData.test_tracking_data){let t=this.testService.testData.test_tracking_data.audio_proctor_analysis;if(t){const e=new Set,n=t.filter(t=>!e.has(t.inferredAt)&&(e.add(t.inferredAt),!0));this.testService.testData.test_tracking_data.audio_proctor_analysis=n}}u.then(t=>{o.l_event_data.remaining_time={overall:this.testService.testData.t_counter,section:n,time_spent:r,tabswitched:this.testService.testData.client_data.tabswitched,copyPasted:this.testService.testData.client_data.copyPasted,resume_no:this.testService.testData.client_data.resume_no,exp_resume:this.testService.testData.client_data.exp_resume,suspicious_scr_shots:this.testService.testData.client_data.suspicious_scr_shots,proctoring_alerts:this.testService.testData.client_data.proctoring_alerts,total_proc_img:this.testService.testData.client_data.total_proc_img,hasExternalMonitor:this.testService.testData.client_data.hasExternalMonitor,ignore_event:o.event_type,liveness_alerts:this.testService.testData.client_data.liveness_alerts},this.testService.testData.test_tracking_data&&(o.l_event_data.remaining_time.audio_proctor_analysis=this.testService.testData.test_tracking_data.audio_proctor_analysis),this.testService.testData.internal_teststart_metrics&&(o.l_event_data.remaining_time.internal_teststart_metrics=this.testService.testData.internal_teststart_metrics),t.answer&&(o.answer=t.answer),t.drop_container&&(o.drop_container=t.drop_container),o.l_event_data.answer=t.l_event_data_answer,e.last_event=o,i(o)})})}sendQuestionEventToStream(t){return new Promise((e,n)=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){const n=yield this.testService.getAWS();let i,s;i=!(!(n&&n.config&&n.config.credentials)||n.config.credentials.expired)||(yield this.testService.authSDK()),i?this.testService.setLastEvent(t.s_question_id,t).then(t=>{s=lodash__WEBPACK_IMPORTED_MODULE_7__.find(this.testService.testData.frozen_data.frozen_test_data[t.sectionIndex].questions,(function(e){return e.s_question_id==t.s_question_id})),t.success?(s.online=!0,this.testService.isOffline.next(!1),e(!0)):(s.online=!1,this.eventTracker(t.event_type,"retry",s),e(!1)),this.calculateAllQuestionCount()}):e(!1)})))}eventTracker(t,e,n){return new Promise((i,s)=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){let s;if(s="mcq"===e?JSON.parse(JSON.stringify(this.current_q)):this.current_q,"retry"==e&&n&&(s=n),s.disableAnswering&&("option-click"===t||"submit-program"===t))return i(!0);this.calculateAllQuestionCount(),s.obtained_mark=s.attempted?this.getQuestionMark(s):0,s.state&&-1!==s.state&&5!==s.state||(s.state=3);const l=yield this.leaderboard.evaluateLeaderboardScore(s);l.success&&l.leaderboard_values?(l.leaderboard_values.final_score=l.leaderboard_values.final_score?Math.round(10*l.leaderboard_values.final_score)/10:0,s.leaderboard_values=l.leaderboard_values):s.leaderboard_values={attempt_no:s&&s.previous_attempt_data&&s.previous_attempt_data.attempt_no?s.previous_attempt_data.attempt_no:0,base_score:0,final_score:0,time_ratio:0,time_score:0,attempt_score:0,effort_score:0,positive_score:0,negative_score:0,marks_score:0,difficulty_mark_scawaitore:0,program_score:0,descriptive_score:0,current_attempt_score:0,r_value:0,delta_value:0};const a=[];this.testService.testData.frozen_data.frozen_test_data.forEach(t=>{a.push({timer:t.timer,subimited:t.subimited})}),this.generateEventPayload(t,s,a).then(t=>{t?(this.sendQuestionEventToStream(t),i(!0)):i(!1)})})))}setLiveData(){const t={id:this.testService.testData.frozen_data.id,user_id:this.testService.userData.user_id,email:this.testService.userData.email?this.testService.userData.email.toLowerCase():"",name:this.testService.userData.name?this.testService.userData.name.replace("$"," ").toLowerCase():"",roll_no:this.testService.userData&&this.testService.userData.roll_no?this.testService.userData.roll_no.toLowerCase():this.testService.ppaData&&this.testService.ppaData.roll_no?this.testService.ppaData.roll_no.toLowerCase():"",t_name:this.testService.testData.t_name,c_name:this.testService.testData.c_name,school_id:this.testService.schoolData.school_id,t_id:this.testService.testData.t_id,c_id:this.testService.testData.c_id,c_id_t_id:this.testService.testData.c_id+"_"+this.testService.testData.t_id,attempt_no:this.testService.testData.attempt_no,tabswitched:this.testService.testData.client_data.tabswitched,copyPasted:this.testService.testData.client_data.copyPasted,resume_no:this.testService.testData.client_data.resume_no,exp_resume:this.testService.testData.client_data.exp_resume,hasExternalMonitor:this.testService.testData.client_data.hasExternalMonitor,proctoring_alerts:this.testService.testData.client_data.proctoring_alerts,total_proc_img:this.testService.testData.client_data.total_proc_img,proc_confidence:100,audio_proctor_analysis:this.testService&&this.testService.testData&&this.testService.testData.test_tracking_data&&this.testService.testData.test_tracking_data.audio_proctor_analysis?this.testService.testData.test_tracking_data.audio_proctor_analysis:[],time_spent:0,time_left:0,start_time:this.testService.testData.t_start_time,school_code:this.testService.schoolData.school_code,branch:"-",branch_id:void 0,department:"-",department_id:void 0,batch:"-",batch_id:void 0,os:"-",browser:"-",ip_address:"-",search_term:[],total_percentage:0,total_mark:0,updatedAt:this.testService.testData.instanceTime.getTime(),liveness_alerts:this.testService.testData.client_data.liveness_alerts};this.testService.testData.c_modules.disable_timer?(t.time_spent=Math.round(this.testService.testData.t_counter/60),t.time_left=1/0):(t.time_spent=Math.round((60*this.testService.testData.t_total_duration-this.testService.testData.t_counter)/60),t.time_left=this.testService.testData.t_counter/60),t.search_term=this.testService.generateSerachKeys({email:t.email,name:t.name,roll_no:t.roll_no}),this.testService.testData.client_data&&(t.ip_address=this.testService.testData.client_data.Public_IP,this.testService.testData.client_data.OS&&this.testService.testData.client_data.OS.name&&(t.os=this.testService.testData.client_data.OS.name),this.testService.testData.client_data.browser&&this.testService.testData.client_data.browser.name&&(t.browser=this.testService.testData.client_data.browser.name)),this.testService.studentData&&(this.testService.studentData.batch&&this.testService.studentData.batch.length&&(t.batch=this.testService.studentData.batch.map(t=>t.batch).join(", "),t.batch_id=this.testService.studentData.batch.map(t=>t.batch_id)),this.testService.studentData.branch&&this.testService.studentData.branch.length&&(t.branch=this.testService.studentData.branch.map(t=>t.branch_name).join(", "),t.branch_id=this.testService.studentData.branch.map(t=>t.branch_id)),this.testService.studentData.department&&this.testService.studentData.department.length&&(t.department=this.testService.studentData.department.map(t=>t.department_name).join(", "),t.department_id=this.testService.studentData.department.map(t=>t.department_id))),this.testService.testData.client_data.proctoring_alerts&&this.testService.testData.client_data.total_proc_img&&(t.proc_confidence=Number((100-this.testService.testData.client_data.proctoring_alerts/this.testService.testData.client_data.total_proc_img*100).toFixed(2))),this.testService.testData.test_tracking_data&&this.testService.testData.test_tracking_data.audio_proctor_analysis&&(t.audio_proctor_analysis=this.testService.testData.test_tracking_data.audio_proctor_analysis);let e=0;this.testService.testData.frozen_data.frozen_test_data.forEach((n,i)=>{n.questions.forEach((n,s)=>{t[`s${i}q${s}_status`]=n.state,e+=n.obtained_mark})}),t.total_percentage=Math.round(e/this.testService.testData.t_total_marks*100*100)/100,t.total_mark=Math.round(100*e)/100,this.testService.setLiveData(t)}updateTestDailyDurationSpent(){const t={user_id:this.testService.userData.user_id,entity_id:this.testService.testData.t_id,entity_type:"test",c_id:this.testService.testData.c_id,attempt_no:this.testService.testData.attempt_no,school_id:this.testService.schoolData.school_id,daily_time_spent:this.testService.testData.daily_time_spent,updatedAt:this.testService.testData.instanceTime.getTime()};this.testService.updateTestDailyDurationSpent(t)}toggleTimer(t){this.pauseTimer=t}timerRunner(){let t,e=!1,n=!1;this.testService&&this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.enable_test_submit_cutoff&&this.testService.testData.c_modules.auto_submit_cutoff_time&&(t=new Date(this.testService.testData.c_modules.auto_submit_cutoff_time).getTime());let i=!0;this.timerRunnerSub=setInterval(()=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){if(this.testService.testData.instanceTime.setSeconds(this.testService.testData.instanceTime.getSeconds()+1),!this.pauseTimerForProject){if(this.alertCountDown&&(this.alertCountDown-=1),this.pauseTimer)return;if(this.testService.testData.c_modules.disable_timer?this.testService.testData.t_counter&&(this.testService.testData.t_counter+=1):(this.testService.testData.t_counter&&(this.testService.testData.t_counter-=1),30===this.testService.testData.t_counter&&this.showGrowlMsg(1e4,"warn","Test is about to end","It will be auto submitted")),this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex]&&this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].timer&&(this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].timer-=1),this.s_counter=this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].timer,this.current_q.time_spent+=1,this.testService.testData.daily_time_spent=isNaN(this.testService.testData.daily_time_spent)?0:this.testService.testData.daily_time_spent+1,!this.testService.testData.c_modules.lock_sections||"withsectimer"!==this.testService.testData.c_modules.sectimer&&this.testService.testData.c_modules.sectimer||(this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].timer<=120?(this.disableSubmit=!0,"End Section"===this.dialogHeader&&this.onDialogClose()):this.disableSubmit=!1,30===this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].timer&&this.showGrowlMsg(1e4,"warn","Section is about to end","It will be auto submitted"),this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].timer<=0&&this.submitSection(!0)),"Psychometric Test"===this.testService.testData.t_type&&(this.disableSubmit=!!this.testService.testData.frozen_data.frozen_test_data.some(t=>t.questions.some(t=>3===t.state||5===t.state))),this.testService.testData.t_counter%60==0&&(this.eventTracker("heart-beat"),this.setLiveData(),this.updateTestDailyDurationSpent(),this.current_q.is_recording&&this.triggerQuestionAction({type:"Capture Image"})),this.testService.testData.t_counter%30==0&&this.testService.testNetworkStatus().then(t=>{t&&(this.proctorImageAction={type:"retry-in-queue",counter:this.testService.testData.t_counter})}),this.testService.testData.c_modules.remote_proctoring_type){this.testService.testData.t_counter%5==0&&(this.proctorLiveAction={type:"live-check",counter:this.testService.testData.t_counter}),this.testService.testData.t_counter%300==0&&("Video"===this.testService.testData.c_modules.remote_proctoring_type&&(this.proctorMediaAction={type:"video-upload-nonsubmit",counter:this.testService.testData.t_counter}),"Picture-Audio"===this.testService.testData.c_modules.remote_proctoring_type&&(this.proctorMediaAction={type:"audio-upload-nonsubmit",counter:this.testService.testData.t_counter}));let t=60;this.testService.testData.c_modules.data_capture_interval&&this.testService.testData.c_modules.data_capture_interval>=0&&(t=60*Number(this.testService.testData.c_modules.data_capture_interval)),this.testService.testData.t_counter%t==0&&(this.proctorImageAction={type:"upload-image",counter:this.testService.testData.t_counter},(this.testService.testData.c_modules.remote_proctoring_type&&!this.testService.testData.c_modules.isRecordOnly||this.testService.testData.c_modules.face_verification)&&(this.proctorImageAction={type:"face-api",counter:this.testService.testData.t_counter}))}if((!this.testService.testData.c_modules.tabswitchcount&&this.testService.testData.c_modules.tabswitchcount>=0||this.testService.testData.c_modules.tabswitchcount)&&this.testService.testData.c_modules.tab_monitor&&this.testService.testData.c_modules.tabswitchcount<this.testService.testData.client_data.tabswitched&&this.submitTestOnTabSwitch(),(!this.testService.testData.c_modules.copyPasteCount&&this.testService.testData.c_modules.copyPasteCount>=0||this.testService.testData.c_modules.copyPasteCount)&&this.testService.testData.c_modules.copy_past_monitor&&this.testService.testData.c_modules.copyPasteCount<this.testService.testData.client_data.copyPasted&&this.submitTestOnCopyPaste(),this.testService.testData.t_counter<=0&&this.submitTest("auto-test-submitted"),!this.testService.testData.t_counter&&this.timerRunnerSub&&clearInterval(this.timerRunnerSub),t&&i){let s=this.testService.testData.instanceTime.getTime(),l=t-s;if(l>=0){if(l<=12e4&&l>=0&&!e&&(e=!0,this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0,summary:"Test is about to auto submit"}}),this.disableSubmit=!0),l<=1e3&&l>=0&&!n){this.testService.testData.client_data.submit_type="test-cut-time-reached",n=!0;const e=this.testService.testData.c_modules.selectedtimezone?this.testService.testData.c_modules.selectedtimezone:"+05:30";if(t){const t=this.globalService.timezone(this.testService.testData.c_modules.auto_submit_cutoff_time,e);this.triggerAlert("Custom",{dialogHeader:"Submitting",dialogHeaderRequired:!0,dialogClosable:!1,alertData:{visible:!0,summary:"You will be redirected now",detail:"This test should have been completed at "+t+".\nSince you have not completed it, it is being auto submitted"}})}yield this.submitProctoring(),this.eventTracker("auto-submit-cutoff-reached"),this.markTestSubmitted(),setTimeout(()=>{this.redirectToListing()},8e3)}}else i=!1}}this.t_counter=this.testService.testData.t_counter})),1e3)}socketHandler(){const t=this.socketService.messageRecieved.subscribe(t=>{if(t&&t.action)switch(t.action){case"Compiled & Run":"block_programming"===this.current_q.question_type?this.handleBlockProgSubmit(t.data):this.handleSampleTestCaseCompile(t.data);break;case"staff_best":this.handleStaffBest(t.data);break;case"Submitted":this.handleTestCaseCompile(t.data);break;case"student_debug_code":this.handleDebugCode(t.data);break;case"essay_compile":this.handleEssayCompile(t.data);break;case"extend_time":this.extendTimeHandler(t.data);break;case"force_submit":this.handleForceSubmit(t.data);break;case"c_module_update":this.handleCourseUpdate(t.data);break;case"one_to_one_call":this.handleOneToOneCall(t.data);break;case"one_to_one_call_stop":this.handleOneToOneCallStop(t.data);break;case"live-screen-share-start":this.handleLiveScreenShareStart(t.data);break;case"live-screen-share-stop":this.handleLiveScreenShareStop(t.data);break;case"one_to_one_participant_data":this.receiveParticipantData(t.data);break;case"create_account":this.handleCreateCloudAccount(t.data);break;case"verify_lab":this.handleCloudTestCases(t.data)}});this.serviceSubs.push(t)}handleOneToOneCall(t){this.testService.userData.school_id===t.school_id&&this.testService.userData.user_id===t.user_id&&(this.adminParticipantID=t.participant_id,this.adminUserID=t.sender_id,this.enableCallNotification=!0,this.staffName=t.staff_name.replace("$"," "))}handleOneToOneCallStop(t){if(this.enableCallNotification=!1,void 0!==this.jitsiAPI&&(this.jitsiAPI.dispose(),null==this.liveScreenShareMeeting&&null==this.jitsiAPI&&(this.adminParticipantID=void 0),this.isOnCall=!1,this.isOnCallObj={type:"onCall",value:!1},this.jitsiAPI=void 0),void 0!==this.twilioRoom){if(null==this.liveScreenShareTwilio)this.twilioRoom.disconnect(),this.adminParticipantID=void 0,this.twilioRoom=void 0;else{let t=1;this.twilioRoom.localParticipant.audioTracks.forEach(t=>{t.track.disable()}),this.twilioRoom.localParticipant.videoTracks.forEach(e=>{1==t&&e.track.disable(),t++});let e=this.remoteParticipant.nativeElement;e.lastElementChild&&e.removeChild(e.lastElementChild)}this.isOnCall=!1,this.isOnCallObj={type:"onCall",value:!1}}void 0!==this.participantTimer&&clearTimeout(this.participantTimer),this.showCallLoader=!1}twilioScreenShareListener(){this.twilioScreenShareTimer=setTimeout(()=>{if(void 0!==this.liveScreenShareTwilio&&null!=this.twilioRoom&&0==lodash__WEBPACK_IMPORTED_MODULE_7__.size(this.twilioRoom&&this.twilioRoom.participants?this.twilioRoom.participants:{}))return this.twilioRoom.localParticipant.unpublishTrack(this.liveScreenShareTwilio),this.liveScreenShareTwilio.stop(),this.liveScreenShareTwilio=void 0,clearTimeout(this.twilioScreenShareTimer),void(null==this.liveScreenShareTwilio&&0==this.isOnCall&&(this.twilioRoom.disconnect(),this.twilioRoom=void 0,this.adminParticipantID=void 0));this.liveScreenShareTwilio?this.twilioScreenShareListener():clearTimeout(this.twilioScreenShareTimer)},5e4)}handleLiveScreenShareStart(t){if(this.testService.userData.school_id===t.school_id&&this.testService.userData.user_id===t.user_id)if(this.adminUserID=t.sender_id,this.staffName=t.staff_name.replace("$"," "),void 0!==t.participant_id&&(this.adminParticipantID=t.participant_id),this.liveScreenShare=!1,1==t.callingMethod){if(this.isMobile)return void this.socketService.sendMessage({message_type:"screen-sharing-stopped",school_id:this.testService.userData.school_id,user_id:this.adminUserID});this.twilioScreenShareHandler(this)}else this.screenShare(this),void 0!==this.screenShareParticipantTimer&&clearTimeout(this.screenShareParticipantTimer),this.screenShareParticipantTimer=setTimeout(()=>{void 0!==this.liveScreenShareMeeting&&(this.liveScreenShareMeeting.executeCommand("hangup"),this.liveScreenShareMeeting.dispose(),this.liveScreenShareMeeting=void 0,clearTimeout(this.screenShareParticipantTimer),null==this.liveScreenShareMeeting&&null==this.jitsiAPI&&(this.adminParticipantID=void 0))},12e4)}joinTwilioRoom(t,e){return tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){this.testService.getLiveScreenShareDataTwilio().subscribe(n=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){var i=n.jwt_token,s=n.roomName;this.testService.getTwilio().then(()=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){this.twilioRoom=yield new window.Twilio.Video.connect(i,{name:s,audio:!0,video:this.isMobile?{width:500}:{height:308,frameRate:24,width:500}}),this.twilioRoom.localParticipant&&this.twilioRoom.localParticipant.sid&&(!this.isOnCall&&e&&(this.twilioRoom.localParticipant.audioTracks.forEach(t=>{t.track.disable()}),this.twilioRoom.localParticipant.videoTracks.forEach(t=>{t.track.disable()})),t.socketService.sendMessage({message_type:"one-to-one-joined",school_id:t.testService.userData.school_id,user_id:t.adminUserID,participant_id:this.twilioRoom.localParticipant.sid,isMobile:this.isMobile}),!this.liveScreenShareTwilio&&e&&this.shareScreenInTwilio(t)),null==this.twilioRoom.participants||e||t.twilioRoom.participants.forEach((function(e){t.participantConnected(e,t)})),this.twilioRoom.on("participantConnected",(function(e){t.participantConnected(e,t)})),this.twilioRoom.on("participantDisconnected",(function(e){t.participantDisconnected(e,t)}))})))})))}))}shareScreenInTwilio(t){navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?navigator.mediaDevices.getDisplayMedia().then(e=>{this.testService.getTwilio().then(()=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){this.liveScreenShareTwilio=yield new window.Twilio.Video.LocalVideoTrack(e.getTracks()[0]),this.twilioRoom.localParticipant.publishTrack(this.liveScreenShareTwilio),this.twilioScreenShareListener(),this.liveScreenShareTwilio.mediaStreamTrack.onended=()=>{this.twilioScreenShareHandler(t)}})))}).catch(()=>{clearTimeout(this.screenShareParticipantTimer),t.socketService.sendMessage({message_type:"screen-sharing-stopped",school_id:t.testService.userData.school_id,user_id:t.adminUserID}),t.isOnCall||(t.twilioRoom.disconnect(),t.twilioRoom=void 0),alert("Could not share the screen.")}):alert("Could not share the screen.")}twilioScreenShareHandler(t){return tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){this.twilioRoom?this.liveScreenShareTwilio?(this.twilioRoom.localParticipant.unpublishTrack(this.liveScreenShareTwilio),this.liveScreenShareTwilio.stop(),this.liveScreenShareTwilio=void 0,clearTimeout(this.screenShareParticipantTimer),this.socketService.sendMessage({message_type:"screen-sharing-stopped",school_id:t.testService.userData.school_id,user_id:t.adminUserID}),0==this.isOnCall&&(this.twilioRoom.disconnect(),this.twilioRoom=void 0)):this.shareScreenInTwilio(t):this.joinTwilioRoom(t,!0)}))}handleLiveScreenShareStop(t){this.testService.userData.school_id===t.school_id&&this.testService.userData.user_id===t.user_id&&(void 0!==this.screenShareParticipantTimer&&clearTimeout(this.screenShareParticipantTimer),void 0!==this.liveScreenShareMeeting&&(this.liveScreenShareMeeting.executeCommand("hangup"),this.liveScreenShareMeeting.dispose(),this.liveScreenShareMeeting=void 0,null==this.liveScreenShareMeeting&&null==this.jitsiAPI&&(this.adminParticipantID=void 0)),void 0!==this.liveScreenShareTwilio&&(this.twilioRoom.localParticipant.unpublishTrack(this.liveScreenShareTwilio),this.liveScreenShareTwilio.stop(),this.liveScreenShareTwilio=void 0,clearTimeout(this.screenShareParticipantTimer),this.isOnCall||(this.twilioRoom.disconnect(),this.twilioRoom=void 0)))}disconnectUserFromCall(){void 0!==this.twilioRoom&&(void 0!==this.liveScreenShareTwilio&&(this.twilioRoom.localParticipant.unpublishTrack(this.liveScreenShareTwilio),this.liveScreenShareTwilio.stop(),this.liveScreenShareTwilio=void 0,clearTimeout(this.screenShareParticipantTimer)),this.twilioRoom.disconnect(),this.twilioRoom=void 0),void 0!==this.jitsiAPI&&(this.jitsiAPI.dispose(),this.jitsiAPI=void 0),void 0!==this.liveScreenShareMeeting&&(this.liveScreenShareMeeting.executeCommand("hangup"),this.liveScreenShareMeeting.dispose(),this.liveScreenShareMeeting=void 0),this.isOnCall=!1,this.isOnCallObj={type:"onCall",value:!1},this.adminParticipantID=void 0}handleCreateCloudAccount(t){t&&t.user&&this.testService.testData.frozen_data.frozen_test_data.forEach(e=>{e.questions.forEach(e=>{"cloud_question"===e.question_type&&(e.cloudurl=t.user.url,e.cloud_username=t.user.UserName,e.cloud_accid=t.user.accountId,e.cloud_pwd=t.user.Password,e.loaderStyle={display:"none"})})}),this.current_q.sample_tc_loading=!1}receiveParticipantData(t){this.testService.userData.school_id===t.school_id&&this.testService.userData.user_id===t.user_id&&(this.adminParticipantID=t.participant_id,this.livescreensharingJoined&&clearTimeout(this.screenShareParticipantTimer),this.videoCallJoined&&clearTimeout(this.participantTimer))}attendCall(){void 0!==this.participantTimer&&clearTimeout(this.participantTimer),this.participantTimer=setTimeout(()=>{this.jitsiAPI&&(this.showCallLoader=!1,this.hangUp()),clearTimeout(this.participantTimer)},12e4),this.showCallLoader=!0;const t=this.testService.testData.c_modules;t.onetoOneCallType&&2==t.onetoOneCallType?(this.callTypeTwilio=!0,this.faceCamShareTwilio(this)):this.faceCamShare(this),this.isOnCall=!0,this.isOnCallObj={type:"onCall",value:!0},this.enableCallNotification=!1}dismissCall(){this.enableCallNotification=!1,this.showCallLoader=!1,this.socketService.sendMessage({message_type:"one-to-one-call-denied",school_id:this.testService.userData.school_id,user_id:this.adminUserID})}hangUp(){this.isOnCall=!1,this.isOnCallObj={type:"onCall",value:!1},this.showCallLoader=!1,this.jitsiAPI.dispose(),null==this.liveScreenShareMeeting&&null==this.jitsiAPI&&(this.adminParticipantID=void 0)}handleSampleTestCaseCompile(t){if(this.current_q.q_id===t.q_id)try{if(this.current_q.received_compiles+=1,t.result){switch(t.result.compile_status){case"Compilation successful":this.current_q.compiler_message=t.result.compile_status,this.current_q.sample_tc_list[t.index].message=t.status?"Passed":"Failed",this.current_q.sample_tc_list[t.index].output=t.result.output;break;case"Internal error":this.current_q.compiler_message="Internal error. Try again",this.current_q.sample_tc_list[t.index].message="Failed",this.current_q.sample_tc_list[t.index].output="Internal error. Try again";break;case"Compilation failed":this.current_q.compiler_message=t.result.errors,this.current_q.sample_tc_list[t.index].message="Failed",this.current_q.sample_tc_list[t.index].output=t.result.output;break;case"Execution Timed Out":this.current_q.compiler_message="Execution Timed Out",this.current_q.sample_tc_list[t.index].message="Failed",this.current_q.sample_tc_list[t.index].output="Execution Timed Out"}t.custom||0===this.current_q.no_test_cases?this.current_q.sample_tc_list[t.index].output=t.result.output:t.status&&(this.current_q.passed+=1)}else this.current_q.compiler_message="Internal error. Try again",this.current_q.sample_tc_list[t.index].message="Failed",this.current_q.sample_tc_list[t.index].output="Internal error. Try again";this.current_q.received_compiles>=this.current_q.no_test_cases&&(clearTimeout(this.testService.timeOutSub),this.current_q.compiled_count+=1,this.current_q.sample_tc_loading=!1,this.eventTracker("compile-program"))}catch(e){this.current_q.sample_tc_loading=!1}}handleBlockProgSubmit(t){if(this.current_q.q_id===t.q_id)if(t.result){switch(t.result.compile_status){case"Compilation successful":this.current_q.compiler_message=t.result.compile_status,this.current_q.sample_tc_list[0].message=t.status?"Passed":"Failed",this.current_q.sample_tc_list[0].output=t.result.output;break;case"Internal error":this.current_q.compiler_message="Internal error. Try again",this.current_q.sample_tc_list[0].message="Failed",this.current_q.sample_tc_list[0].output="Internal error. Try again";break;case"Compilation failed":this.current_q.compiler_message=t.result.errors,this.current_q.sample_tc_list[0].message="Failed",this.current_q.sample_tc_list[0].output=t.result.output;break;case"Execution Timed Out":this.current_q.compiler_message="Execution Timed Out",this.current_q.sample_tc_list[0].message="Failed",this.current_q.sample_tc_list[0].output="Execution Timed Out"}this.current_q.program_submitted_count+=1,this.testService.updateEditCount(this.current_q),this.current_q&&this.current_q.program_submitted_count>1&&this.questionAnswerActionHandle({type:"restrict-edit"}),this.current_q.attempted=!0,this.eventTracker("submit-program")}else this.current_q.compiler_message="Internal error. Try again",this.current_q.sample_tc_list[0].message="Failed",this.current_q.sample_tc_list[0].output="Internal error. Try again"}handleStaffBest(t){if(this.current_q.q_id===t.q_id)try{if(t.url)if(t.result)switch(t.result.compile_status){case"Compilation successful":this.current_q.sample_tc_list[t.index].ex_output=t.result.output;break;case"Internal error":this.current_q.sample_tc_list[t.index].ex_output="Internal error. Try again";break;case"Compilation failed":this.current_q.sample_tc_list[t.index].ex_output=t.result.errors;break;case"Execution Timed Out":this.current_q.sample_tc_list[t.index].ex_output=t.result.compile_status}else this.current_q.sample_tc_list[t.index].ex_output="Internal error. Try again";else this.current_q.sample_tc_list[t.index].ex_output=t.result.output}catch(e){}}handleTestCaseCompile(t){if(this.current_q.q_id===t.q_id)try{if(this.current_q.test_case_match_percent&&this.current_q.test_case_match_percent.length||(this.current_q.test_case_match_percent=[]),this.current_q.code_match_percentge=t.code_match_percentge,this.current_q.received_compiles+=1,this.current_q.test_case_match_percent.push(t),t.result){let e;switch(t.status){case 0:e="Failed";break;case 1:e="Success",this.current_q.passed+=1,t.result.score=t.score;break;case 2:e="Time Limit Exceeded";break;case 3:e="Memory Limit Exceeded"}switch(t.result.compile_status){case"Compilation successful":this.current_q.compiler_message=t.result.compile_status,this.current_q.tc_list[t.index].error=t.result.compile_status,this.current_q.tc_list[t.index].time_complexity=t.result.time_complexity||"-",this.current_q.tc_list[t.index].space_complexity=t.result.space_complexity||"-";break;case"Internal error":this.current_q.compiler_message="Internal error. Try again",this.current_q.tc_list[t.index].error="Internal error. Try again";break;case"Compilation failed":this.current_q.compiler_message=t.result.errors,this.current_q.tc_list[t.index].error=t.result.compile_status;break;case"Execution Timed Out":this.current_q.compiler_message=t.result.compile_status,this.current_q.tc_list[t.index].error=t.result.compile_status}t.result&&"17"===t.result.langid&&(this.current_q.tc_list[t.index].output=t.result&&t.result.output?t.result.output:"",this.current_q.enable_custom=!0),this.current_q.tc_list[t.index].tc_status=e,this.current_q.tc_list[t.index].tc_time=t.result.time,this.current_q.tc_list[t.index].tc_memory=t.result.mem,this.current_q.tc_list[t.index].url=t.url,this.current_q.tc_list[t.index].status=t.status,this.current_q.tc_list[t.index].test_case_percentage=t.result.test_case_percentage?t.result.test_case_percentage:0,this.current_q.tc_list[t.index].score=t.result.score?t.result.score:0,this.current_q.test_case_match_percent&&this.current_q.test_case_match_percent.length&&(this.current_q.test_case_match_percent=[].concat.apply([],this.current_q.test_case_match_percent)),this.setDataFlexTable(this.current_q.tc_list[t.index],t.index),this.current_q.received_compiles>=this.current_q.no_test_cases&&(clearTimeout(this.testService.timeOutSub),this.current_q.attempted=!0,this.current_q.program_submitted_count+=1,this.testService.updateEditCount(this.current_q),this.current_q&&this.current_q.program_submitted_count>1&&this.questionAnswerActionHandle({type:"restrict-edit"}),this.current_q.tc_loading=!1,this.current_q.tc_submitted=this.current_q.tc_list.map(t=>({url:t.url,status:t.status,test_case_percentage:t.test_case_percentage,score:t.score})),this.eventTracker("submit-program"))}else this.current_q.compiler_message="Internal error. Try again"}catch(e){this.current_q.tc_loading=!1}}setDataFlexTable(t,e){if(this.current_q.flex_table_data&&this.current_q.flex_table_data.data&&this.current_q.flex_table_data.data[e]){switch(t.status){case 0:this.current_q.flex_table_data.data[e].Result='<i class="icon-close-1"></i>';break;case 1:this.current_q.flex_table_data.data[e].Result='<i class="icon-ios-checkmark"></i>';break;case 2:case 3:this.current_q.flex_table_data.data[e].Result='<i class="icon-alert-o"></i>'}this.current_q.flex_table_data.data[e].Status=t.tc_status,this.current_q.flex_table_data.data[e]["Time(ms)"]=t.tc_time,this.current_q.flex_table_data.data[e].Message=t.error,this.current_q.flex_table_data.data[e]["Time Complexity"]=t.time_complexity,this.current_q.flex_table_data.data[e]["Space Complexity"]=t.space_complexity}}handleDebugCode(t){t.answerDebugURL&&this.testService.getURL(t.answerDebugURL).subscribe(e=>{clearTimeout(this.testService.timeOutSub),e&&this.current_q.q_id===t.q_id&&(this.current_q.langList[this.current_q.langListIndex].debuggData=e.trace,this.current_q.langList[this.current_q.langListIndex].answerDebugURL=t.answerDebugURL,this.current_q.isDebugging=!1)})}handleEssayCompile(t){t.url?this.testService.getURL(t.url).subscribe(t=>{this.essayResponseHandler(t)}):this.essayResponseHandler(t)}extendTimeHandler(t){this.testService.testData.c_modules.disable_timer||this.testService.testData.c_modules.lock_sections&&("withsectimer"===this.testService.testData.c_modules.sectimer||null===this.testService.testData.c_modules.sectimer)||(this.testService.testData.t_counter+=60*Number(t),this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex]&&this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].timer&&(this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].timer+=60*Number(t)))}handleForceSubmit(t){return tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){this.testService&&this.testService.testData&&this.testService.testData.frozen_data&&this.testService.testData.frozen_data.id&&t&&t.id&&t.id===this.testService.testData.frozen_data.id&&t.fromwhere&&"forceSubmit"===t.fromwhere&&(this.triggerAlert("Custom",{dialogHeader:"Submitting",dialogHeaderRequired:!0,dialogClosable:!1,alertData:{visible:!0,summary:"You will be redirected now",detail:"Your test has been force sumbitted by the admin"}}),this.testService.testData.isForceSubmit=!0,yield this.submitProctoring(),this.eventTracker("force-submitted-by-staff"),this.markTestSubmitted(),setTimeout(()=>{this.redirectToListing()},8e3))}))}essayResponseHandler(t){if(clearTimeout(this.testService.timeOutSub),this.current_q.q_id===t.q_id)try{this.current_q.program_submitted_count+=1,this.testService.updateEditCount(this.current_q),t.percentages.score?(this.current_q.essay_processed_answer={answer:[this.current_q.answer],percentages:t.percentages},this.current_q.state=100===t.percentages.score?1:4):this.current_q.essay_processed_answer={answer:[this.current_q.answer],percentages:t.percentages},"skipped"===t.percentages.score?(this.current_q.obtained_mark=0-this.current_q.negative_marks,this.current_q.state=2):(this.current_q.obtained_mark=t.percentages.score?this.current_q.marks*(t.percentages.score/100):0-this.current_q.negative_marks,t.percentages.score||(this.current_q.state=2)),this.showGrowlMsg(5e3,"success","Success","Answer submitted"),this.current_q&&this.current_q.program_submitted_count>1&&this.questionAnswerActionHandle({type:"restrict-edit"}),this.current_q.attempted=!0,this.current_q.evaluating=!1,this.eventTracker("submit-program")}catch(e){this.current_q.evaluating=!1}}checkStreamEventDataSize(t,e){return new Promise((n,i)=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){let i="";switch(t){case"test-taking/submit-event":i="/student/"+e.user_id+"/course/"+e.c_id+"/test/"+e.t_id+"/question/"+e.q_id+"/event";break;case"test-taking/debug-program":case"test-taking/student-compile":i="/user/"+e.user_id+"/question/"+e.q_id+"/compile";break;case"test-taking/cloud-provider":i="/user/"+e.user_id+"/question/"+e.q_id+"/cloudprovider"}const s={url:i,text:(yield this.testService.getCryptoJS()).AES.encrypt(JSON.stringify(e),this.testService.userData.user_id).toString()};if(JSON.stringify(s).length>15e6){const i={file_name:this.testService.userData.school_id+"/"+t+"/"+this.testService.testData.c_id+"/"+this.testService.testData.t_id+"/"+this.testService.testData.attempt_no+"/"+this.testService.userData.user_id+"/"+e.q_id+"-"+(new Date).getTime(),Bucket_name:this.globalService.proctoring_bucket,type:"application/json"};this.globalService.getSignedUrl(i).subscribe(t=>{t&&t.data&&this.globalService.uploadUsingSignedUrl(t.data.url,s).subscribe(t=>{if(t&&200===t.status){const e=t.url.split(".amazonaws")[0].split("://")[1].split(".")[0];n(JSON.stringify({s3_link:"https://s3.amazonaws.com/"+e+"/"+i.file_name}))}else n(!1)})})}else n(JSON.stringify(s))})))}compileRequestErrorHandler(t){clearTimeout(this.testService.timeOutSub),this.current_q.sample_tc_loading=!1,this.current_q.tc_loading=!1,this.current_q.evaluating=!1,this.showGrowlMsg(5e3,"error","Failed",t)}sendCompileToStream(t,e){return new Promise((n,i)=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){const i=yield this.testService.getAWS();let s;s=!(!(i&&i.config&&i.config.credentials&&i.config.credentials)||i.config.credentials.expired)||(yield this.testService.authSDK()),s?this.checkStreamEventDataSize("test-taking/student-compile",t).then(t=>{t?"essay_email_writing"===e?((new i.SQS).sendMessage({MessageBody:t,QueueUrl:_environments_environment__WEBPACK_IMPORTED_MODULE_6__.a.essay_compile_queue.QueueUrl},(t,e)=>{if(t){let e="";switch(t.name){case"NetworkingError":e="Network error. Could not send request";break;case"TimeoutError":e="Request TimedOut. Could not send request";break;default:e="Request failed. Could not send request"}this.compileRequestErrorHandler(e),n(!1)}else n(!0)}),n(!0)):this.testService.fetchCompileResult(t).subscribe(t=>{let e=JSON.parse(t.Data);if(e&&e.action)switch(e.action){case"Compiled & Run":"block_programming"===this.current_q.question_type?this.handleBlockProgSubmit(e.data):this.handleSampleTestCaseCompile(e.data);break;case"staff_best":this.handleStaffBest(e.data);break;case"Submitted":this.handleTestCaseCompile(e.data)}}):(this.compileRequestErrorHandler("Data Error. Could not send request"),n(!1))}):(this.compileRequestErrorHandler("Access Error. Could not send request"),n(!1))})))}sendDebugToStream(t,e){return new Promise((e,n)=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){const n=yield this.testService.getAWS();let i;i=!(!(n&&n.config&&n.config.credentials&&n.config.credentials)||n.config.credentials.expired)||(yield this.testService.authSDK()),i?this.checkStreamEventDataSize("test-taking/debug-program",t).then(t=>{t?((new n.SQS).sendMessage({MessageBody:t,QueueUrl:_environments_environment__WEBPACK_IMPORTED_MODULE_6__.a.debugger_queue.QueueUrl},(t,n)=>{e(!t)}),e(!0)):e(!1)}):e(!1)})))}sendCloudToStream(t,e){return new Promise((e,n)=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){const n=yield this.testService.getAWS();let i;i=!(!(n&&n.config&&n.config.credentials&&n.config.credentials)||n.config.credentials.expired)||(yield this.testService.authSDK()),"submitCloud"==t.type?this.current_q.submit_tc_loading=!0:"cloudTestCase"==t.type&&(this.current_q.run_tc_loading=!0),i?(t.data.type=t.type,this.checkStreamEventDataSize("test-taking/cloud-provider",t.data).then(t=>{t?((new n.SQS).sendMessage({MessageBody:t,QueueUrl:_environments_environment__WEBPACK_IMPORTED_MODULE_6__.a.cloud_provider_queue.QueueUrl},(t,n)=>{e(!t)}),e(!0)):e(!1)})):e(!1)})))}pauseTest(){return tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){this.success.emit({type:"Start Loader"}),this.projectInstanceArray&&this.projectInstanceArray.length&&this.formatForStopInstance(),yield this.eventTracker("pause-test"),this.testService.isTestPaused=!0,this.redirectToListing()}))}submitSection(t){"video_answer_speaking"===this.current_q&&!this.current_q.attempted&&this.current_q.is_recording&&t?this.triggerQuestionAction({type:"Submit",data:{action:"submit-test"}}):(this.testService.testData.c_modules.lock_sections&&"withoutsectimer"===this.testService.testData.c_modules.sectimer?this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].subimited=!1:(this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].subimited=!0,this.testService.testData.t_counter=this.testService.testData.t_counter-this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex].timer),this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex+1]&&this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex+1].questions&&(this.testService.testData.current_q=this.testService.testData.frozen_data.frozen_test_data[this.current_q.secIndex+1].questions[0],this.current_q=this.testService.testData.current_q),this.eventTracker(t?"auto-submit-section":"submit-section"))}calculateHoursMinsFromSeconds(){let t=60*this.testService.testData.t_total_duration-this.testService.testData.t_counter;this.testService.testData.c_modules.disable_timer&&(t=this.testService.testData.t_counter);let e=Math.floor(t/60),n=t-60*e,i=Math.floor(t/3600);return e>=60&&(e%=60),e>0?e<10&&(e="0"+e):e="00",i>0?i<10&&(i="0"+i):i="00",n>0?n<10&&(n="0"+n):n="00",i+":"+e+":"+n}sendSubmitEventToStream(t){return new Promise((e,n)=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){const n=yield this.testService.getAWS();let i;i=!(!(n&&n.config&&n.config.credentials&&n.config.credentials)||n.config.credentials.expired)||(yield this.testService.authSDK()),i?this.checkStreamEventDataSize("test-taking/submit-event",t).then(t=>{t?this.testService.publishToStream({data:t,topic:_environments_environment__WEBPACK_IMPORTED_MODULE_6__.a.submit_stream.StreamName}).subscribe(t=>{if(t.success){const t=this.testService.schoolData.schools_metadata;if(t&&t.enableVIAnalysis&&this.testService.testData.c_modules.is_video_interview){const t={info:{user_id:this.testService.userData.user_id,school_id:this.testService.schoolData.school_id,c_id:this.testService.testData.c_id,t_id:this.testService.testData.t_id,attempt_no:this.testService.testData.attempt_no,sectionlist:[]},data:[],q_ids:[]};this.testService.testData.frozen_data.frozen_test_data.forEach(e=>{t.info.sectionlist.push(e.name),e.questions.forEach(n=>{n.vas_data&&n.vas_data.length&&(t.data=t.data.concat(n.vas_data)),t.q_ids.push({q_id:n.q_id,marks:n.marks,negative_marks:n.negative_marks,section_name:e.name})})});const n={data:JSON.stringify(t),topic:_environments_environment__WEBPACK_IMPORTED_MODULE_6__.a.vi_stream.StreamName};this.testService.publishToVIStream(n).subscribe(t=>{e(!!t.success)})}else e(!0)}else e(!1)},t=>{e(!1)}):e(!1)}):e(!1)})))}markTestSubmitted(){let t=localStorage.getItem("s");t?(t=JSON.parse(t),t.push(this.testService.userData.user_id+"#"+this.testService.testData.c_id+"#"+this.testService.testData.t_id),localStorage.setItem("s",JSON.stringify(t))):localStorage.setItem("s",JSON.stringify([this.testService.userData.user_id+"#"+this.testService.testData.c_id+"#"+this.testService.testData.t_id]))}showRating(){this.dialogHeader="Feedback",this.dialogHeaderStyle=void 0,this.dialogHeaderRequired=!0,this.alertData={visible:!0,summary:"How would you rate the test?",detail:void 0,form:[{type:"radio",name:"rating",label:"Test rating",value:"",options:[{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5}],required:!0,customError:{error:!1,message:""}}],button:[{multipleBtn:!0,id:"tt-alert-reject",btnName:"Skip",disable:"false",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",action:void 0},{multipleBtn:!0,id:"tt-alert-accept",btnName:"Submit",border:"1px solid #103ca5",fontColor:"var(--white)",background:"#103ca5",padding:"6px 20px",fontSize:"14px",action:void 0}],btnStyle:{display:"flex","justify-content":"center"}},this.dialogStyle=document.body.offsetWidth>480?{width:"480px",top:"30%",height:"auto","min-height":"unset"}:{width:"100%",top:"30%",height:"auto","min-height":"unset"},this.dialogVisible=!0}submitRating(t){if(this.testService.testRating({show_rating:t,user_id:this.testService.userData.user_id,c_id:this.testService.testData.c_id,t_id:this.testService.testData.t_id,attempt_no:this.testService.testData.attempt_no}).subscribe(()=>{}),this.testService&&this.testService.schoolData&&this.testService.schoolData.school_id&&this.testService.redirectToInstaSchools.includes(this.testService.schoolData.school_id)){const t=document.createElement("a");document.body.appendChild(t),t.href="https://instagram.com/gtp_virtusa?utm_medium=copy_link",t.target="_blank",t.click(),document.body.removeChild(t)}if(this.testService&&this.testService.schoolData&&this.testService.schoolData.schools_metadata&&this.testService.schoolData.schools_metadata.sub_redirection_url){const t=document.createElement("a");document.body.appendChild(t),t.href=this.testService.schoolData.schools_metadata.sub_redirection_url,t.target="_blank",t.click(),document.body.removeChild(t)}this.redirectToListing()}redirectToListing(){clearInterval(this.timerRunnerSub),"contest"===this.testService.testData.entity&&"cba57c16-077f-4c94-a67c-a515f4795b5e"===this.testService.userData.school_id?this.triggerAlert("Custom",{dialogHeader:"Congratulation",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0},congratsPopup:!0}):this.FinalSubmit()}submitTestOnTabSwitch(){if(!this.tabSwitchReached){let t="submit";this.testService.testData&&this.testService.testData.c_modules&&"pause"===this.testService.testData.c_modules.tabswitchAction&&(t="pause"),this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0,summary:"pause"===t?"You will be moved out of test!":"Your test will be submitted now",detail:"You have exceeded the permissible Tab Switch Limit!"}}),this.tabSwitchReached=!0,this.success.emit({type:"Start Loader"}),setTimeout(()=>{"pause"===t?(this.eventTracker("tab-switch-reached"),this.pauseTest()):this.submitTest("tab-switch-reached")},15e3)}}submitTestOnCopyPaste(){if(!this.copyPasteReached){let t="submit";this.testService.testData&&this.testService.testData.c_modules&&"pause"===this.testService.testData.c_modules.copyPasteAction&&(t="pause"),this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0,summary:"pause"===t?"You will be moved out of test!":"Your test will be submitted now",detail:"You have exceeded the permissible copy Limit!"}}),this.copyPasteReached=!0,this.success.emit({type:"Start Loader"}),setTimeout(()=>{"pause"===t?(this.eventTracker("copy-paste-reached"),this.pauseTest()):this.submitTest("copy-paste-reached")},15e3)}}stopRecording(){this.testService.screenShareMedia&&this.testService.screenShareMedia.getTracks().forEach(t=>{t.stop()})}submitProctoring(){return new Promise((t,e)=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){if(this.testService.testData.c_modules.remote_proctoring_type&&!this.testService.testData.submit_proctoring){switch(this.testService.testData.c_modules.remote_proctoring_type){case"Video":this.proctorMediaAction={type:"video-upload-submit",counter:this.testService.testData.t_counter};break;case"Picture-Audio":this.proctorMediaAction={type:"audio-upload-submit",counter:this.testService.testData.t_counter};break;case"Picture":this.proctorImageAction={type:"upload-image-submit",counter:this.testService.testData.t_counter}}t(!1)}else t(!0)})))}submitTest(t){return tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){if("video_answer_speaking"===this.current_q&&!this.current_q.attempted&&this.current_q.is_recording&&t&&"auto-test-submitted"===t)return void this.triggerQuestionAction({type:"Submit",data:{action:"submit-test"}});t&&t.length&&(yield this.eventTracker(t),this.testService.testData.client_data.submit_type=t);const e=()=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){this.testSubmitStatus[0].value="icon-ios-checkmark",this.success.emit({type:"Start Loader"}),this.timerRunnerSub&&clearInterval(this.timerRunnerSub),window.onfocus=null;const t=[],e=[],n=[],i={id:this.testService.testData.frozen_data.id+"",school_id:this.testService.schoolData.school_id,user_id:this.testService.userData.user_id,questions:{}};this.testService.testData.frozen_data.frozen_test_data.forEach(s=>{const l={name:s.name,timer:s.timer,subimited:s.subimited,questions:[]};let a;e.push({timer:s.timer,subimited:s.subimited}),s.questions.forEach(e=>{if(e.last_event){if(e.last_event.total_mark=e.marks,e.last_event.negative_mark=e.negative_marks,e.last_event.time_spent=e.time_spent,e.last_event.timespent=e.timespent?e.timespent:e.time_spent,e.last_event.leaderboard_values=e.last_event.leaderboard_values?e.last_event.leaderboard_values:null,e.last_event.attempted=e.attempted,"programming"!==e.question_type&&"programming_file_based"!==e.question_type||(e.last_event.test_case_match_percent=e.test_case_match_percent),"programming"===e.question_type&&e.last_event.l_event_data.answer&&e.last_event.l_event_data.answer.length){let t=JSON.parse(e.last_event.l_event_data.answer).answer;e.header_snippet&&(t=e.header_snippet+"\n"+t),e.footer_snippet&&(t=t+"\n"+e.footer_snippet),i.questions[e.q_id]={files:[{name:this.testService.programmingLangs.find(t=>t.value===e.currentLang).mainFile,data:t}]}}if("programming_file_based"===e.question_type&&e.last_event.l_event_data.answer&&e.last_event.l_event_data.answer.length){const t=JSON.parse(e.last_event.l_event_data.answer).answer;i.questions[e.q_id]={files:t.map(t=>({name:t.filename,data:t.content}))}}e.essay_processed_answer&&e.essay_processed_answer.percentages&&(e.last_event.essay_percentages=e.essay_processed_answer.percentages),l.questions.push(e.last_event)}else l.questions.push({s_question_id:e.s_question_id,question_type:e.question_type,event_type:"",user_id:this.testService.userData.user_id,q_id:e.q_id,variable_id:e.variable_id?e.variable_id:"0",t_id:this.testService.testData.t_id,c_id:this.testService.testData.c_id,attempt_no:this.testService.testData.attempt_no,updatedAt:e.updatedAt,marks:0,total_mark:e.marks,negative_mark:e.negative_marks?e.negative_marks:0,time_spent:e.time_spent?e.time_spent:0,answer:null,l_event_data:null,timespent:0,state:e.state,bookmarked:!1,total_hints_shown:0,options_switched_count:0,compiled_count:0,program_submitted_count:0,testcase_passed:0,no_test_cases:0,leaderboard_values:e.leaderboard_values?e.leaderboard_values:null,attempted:!1});"project_question"===e.question_type&&e.key&&t.push(e.key)}),s.choice_based&&(a=l.questions.map(t=>({s_question_id:t.s_question_id,marks:t.marks,attempted:!!t.attempted&&t.attempted})),a=a.sort((t,e)=>e.marks-t.marks),a=a.splice(s.max_questions).map(t=>t.s_question_id),l.questions.forEach(t=>{a.includes(t.s_question_id)&&(t.not_valid=!0)})),n.push(l)}),t&&t.length&&this.stopInstanceBulk(t),this.testService.testData.frozen_data.client_data&&this.testService.testData.frozen_data.client_data.length?(this.testService.testData.client_data.resume_time=this.testService.testData.frozen_data.client_data[this.testService.testData.frozen_data.client_data.length-1].resume_time,this.testService.testData.client_data.restarted_by=this.testService.testData.frozen_data.client_data[0].restarted_by,this.testService.testData.frozen_data.client_data[this.testService.testData.frozen_data.client_data.length-1]=this.testService.testData.client_data):(this.testService.testData.frozen_data.client_data=[],this.testService.testData.frozen_data.client_data.push(this.testService.testData.client_data));const s=this.getLTIData(),l={c_id:this.testService.testData.c_id,t_id:this.testService.testData.t_id,user_id:this.testService.userData.user_id,school_id:this.testService.schoolData.school_id,attempt_no:this.testService.testData.attempt_no,sectionData:n,remote_proctoring_type:this.testService.testData.c_modules.remote_proctoring_type?this.testService.testData.c_modules.remote_proctoring_type:void 0,isRecordOnly:!!this.testService.testData.c_modules.isRecordOnly&&this.testService.testData.c_modules.isRecordOnly,face_verification_version:this.testService.testData.c_modules.face_verification_version?this.testService.testData.c_modules.face_verification_version:void 0,secttimes:e,test_type:this.testService.testData.t_type,test_duration:this.calculateHoursMinsFromSeconds(),submit_time:this.testService.testData.instanceTime,tabswitched:this.testService.testData.client_data.tabswitched,copyPasted:this.testService.testData.client_data.copyPasted,client_data:this.testService.testData.frozen_data.client_data,test_tracking_data:this.testService.testData.test_tracking_data,penalty_points:0,type_where:this.testService.testData.entity,total_duration:this.testService.testData.t_total_duration,updateBadgeSuperBadge:!!this.testService.testData.c_modules.updateBadgeSuperBadge&&this.testService.testData.c_modules.updateBadgeSuperBadge,ltiData:s||!1};l.branch_id=this.testService.userData.school_branch_department_users[0].branch_id,l.department_id=this.testService.userData.school_branch_department_users[0].department_id,this.testService.testData.c_modules.enable_code_report&&this.testService.sonarQubeReport(i).subscribe(t=>{});const a=localStorage.getItem("externalIframePath");let r;this.testService.externalScoresArray.forEach(t=>{a&&a.includes(t)&&(r="learn.wileynxt"===t||"itrackglobal"===t?"itrack":"www.wileynxt.com"===t||"uat.wileynxt.com"===t?"wiley":t)}),r?(l.externalEmbedded=this.testService.schoolData.school_code+"-"+r,l.email=this.testService.userData.email):this.testService&&this.testService.schoolData&&this.testService.schoolData.schools_metadata&&(localStorage.getItem("ssologin")&&this.testService.schoolData.schools_metadata.external_send_result||this.testService.schoolData.schools_metadata.External_submit_API)&&(l.externalEmbedded=this.testService.schoolData.school_code,l.email=this.testService.userData.email,this.testService.schoolData.schools_metadata.external_send_analysis&&(l.resultAnalysis_url=!0)),l.link=`https://${window.location.hostname.split("/")[0]}/result?id=`,yield this.sendSubmitEventToStream(l).then(t=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){if(!t){const e={event:(yield this.testService.getCryptoJS()).AES.encrypt(JSON.stringify(l),this.testService.userData.user_id).toString()};if(!(t=yield this.testService.testSubmitBE(this.testService.schoolData.school_id,this.testService.testData.c_id,this.testService.testData.t_id,this.testService.userData.user_id,this.testService.testData.attempt_no,e)))return void this.testSubmitFailHandler()}if(this.submitSuccess=t,this.submitSuccess){if(this.testSubmitStatus[2].value="icon-ios-checkmark",this.testSubmitStatus[3].label="Test submitted successfully",clearInterval(this.submitRunnerSub),this.submit_counter=0,this.markTestSubmitted(),this.testService&&this.testService.schoolData&&this.testService.schoolData.school_id&&this.testService.redirectToInstaSchools.includes(this.testService.schoolData.school_id)&&(!this.testService.testData.c_modules.show_rating||1!==this.testService.testData.attempt_no)){const t=document.createElement("a");document.body.appendChild(t),t.href="https://instagram.com/gtp_virtusa?utm_medium=copy_link",t.target="_blank",t.click(),document.body.removeChild(t)}if(this.testService&&this.testService.schoolData&&this.testService.schoolData.schools_metadata&&this.testService.schoolData.schools_metadata.sub_redirection_url){const t=document.createElement("a");document.body.appendChild(t),t.href=this.testService.schoolData.schools_metadata.sub_redirection_url,t.target="_blank",t.click(),document.body.removeChild(t)}setTimeout(()=>{this.testService.testData.c_modules.show_rating&&1===this.testService.testData.attempt_no?this.showRating():this.redirectToListing()},3e3)}})))}));this.testSubmitStatus=[{label:"Test submit process initiated",value:"icon-info---exclamatory"},{label:"Internet connection check",value:"icon-time"},{label:"Test submit process inprogress",value:"icon-time"},{label:"Test will be submitted in",value:this.submitTime}],(yield this.submitProctoring())&&(this.submitRunnerSub=setInterval(()=>tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter(this,void 0,void 0,(function*(){if(this.submit_counter+=1,this.submit_counter%10==0&&this.testService.testNetworkStatus().then(t=>{this.testSubmitStatus[1].value=t?"icon-ios-checkmark":"icon-info---exclamatory"}),this.submit_counter<60){const t=(60-this.submit_counter).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});this.testSubmitStatus[3].value="00:"+t}else{const t=(120-this.submit_counter).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});this.testSubmitStatus[2].label="Test submit Failed. Retrying...",this.testSubmitStatus[2].value="icon-info---exclamatory",this.testSubmitStatus[3].value="00:"+t}this.triggerAlert("Custom",{dialogHeader:"Test Submitting....",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0}}),this.submitSuccess&&(this.success.emit({type:"Stop Loader"}),clearInterval(this.submitRunnerSub),this.submit_counter=0),59===this.submit_counter&&this.retrying?(this.success.emit({type:"Stop Loader"}),clearInterval(this.submitRunnerSub),this.submit_counter=0,this.retrying=!1,this.redirectToListing()):120===this.submit_counter?(this.success.emit({type:"Stop Loader"}),clearInterval(this.submitRunnerSub),this.submit_counter=0,this.testSubmitFailHandler()):59===this.submit_counter&&(this.success.emit({type:"Stop Loader"}),e())})),1e3),this.testService.testNetworkStatus().then(t=>{this.testSubmitStatus[1].value=t?"icon-ios-checkmark":"icon-info---exclamatory"}),e())}))}isAutoCutoffEnabled(){let t,e,n;if(this.testService&&this.testService.testData&&this.testService.testData.c_modules){if(new Date(this.testService.testData.c_modules.auto_submit_cutoff_time)>=new Date){const e=this.testService.testData.c_modules.selectedtimezone?this.testService.testData.c_modules.selectedtimezone:"+05:30";let n=this.globalService.timezone(this.testService.testData.c_modules.auto_submit_cutoff_time,e);t=this.testService.testData.c_modules.enable_test_submit_cutoff&&this.testService.testData.c_modules.auto_submit_cutoff_time&&!this.testService.testData.c_modules.answer_mandatory&&!this.testService.testData.c_modules.answer_edit_restrict?"<li> This test will auto submit at <b>"+n+"</b>   (GMT "+e+")":"</li>",n=this.datepipe.transform(n,"dd MMM y | hh:mm a")}e=this.testService.testData.c_modules.disable_previous?"<li>Disable Previous Button has been Enabled. You won't be able to edit or come back to the previous question, once you moved further. </li>":"",n=this.testService.testData.c_modules.lock_sections?"<li> Sectional Lock has been Enabled. You won't be able to edit/ view the section once you move to successive sections (or) once the timer runs out.</li>":"",void 0===t&&(t="");const i=e+n+t;""!==i&&this.testService.testData.c_modules.enable_test_submit_cutoff&&this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!0,alertData:{visible:!0,summary:`<ul>${i}</ul>`,detail:this.testService.testData.c_modules.enable_test_submit_cutoff?"Please submit your answer well before that, in order to avoid loss of data":""}})}}testSubmitFailHandler(){this.retrying=!0,this.triggerAlert("Custom",{dialogHeader:"Warning!",dialogHeaderRequired:!0,dialogClosable:!1,alertData:{visible:!0,summary:"Submit test failed!",detail:"Due to unstable internet connection, test could not be submitted. Retry submit or contact administrator.",rejectButton:{btnName:"Pause test",border:"1px solid var(--seven)",fontColor:"var(--seven)",background:"var(--white)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:this.pauseTest.bind(this),id:"tt-playground-alert-reject"},acceptButton:{btnName:"Retry Submit",disable:"false",border:"1px solid var(--one)",fontColor:"var(--seven)",background:"var(--one)",padding:"6px 20px",fontSize:"14px",tabindex:"1",action:this.submitTest.bind(this),id:"tt-playground-alert-accept"}}})}checkAnswerIsTyped(){let t=!1;switch(this.current_q.question_type){case"fillup_single_correct":if(this.current_q.answer&&this.current_q.answer.length){for(let e=0;e<this.current_q.answer.length;e++)if(this.current_q.answer[e].answer){t=!0;break}break}t=!1;break;case"essay_email_writing":if(this.current_q.answer&&this.current_q.answer.length){t=!0;break}t=!1;break;case"descriptive_answer_writing":if(this.current_q.answer&&this.current_q.answer.length&&"<p><br></p>"!=this.current_q.answer){t=!0;break}t=!1;break;case"descriptive_answer_writing_text":if(this.current_q.answer&&this.current_q.answer.length){t=!0;break}t=!1;break;case"html_css_js":if(this.current_q.answer&&(this.current_q.answer.htmlCodeEntered||this.current_q.answer.cssCodeEntered||this.current_q.answer.jsCodeEntered)){t=!0;break}t=!1;break;case"file_upload_questions":if(this.current_q.answer&&this.current_q.answer.length){for(let e=0;e<this.current_q.answer.length;e++)if(this.current_q.answer[e].url&&this.current_q.answer[e].name){t=!0;break}break}t=!1;break;case"question_paper_upload":if(this.current_q.answer&&this.current_q.answer.length){for(let e=0;e<this.current_q.answer.length;e++)if(this.current_q.answer[e].url&&this.current_q.answer[e].name){t=!0;break}break}t=!1;break;default:t=!0}return t}refreshQRUpload(){this.imgSrc=null,this.alertData.result&&setTimeout(()=>{this.imgSrc=this.alertData.result},1e3)}cancelUpload(){this.dialogVisible=!1}onFetchComplete(){this.isFetchedfromS3="yes"}formatTestSummaryData(){if(this.questionList=[],this.testService&&this.testService.testData&&this.testService.testData.frozen_data&&this.testService.testData.frozen_data.frozen_test_data&&this.testService.testData.frozen_data.frozen_test_data.length){this.dialogStyle=document.body.offsetWidth>480&&document.body.offsetHeight>660?{width:"450px",top:"12%"}:document.body.offsetWidth>480&&document.body.offsetHeight<=660?{width:"450px",top:"1%"}:document.body.offsetWidth<=480&&document.body.offsetHeight>660?{width:"100%",top:"15%"}:{width:"100%",top:"1%"};for(let t of this.testService.testData.frozen_data.frozen_test_data)if(t.questions&&t.questions.length)for(let e of t.questions)this.questionList.push(e);this.testSummary=[],this.testSummary.push({label:"No of sections",value:this.testService.testData.frozen_data.frozen_test_data.length}),this.testSummary.push({label:"No of questions",value:this.questionList.length}),this.testSummary.push({label:"Answered",value:this.questionList.filter(t=>t.attempted&&(1===t.state||2===t.state||4===t.state)).length}),this.testSummary.push({label:"Saved in Server",value:this.questionList.filter(t=>t.attempted&&t.online&&(1===t.state||2===t.state||4===t.state)).length}),this.testSummary.push({label:"Skipped",value:this.questionList.filter(t=>!t.attempted&&3===t.state).length}),this.testSummary.push({label:"Not Viewed",value:this.questionList.filter(t=>5===t.state).length})}}mcqEventTracker(){this.testService&&this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.answer_edit_restrict&&this.eventTracker("submit-program","mcq")}getLTIData(){const t="itl-"+this.testService.testData.c_id+this.testService.testData.t_id;let e=null;try{e=JSON.parse(localStorage.getItem(t))}catch(n){e=null}return e}updateQuestionCount(){this.testService.updateQuestionCount.subscribe(t=>{t&&this.calculateAllQuestionCount()})}handleCourseUpdate(t){for(let e of t)this.testService&&this.testService.testData&&this.testService.testData.c_modules&&this.testService.testData.c_modules.t_id===e.c_modules.t_id&&this.testService.testData.c_id===e.c_id&&(this.testService.testData.c_modules=e.c_modules,this.updateInstruction=!this.updateInstruction)}createInstance(t){this.reCreateInstanceForTest=[],this.testService.createInstanceForTest(t).subscribe(e=>{e&&e.length&&(this.testService.testData.frozen_data.frozen_test_data.forEach(n=>{n.questions.forEach(n=>{e.find(e=>{e.q_id===n.q_id&&(e.compilerdata&&e.compilerdata.includes("ip")?(e.compilerdata=JSON.parse(e.compilerdata),n.instanceIP=e.compilerdata.ip,this.current_q.q_id===e.q_id&&(this.current_q.doAction={type:"changeIP",ip:e.compilerdata.ip})):t.forEach(t=>{t.q_id===n.q_id&&this.reCreateInstanceForTest.push(t)}))})})}),this.reCreateInstanceForTest&&this.reCreateInstanceForTest.length&&this.createInstance(this.reCreateInstanceForTest))},e=>{console.error("Project instance not created",e),this.createInstance(t)})}clearInterval(){this.current_q.upCheckInterval&&clearInterval(this.current_q.upCheckInterval),this.pauseTimerForProject=!1}stopInstanceBulk(t){this.testService.stopInstanceBulk(t).subscribe(()=>{})}formatForStopInstance(){const t=[];for(let e of this.projectInstanceArray)t.push(e.key);this.stopInstanceBulk(t)}runProjectTestCases(t){this.current_q.has_auto_evaluation&&this.current_q.config?(this.current_q.loaderStopTimeout=setTimeout(()=>{this.loaderHandler("stop-loader"),this.showGrowlMsg(3e3,"error","submitProject"===t.type?"Could not run submit project":"Could not run test cases","Please try again after some time"),this.current_q.loaderStopTimeout=null},12e4),this.testService.runProjectTestCases(t.data).subscribe(e=>{this.current_q.loaderStopTimeout&&(clearTimeout(this.current_q.loaderStopTimeout),e&&e.success?(this.current_q.tc_list=e.data,this.current_q.resultList=e.resultList,this.current_q=this.formatFlexDataProject(this.current_q),this.current_q.show_tc=!0,this.current_q.doAction={type:"scroll-to-view"},"submitProject"===t.type&&this.submitProject()):this.showGrowlMsg(3e3,"error","submitProject"===t.type?"Could not run submit project":"Could not run test cases","Please try again after some time"),this.loaderHandler("stop-loader"))},e=>{this.showGrowlMsg(3e3,"error","submitProject"===t.type?"Could not run submit project":"Could not run test cases","Please try again after some time"),this.loaderHandler("stop-loader")})):(this.submitProject(),this.loaderHandler("stop-loader"))}submitProject(){this.showGrowlMsg(3e3,"success","Project submitted successfully",""),this.current_q.program_submitted_count+=1,this.testService.updateEditCount(this.current_q),this.current_q&&this.current_q.program_submitted_count>1&&this.questionAnswerActionHandle({type:"restrict-edit"}),this.current_q.attempted=!0,this.eventTracker("submit-program")}formatFlexDataProject(t){const e={header:["Test Case","Evaluation Type","Match","Result"],data:[]};let n=0;return t.tc_list.forEach(t=>{n++,e.data.push({"Test Case":n,"Evaluation Type":t.evaluation_type,Match:t.match?t.match:"NA",Result:t.result?t.result:"NA"})}),t.flex_table_data=e,t}handleCloudTestCases(data){this.current_q.has_auto_evaluation?data&&data.results?(this.current_q.tc_list=data,this.current_q.resultList=eval(data.results.replace("\n","")),this.current_q=this.formatFlexDataCloud(this.current_q),this.current_q.show_tc=!0,this.current_q.doAction={type:"scroll-to-view"},"submitCloud"===data.type?(this.current_q.submit_tc_loading=!1,this.submitCloud()):this.current_q.run_tc_loading=!1):this.showGrowlMsg(3e3,"error","submitCloud"===event.type?"Could not run submit cloud":"Could not run test cases","Please try again after some time"):(this.current_q.submit_tc_loading=!1,this.submitCloud(),this.loaderHandler("stop-loader"))}submitCloud(){this.showGrowlMsg(3e3,"success","Cloud question submitted successfully",""),this.current_q.program_submitted_count+=1,this.testService.updateEditCount(this.current_q),this.current_q&&this.current_q.program_submitted_count>1&&this.questionAnswerActionHandle({type:"restrict-edit"}),this.current_q.attempted=!0,this.eventTracker("submit-program")}formatFlexDataCloud(t){const e={header:["Test Case","Match","Result"],data:[]};return t.resultList.forEach(t=>{e.data.push({"Test Case":t.name,Match:t.match?t.match:"NA",Result:t.status?"Success":"Failed"})}),t.flex_table_data=e,t}openFAQ(){this.alertData=void 0,this.dialogClosable=!0,this.dialogHeader="FAQ",this.dialogHeaderRequired=!0,this.dialogStyle=document.body.offsetWidth>768?{top:"24%",width:"500px",height:"300px"}:{top:"24%",width:"100%",height:"300px"},this.dialogVisible=!0}loaderHandler(t){this.startLoader="start-loader"===t}getAttempt(){return this.attemptVal[this.testService.testData.attempt_no-1]}nonManualQuestionsMark(t){let e=[],n=t,i=this.testService.testData.c_modules.choice_based,s=this.testService.testData.frozen_data.frozen_test_data[n];if(s.questions.forEach(t=>{1!==t.state&&4!==t.state||!(("descriptive_answer_writing"===t.question_type||"descriptive_answer_writing_text"===t.question_type)&&!0===t.auto_evaluation||"project_question"===t.question_type&&!0===t.has_auto_evaluation||"cloud_question"===t.question_type&&!0===t.has_auto_evaluation||"html_css_js"!=t.question_type||"diagram"!=t.question_type||"frontend_technology"!=t.question_type||"block_programming"!=t.question_type||"file_upload_questions"!=t.question_type||"video_answer_speaking"!=t.question_type||"question_paper_upload"!==t.question_type)||(this.nonManualQuestionMark=this.nonManualQuestionMark+t.obtained_mark),(("descriptive_answer_writing"===t.question_type||"descriptive_answer_writing_text"===t.question_type)&&!1===t.auto_evaluation||"project_question"===t.question_type&&!1===t.has_auto_evaluation||"cloud_question"===t.question_type&&!1===t.has_auto_evaluation||"html_css_js"===t.question_type||"diagram"===t.question_type||"frontend_technology"===t.question_type||"block_programming"===t.question_type||"file_upload_questions"===t.question_type||"video_answer_speaking"===t.question_type||"question_paper_upload"===t.question_type)&&(this.countManual=this.countManual+1),("mcq_single_correct"===t.question_type||"mcq_multiple_correct"===t.question_type||"fillup_single_correct"===t.question_type||"essay_email_writing"===t.question_type||"programming"===t.question_type||"classification"===t.question_type||"programming_file_based"===t.question_type||("descriptive_answer_writing"===t.question_type||"descriptive_answer_writing_text"===t.question_type)&&!0===t.auto_evaluation||"project_question"===t.question_type&&!0===t.has_auto_evaluation||"cloud_question"===t.question_type&&!0===t.has_auto_evaluation)&&(this.totalMark=this.totalMark+t.marks)}),i){let t=this.testService.testData.c_modules.choice_based_data[n].max_questions;s.questions.forEach(t=>{(("descriptive_answer_writing"===t.question_type||"descriptive_answer_writing_text"===t.question_type)&&!0===t.auto_evaluation||"project_question"===t.question_type&&!0===t.has_auto_evaluation||"cloud_question"===t.question_type&&!0===t.has_auto_evaluation||"html_css_js"!=t.question_type||"diagram"!=t.question_type||"frontend_technology"!=t.question_type||"block_programming"!=t.question_type||"file_upload_questions"!=t.question_type||"video_answer_speaking"!=t.question_type||"question_paper_upload"!==t.question_type)&&(this.nonManualQuestionMark=t.obtained_mark,e.push(this.nonManualQuestionMark)),this.countManual&&(("descriptive_answer_writing"===t.question_type||"descriptive_answer_writing_text"===t.question_type)&&!1===t.auto_evaluation||"project_question"===t.question_type&&!1===t.has_auto_evaluation||"cloud_question"===t.question_type&&!1===t.has_auto_evaluation||"html_css_js"===t.question_type||"diagram"===t.question_type||"frontend_technology"===t.question_type||"block_programming"===t.question_type||"file_upload_questions"===t.question_type||"video_answer_speaking"===t.question_type||"question_paper_upload"===t.question_type)&&!0===t.attempted&&(this.choiceMaunalCount=this.choiceMaunalCount+1)}),e.sort((t,e)=>t<e?1:t>e?-1:0),e=e.slice(0,t),this.nonManualQuestionMark=e.reduce((t,e)=>t+e,0)}}checkCutoffPercentage(t){let e=[],n=0,i=t.index,s=i,l=this.current_q.secIndex?this.current_q.secIndex:0;if(i===l&&i!=this.testService.testData.frozen_data.frozen_test_data[l].length?s+=1:s=s,l||0===l){for(let t=l;t<s;t++){let t,n,s=this.testService.testData.frozen_data.frozen_test_data[l];if(this.nonManualQuestionsMark(l),n=this.countManual>0,this.testService.testData.c_modules.cutoff_based&&this.testService.testData.c_modules.cutoff_based_data&&this.testService.testData.c_modules.cutoff_based_data.length&&!1===n&&!1===this.testService.testData.c_modules.choice_based&&!1===n){let e=this.nonManualQuestionMark;e=(e/this.totalMark*100).toFixed(),t=e>=this.testService.testData.c_modules.cutoff_based_data[l].cutoff_percentage}else if(this.testService.testData.c_modules.cutoff_based&&this.testService.testData.c_modules.cutoff_based_data&&this.testService.testData.c_modules.cutoff_based_data.length&&this.testService.testData.c_modules.choice_based&&this.testService.testData.c_modules.choice_based_data&&this.testService.testData.c_modules.choice_based_data.length&&!1===n){let e=this.nonManualQuestionMark;e=(e/(this.testService.testData.c_modules.choice_based_data[l].max_question_mark*this.testService.testData.c_modules.choice_based_data[l].max_questions)*100).toFixed(),t=e>=this.testService.testData.c_modules.cutoff_based_data[l].cutoff_percentage}else if(this.testService.testData.c_modules.cutoff_based&&this.testService.testData.c_modules.cutoff_based_data&&this.testService.testData.c_modules.cutoff_based_data.length&&this.testService.testData.c_modules.choice_based&&this.testService.testData.c_modules.choice_based_data&&this.testService.testData.c_modules.choice_based_data.length&&!0===n){let e=this.nonManualQuestionMark,n=0;s.questions.length-this.countManual<1||this.choiceMaunalCount>=this.testService.testData.c_modules.choice_based_data[l].max_questions?(this.disableLock=!0,this.eventTracker("section_unlock"),t=!0):(this.choiceMaunalCount>0?(n=this.testService.testData.c_modules.choice_based_data[l].max_questions-this.choiceMaunalCount,n*=this.testService.testData.c_modules.choice_based_data[l].max_question_mark):n=this.testService.testData.c_modules.choice_based_data[l].max_question_mark*this.testService.testData.c_modules.choice_based_data[l].max_questions,e=(e/n*100).toFixed(),t=e>=this.testService.testData.c_modules.cutoff_based_data[l].cutoff_percentage)}else if(this.testService.testData.c_modules.cutoff_based&&this.testService.testData.c_modules.cutoff_based_data&&this.testService.testData.c_modules.cutoff_based_data.length&&!0===n){let e=this.nonManualQuestionMark,n=this.totalMark;s.questions.length-this.countManual<1?(this.disableLock=!0,this.eventTracker("section_unlock"),t=!0):(e=(e/n*100).toFixed(),t=e>=this.testService.testData.c_modules.cutoff_based_data[l].cutoff_percentage)}e.push(t),i-=1,i>0&&(l=i,this.totalMark=0,this.countManual=0,this.choiceMaunalCount=0,this.nonManualQuestionMark=0)}return this.totalMark=0,this.countManual=0,this.choiceMaunalCount=0,this.nonManualQuestionMark=0,n=e.filter(t=>!1===t).length,0===n}return!0}sectionUnlock(t){t&&this.eventTracker("section_unlock")}disableJitsiLogging(){"object"==typeof exports&&(module.exports={defaultLogLevel:"error",disableLogCollector:!0,"modules/RTC/TraceablePeerConnection.js":"error","modules/statistics/CallStats.js":"error","modules/xmpp/strophe.util.js":"error","modules/xmpp/ChatRoom.js":"error","JitsiConference.js":"error","modules/RTC/BridgeChannel.js":"error"})}faceCamShare(t){this.testService.getLiveScreenShareData().subscribe(e=>{var n=e.jwt_token,i=e.roomName;this.testService.getJitsi().then(()=>{this.jitsiAPI=new window.JitsiMeetExternalAPI("8x8.vc",{roomName:i,parentNode:document.querySelector("#jaas-facecam-container"),width:"100%",height:"100%",configOverwrite:{apiLogLevels:["error"],prejoinPageEnabled:!1,startWithAudioMuted:!1,startWithVideoMuted:!1,hideParticipantsStats:!0,hideConferenceTimer:!0,disableTileView:!0,toolbarButtons:[],startScreenSharing:!1},interfaceConfigOverwrite:{VIDEO_QUALITY_LABEL_DISABLED:!0,AUTO_PIN_LATEST_SCREEN_SHARE:!1},jwt:n}),this.jitsiAPI.on("videoConferenceJoined",(function(e){t.showCallLoader=!1,t.videoCallJoined=!0,null!=t.adminParticipantID&&(clearTimeout(t.participantTimer),t.showCallLoader=!1,t.jitsiAPI.pinParticipant(t.adminParticipantID)),t.socketService.sendMessage({message_type:"one-to-one-joined",school_id:t.testService.userData.school_id,user_id:t.adminUserID,participant_id:e.id})})),this.jitsiAPI.on("participantLeft",(function(e){e&&null!=t.adminParticipantID&&e.id==t.adminParticipantID&&(t.jitsiAPI.dispose(),null==this.liveScreenShareMeeting&&null==this.jitsiAPI&&(this.adminParticipantID=void 0),t.isOnCall=!1,t.isOnCallObj={type:"onCall",value:!1},t.showCallLoader=!1)})),this.jitsiAPI.on("participantJoined",(function(e){e&&null!=t.adminParticipantID&&e.id==t.adminParticipantID&&(clearTimeout(t.participantTimer),t.showCallLoader=!1,t.jitsiAPI.pinParticipant(t.adminParticipantID))})),this.jitsiAPI.on("videoConferenceLeft",(function(e){t.showCallLoader=!1,t.videoCallJoined=!1,t.hangUp()}))})})}faceCamShareTwilio(t){if(this.liveScreenShareTwilio)return null!=t.twilioRoom.participants&&t.twilioRoom.participants.forEach((function(e){t.participantConnected(e,t)})),this.showCallLoader=!1,void(t.twilioRoom.localParticipant&&(t.twilioRoom.localParticipant.videoTracks.forEach(t=>{t.track.enable()}),t.twilioRoom.localParticipant.audioTracks.forEach(t=>{t.track.enable()})));this.joinTwilioRoom(t,!1)}participantConnected(t,e){e.showCallLoader=!1,clearTimeout(e.participantTimer),e.showCallLoader=!1;const n=document.createElement("div");n.setAttribute("id",t.sid),e.renderer.appendChild(e.remoteParticipant.nativeElement,n),t.tracks.forEach(t=>{t.isSubscribed&&e.trackSubscribed(n,t.track)}),t.on("trackSubscribed",t=>e.trackSubscribed(n,t)),t.on("trackUnsubscribed",e.trackUnsubscribed)}trackSubscribed(t,e){const n=e.attach();t.appendChild(n)}trackUnsubscribed(t){t.detach().forEach(t=>{t.remove()})}screenShare(t){this.testService.getLiveScreenShareData().subscribe(e=>{if(e){var n=e.jwt_token,i=e.roomName;this.testService.getJitsi().then(()=>{this.liveScreenShareMeeting=new window.JitsiMeetExternalAPI("8x8.vc",{roomName:i,parentNode:document.querySelector("#jaas-container-share"),height:"0px",configOverwrite:{prejoinPageEnabled:!1,startWithAudioMuted:!0,startWithVideoMuted:!0,hideParticipantsStats:!0,hideConferenceTimer:!0,disableTileView:!0,toolbarButtons:[],startSilent:!0},interfaceConfigOverwrite:{VIDEO_QUALITY_LABEL_DISABLED:!0,FILM_STRIP_MAX_HEIGHT:0,AUTO_PIN_LATEST_SCREEN_SHARE:!1},jwt:n}),this.liveScreenShareMeeting.on("videoConferenceJoined",(function(e){t.livescreensharingJoined=!0,t.showCallLoader=!1,null!=t.adminParticipantID&&(clearTimeout(t.screenShareParticipantTimer),t.showCallLoader=!1,t.liveScreenShareMeeting.pinParticipant(t.adminParticipantID)),-1==window.navigator.userAgent.toLowerCase().indexOf("firefox")&&alert(t.staffName+" is asking to share your screen"),t.liveScreenShareMeeting.executeCommand("toggleShareScreen"),t.socketService.sendMessage({message_type:"screen-sharing-joined",school_id:t.testService.userData.school_id,user_id:t.adminUserID,participant_id:e.id})})),this.liveScreenShareMeeting.on("participantLeft",(function(e){void 0!==e&&void 0!==t.liveScreenShareMeeting&&null!=t.adminParticipantID&&e.id==t.adminParticipantID&&(t.liveScreenShareMeeting.executeCommand("hangup"),t.liveScreenShareMeeting.dispose(),t.liveScreenShareMeeting=void 0,null==t.liveScreenShareMeeting&&null==t.jitsiAPI&&(t.adminParticipantID=void 0))})),this.liveScreenShareMeeting.on("participantJoined",(function(e){null!=t.adminParticipantID&&e&&e.id==t.adminParticipantID&&clearTimeout(t.screenShareParticipantTimer)})),t.liveScreenShareMeeting.addListener("screenSharingStatusChanged",(function(e){void 0===e||e.on||(void 0!==t.screenShareParticipantTimer&&clearTimeout(t.screenShareParticipantTimer),t.socketService.sendMessage({message_type:"screen-sharing-stopped",school_id:t.testService.userData.school_id,user_id:t.adminUserID}),t.liveScreenShareMeeting.executeCommand("hangup"),t.liveScreenShareMeeting.dispose(),null==t.liveScreenShareMeeting&&null==t.jitsiAPI&&(t.adminParticipantID=void 0))})),t.liveScreenShareMeeting.on("videoConferenceLeft",(function(e){t.showCallLoader=!1,t.livescreensharingJoined=!1,t.hangUp()})),this.liveScreenShare&&setTimeout(()=>{this.liveScreenShareMeeting.getContentSharingParticipants().then(e=>{e.sharingParticipantIds.length<1&&(t.noOfTimeScreenSharingPause>0?(t.displayShareScreenDialog=!0,t.noOfTimeScreenSharingPause-=1):"Submit"===t.liveScreenSharingFeature?t.submitTest():t.pauseTest(),t.liveScreenShareMeeting.executeCommand("hangup"),t.liveScreenShareMeeting.dispose(),null==t.liveScreenShareMeeting&&null==t.jitsiAPI&&(t.adminParticipantID=void 0))})},3e4)}).catch(t=>{this.shareScreenErrorWarn("Oops! Could not access screen sharing media!","scr-share-error")})}},t=>{this.shareScreenErrorWarn("Unfortunately, we could not access screen sharing media!","scr-share-error")})}FinalSubmit(){this.timerRunnerSub&&clearInterval(this.timerRunnerSub),this.success.emit({type:"redirect"})}dialogSubmitTest(t){t&&this.submitTest()}dialogPauseTest(t){t&&this.pauseTest()}dialogScreenShare(t){t&&(this.screenShare(this),this.displayShareScreenDialog=!1)}formatQuestionPaperUploadQuestion(t){if(t.formatted_type="File Upload Question",t.answer&&(t.l_submitted_answer=t.answer),t.last_event&&t.last_event.l_event_data&&t.last_event.l_event_data.answer&&(t.answer=JSON.parse(t.last_event.l_event_data.answer)),t.program_submitted_count&&(t.attempted=!0),t.c_id=this.testService.testData.c_id,t.t_id=this.testService.testData.t_id,t.user_id=this.testService.userData.user_id,t.question_data&&(t.question_data=JSON.parse(t.question_data)),t.question_media){if(t.question_media.file_count){t.fileData=[];for(let e=1;e<=t.question_media.file_count;e++)t.fileData.push(e);t.fileCount=t.question_media.file_count}t.question_media.file_size&&(t.fileSize=t.question_media.file_size)}if(!t.answer){t.answer=[];for(let e=0;e<t.fileCount;e++)t.answer.push({name:null,url:null})}return t}ViewAnalysis(){localStorage.setItem("ContestRedirect",JSON.stringify({data:{c_id:this.testService.testData.c_id,t_id:this.testService.testData.t_id,user_id:this.testService.userData.user_id,attempt_no:this.testService.testData.attempt_no},label:"Attempt"+this.testService.testData.attempt_no+"Result",value:this.testService.testData.attempt_no})),this.onDialogClose()}}}).call(this,__webpack_require__("3UD+")(module))},mbIT:function(t,e,n){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},n3uD:function(t,e,n){"use strict";var i=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){i=t},get useDeprecatedSynchronousErrorHandling(){return i}}},ojYq:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("mrSG");class s{constructor(t){this.testService=t,this.leaderBoardConstants=this.testService.leaderBoardConstants}calculate_final_leaderboard_score(t,e,n){let i;return i=t*e*Math.pow(n,this.leaderBoardConstants.final_score_exponent)*this.leaderBoardConstants.final_score_multiply+this.leaderBoardConstants.constant_hundred,i}calculate_delta_multiplier(t){let e,n,i;return n=this.leaderBoardConstants.constant_one-Math.pow(this.leaderBoardConstants.delta_multiplier_exponent1,Math.pow(t,this.leaderBoardConstants.delta_multiplier_exponent1)),i=Math.pow(t,this.leaderBoardConstants.delta_multiplier_exponent2),e=.05+n*i,e}calculate_r(t,e){return t/e}calculate_current_score(t,e,n,i,s,l){let a;return a="programming"===l||"programming_file_based"===l?s:"essay_email_writing"===l?i:1,t*e*n*this.leaderBoardConstants.current_score_constant*a}calculate_descriptive_score(t,e,n,i){let s,l;return s=Math.pow(t,this.leaderBoardConstants.word_count_exponent)+Math.pow(this.leaderBoardConstants.constant_one-e,this.leaderBoardConstants.grammar_error_exponent)+Math.pow(this.leaderBoardConstants.constant_one-n,this.leaderBoardConstants.spelling_error_exponent)+Math.pow(i,this.leaderBoardConstants.relevancy_exponent)+this.leaderBoardConstants.descriptive_score_numerator_addition,l=s/this.leaderBoardConstants.descriptive_score_denominator,l}calculate_programming_score(t,e,n,i){let s=0,l=0;const a=i.length;i&&i.length?(i.forEach((t,e)=>{let n=0,i=0,l=0;n=this.leaderBoardConstants.constant_one-this.leaderBoardConstants.constant_two/(this.leaderBoardConstants.constant_one+Math.exp(Math.pow(t,this.leaderBoardConstants.test_case_exponent1))),i=Math.pow(e+this.leaderBoardConstants.constant_one,this.leaderBoardConstants.test_case_exponent2),l=Math.pow(n,i),s+=l}),l=Math.pow(s,this.leaderBoardConstants.constant_one/a)):l=1;let r=Math.pow(1+t,this.leaderBoardConstants.compileCount_exponent)*Math.pow(1+e,this.leaderBoardConstants.submitCount_exponent)*Math.pow(1+n,this.leaderBoardConstants.debugCount_exponent)*l;return r=r||.1,r}calculate_difficulty_score(t,e){return(t=Math.pow(t,this.leaderBoardConstants.difficulty_multiplier_exponent))*e}calculate_difficulty_multiplier(t,e){let n,i;return n=0===t?1:t,0===e&&(e=1),i=Math.pow(e,1),Math.pow(n/i,this.leaderBoardConstants.constant_one)}calculate_difficulty_index(t,e,n,i){let s;return s="correct"===t?Math.pow(Math.pow(e/100,1)*this.leaderBoardConstants.constant_hundred+Math.pow(n/100,1.5)*this.leaderBoardConstants.constant_hundred+Math.pow(i/100,1.1)*this.leaderBoardConstants.constant_hundred,1):"partial"===t?Math.pow(Math.pow(e/100,1.5)*this.leaderBoardConstants.constant_hundred+Math.pow(n/100,1.25)*this.leaderBoardConstants.constant_hundred,1):"incorrect"===t?Math.pow(n/100,1.25)*this.leaderBoardConstants.constant_hundred:1,s}calculate_easiness_index(t,e,n,i,s){let l;return"correct"===t?l=Math.pow(e/100,1)*this.leaderBoardConstants.constant_hundred:"partial"===t?l=Math.pow(Math.pow(e/100,1)*this.leaderBoardConstants.constant_hundred+Math.pow(s/100,1.1)*this.leaderBoardConstants.constant_hundred,1):"incorrect"===t?(l=Math.pow(e/100,1)*this.leaderBoardConstants.constant_hundred+Math.pow(s/100,1.1)*this.leaderBoardConstants.constant_hundred+Math.pow(n/100,1.5)*this.leaderBoardConstants.constant_hundred,l=Math.pow(l,1)):l=Math.pow(Math.pow(n/100,1.5)*this.leaderBoardConstants.constant_hundred+Math.pow(i/100,1.25)*this.leaderBoardConstants.constant_hundred+Math.pow(e/100,1)*this.leaderBoardConstants.constant_hundred+Math.pow(s/100,1.1)*this.leaderBoardConstants.constant_hundred,1),l}calculate_mark(t,e,n){let i,s,l;return i=Math.pow(e,this.positive_mark_exponent),s=Math.pow(n,this.negative_mark_exponent),l=i*s,l}calculate_negative_marks_score(t,e,n){return(t+Math.pow(this.leaderBoardConstants.Test_max_marks_weightage*e,this.leaderBoardConstants.constant_one))/n}calculate_positive_marks_score(t,e,n,i){let s;return s="partial"===n||"correct"===n?Math.pow(this.leaderBoardConstants.question_max_mark_weightage*(this.leaderBoardConstants.positive_score_numerator_addition+t),this.leaderBoardConstants.constant_one)/(this.leaderBoardConstants.marks_score_intermediate_weightage*i):Math.pow(this.leaderBoardConstants.question_max_negative_mark_weightage*e,this.leaderBoardConstants.positive_score_numerator_exponent)/(i*this.leaderBoardConstants.marks_score_intermediate_weightage),s}calculate_effort_multiplier(t,e,n,i,s){const l=Math.pow(this.leaderBoardConstants.effort_multiplier_constant1*(this.leaderBoardConstants.constant_one+t),this.leaderBoardConstants.clearAnswerCount_exponent),a=Math.pow(this.leaderBoardConstants.effort_multiplier_constant2*(this.leaderBoardConstants.constant_one+e),this.leaderBoardConstants.hintsCount_exponent),r=this.leaderBoardConstants.effort_multiplier_constant3*Math.pow(1+n,this.leaderBoardConstants.optionSwitchCount_exponent),o=this.leaderBoardConstants.effort_multiplier_constant4*Math.pow(i,this.leaderBoardConstants.bookmarkCount_exponent);return this.leaderBoardConstants.constant_one/(l+a+r+o+this.effort_multiplier_constant5)}calculate_attempt_multiplier(t,e){e=this.leaderBoardConstants.constant_one+e;const n=t+Math.pow(e,this.attempt_multiplier_contsant);return this.leaderBoardConstants.constant_one-t/n}calculate_time_multiplier(t){let e;e=t<=1?3:.5;const n=this.leaderBoardConstants.constant_one+Math.exp(Math.pow(t,e));return this.leaderBoardConstants.constant_two/n}calculate_ratio(t,e){return t/e}setLeaderBoardConstants(t,e,n){return new Promise((i,s)=>{try{"mcq_single_correct"===t?this.effort_multiplier_constant5=Math.pow(.25,.5):"mcq_multiple_correct"===t?this.effort_multiplier_constant5=Math.pow(.375,.5):"fillup_single_correct"===t?this.effort_multiplier_constant5=Math.pow(.165,.5):"programming"===t||"programming_file_based"===t||"block_programming"===t?this.effort_multiplier_constant5=Math.pow(.5,.5):"html_css_js"===t?this.effort_multiplier_constant5=Math.pow(.325,.5):"frontend_technology"===t?this.effort_multiplier_constant5=Math.pow(.4,.5):"descriptive_answer_writing"===t||"descriptive_answer_writing_text"===t?this.effort_multiplier_constant5=Math.pow(.65,.5):"essay_email_writing"===t?this.effort_multiplier_constant5=Math.pow(.475,.5):"file_upload_questions"===t||"question_paper_upload"===t?this.effort_multiplier_constant5=Math.pow(.4,.5):"video_answer_speaking"===t?this.effort_multiplier_constant5=Math.pow(.475,.5):"diagram"===t?this.effort_multiplier_constant5=Math.pow(.4,.5):"classification"===t&&(this.effort_multiplier_constant5=Math.pow(.375,.5)),this.attempt_multiplier_contsant="correct"===n?.5:"incorrect"===n?.65:"partial"===n?.85:1.2,"correct"===e||"partial"===e?(this.positive_mark_exponent=1,this.negative_mark_exponent=.5):"skipped"===e?(this.positive_mark_exponent=1,this.negative_mark_exponent=.535):(this.positive_mark_exponent=1.05,this.negative_mark_exponent=.5),i(!0)}catch(l){i(!0)}})}findQuestionState(t){switch(t){case-1:return"skipped";case 1:return"correct";case 2:return"incorrect";case 3:return"skipped";case 4:return"partial";case 4:return"not viewed"}}evaluateLeaderboardScore(t){return new Promise((e,n)=>i.__awaiter(this,void 0,void 0,(function*(){try{let n,i=0,s=0,l=0,a=0,r=0,o=0,u=0,c=0,d=0,h=1,p=0,_=0,m=0,g=0,b=0,v=0,f="",S=1,w=0,y="correct",x=0,k=0,D=0,C=0,q=0,I=[],P=0,M=0;r=t.marks,d=t.time_spent,u=this.testService.testData.t_total_marks,o=t&&t.negative_mark?t.negative_mark:0,c=t&&t.program_submitted_count?t.program_submitted_count:0,p=t&&t.clear_answer_count?t.clear_answer_count:0,_=t&&t.total_hints_shown?t.total_hints_shown:0,m=t&&t.options_switched_count?t.options_switched_count:0,g=t.bookmarked?1:0,b=t.obtained_mark,f=t.question_type,w=this.findQuestionState(t.state),"essay_email_writing"===t.question_type&&t.essay_percentages?(D=t.essay_percentages.word_percent/100,C=t.essay_percentages.grammar_error_percent/100,q=t.essay_percentages.spelling_error_percent/100):(D=0,C=0,q=0),M=t&&t.relevancyPercentage?t.relevancyPercentage/100:0,"programming"===t.question_type||"programming_file_based"===t.question_type?(x=t.compiled_count,k=t.debug_count?t.debug_count:0,n=t.test_case_match_percent,n&&n.length&&(I=[],n.forEach(t=>{I.push(t.test_case_percentage)}))):(x=0,k=0,I=[]),t&&t.questionMetaData&&(i=t.questionMetaData.p_of_right,s=t.questionMetaData.p_of_wrong,l=t.questionMetaData.p_of_unattempted,a=t.questionMetaData.p_of_partial,v=1===t.state?t.questionMetaData.avg_right:2===t.state?t.questionMetaData.avg_wrong:2===t.state?t.questionMetaData.avg_unattempted:t.questionMetaData.avg_partial),t&&t.previous_attempt_data&&(h=t.previous_attempt_data.attempt_no+1,S=t.previous_attempt_data.base_score?t.previous_attempt_data.base_score:1,y=this.findQuestionState(t.previous_attempt_data.state)),yield this.setLeaderBoardConstants(f,w,y);const T=864e5,E=new Date(JSON.parse(t.previous_attempt_data.time_of_attempt)),O=new Date;P=Math.round(Math.abs((E.getTime()-O.getTime())/T)),0===v&&(v="mcq_single_correct"===f||"mcq_multiple_correct"===f||"fillup_single_correct"===f||"classification"===f?60:"programming"===f||"programming_file_based"===f||"frontend_technology"===f||"html_css_js"===f||"block_programming"===f?1800:1200);const A=this.calculate_ratio(d,v),H=this.calculate_time_multiplier(A),z=this.calculate_attempt_multiplier(h,P),R=this.calculate_effort_multiplier(p,_,m,g,f),N=this.calculate_positive_marks_score(b,r,w,u),B=this.calculate_negative_marks_score(r,o,u),L=this.calculate_mark(w,N,B),j=this.calculate_easiness_index(w,i,s,l,a),F=this.calculate_difficulty_index(w,s,l,a),J=this.calculate_difficulty_multiplier(F,j),U=this.calculate_difficulty_score(J,L),K=this.calculate_programming_score(x,c,k,I),Q=this.calculate_descriptive_score(D,C,q,M),W=this.calculate_current_score(H,U,R,Q,K,f),$=this.calculate_r(W,S),V=this.calculate_delta_multiplier($),Y=this.calculate_final_leaderboard_score(V,W,z);e({success:!0,leaderboard_values:{attempt_no:t.previous_attempt_data.attempt_no?t.previous_attempt_data.attempt_no:0,base_score:W,final_score:Y,time_ratio:A||0,time_score:H||0,attempt_score:z||0,effort_score:R||0,positive_score:N||0,negative_score:B||0,marks_score:L||0,difficulty_mark_score:U||0,program_score:K||0,descriptive_score:Q||0,current_attempt_score:W||0,r_value:$||0,delta_value:V||0}})}catch(n){e({success:!1,message:"Error occured"})}})))}}},"p//D":function(t,e,n){"use strict";e.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),e.$$rxSubscriber=e.rxSubscriber},pshJ:function(t,e,n){"use strict";e.isFunction=function(t){return"function"==typeof t}},pznz:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{}},w5QO:function(t,e,n){"use strict";e.noop=function(){}},yx2s:function(t,e,n){"use strict";var i=n("FWf1");e.canReportError=function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof i.Subscriber?e:null}return!0}},"zB/H":function(t,e,n){"use strict";var i=n("mbIT"),s=n("GMZp"),l=n("pshJ"),a=n("MC6w"),r=n("24jU"),o=n("LBXl");function u(t){return t.reduce((function(t,e){return t.concat(e instanceof o.UnsubscriptionError?e.errors:e)}),[])}e.Subscription=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,c=this._parents,d=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,_=c?c.length:0;n;)n.remove(this),n=++p<_&&c[p]||null;if(l.isFunction(d)&&a.tryCatch(d).call(this)===r.errorObject&&(e=!0,t=t||(r.errorObject.e instanceof o.UnsubscriptionError?u(r.errorObject.e.errors):[r.errorObject.e])),i.isArray(h))for(p=-1,_=h.length;++p<_;){var m=h[p];if(s.isObject(m)&&a.tryCatch(m.unsubscribe).call(m)===r.errorObject){e=!0,t=t||[];var g=r.errorObject.e;g instanceof o.UnsubscriptionError?t=t.concat(u(g.errors)):t.push(g)}}if(e)throw new o.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}()},zfKp:function(t,e,n){"use strict";e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"}}]);